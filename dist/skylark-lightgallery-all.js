/**
 * skylark-lightgallery - The skylark album widgets.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(t,e,n){"function"==typeof n?(map[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):map[t]={factory:null,resolved:!0,exports:n}},require=globals.require=function(t){if(!map.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=map[t];if(!module.resolved){var e=[];module.deps.forEach(function(t){e.push(require(t))}),module.exports=module.factory.apply(globals,e)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(t,e,n){"string"==typeof e&&(e=e.split("."));for(var r=e.length,i=t,s=0,o=e[s++];s<r;)i=i[o]=i[o]||{},o=e[s++];if(i[o]){if(n)throw new Error("This namespace already exists:"+e)}else i[o]=n||{};return i[o]}}),define("skylark-langx-ns/ns",["./_attach"],function(t){var e={attach:function(n,r){return t(e,n,r)}};return e}),define("skylark-langx-ns/main",["./ns"],function(t){return t}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),define("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),define("skylark-langx-types/types",["skylark-langx-ns"],function(t){var e,n=Array.isArray,r={}.toString,i=(e={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),function(t){return null==t?String(t):e[r.call(t)]||"object"}),s=n||function(t){return object&&object.constructor===Array};function o(t){var e;for(e in t)if(null!==t[e])return!1;return!0}function a(t){return"function"==i(t)}function l(t){return t&&t.nodeType}function u(t){return"number"==typeof t}function c(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function h(t){return"string"==typeof t}function d(t){return t&&t==t.window}function f(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}var p=1/0,m=1.7976931348623157e308,g=NaN,y=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,k=/^0o[0-7]+$/i,b=parseInt;function w(t){if(!t)return 0===t?t:0;if((t=_(t))===p||t===-p){var e=t<0?-1:1;return e*m}return t==t?t:0}function _(t){if("number"==typeof t)return t;if(f(t))return g;if(c(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=c(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=x.test(t);return n||k.test(t)?b(t.slice(2),n?2:8):v.test(t)?g:+t}return t.attach("langx.types",{isArray:s,isArrayLike:function(t){return!h(t)&&!l(t)&&"number"==typeof t.length&&!a(t)},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===r.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:o,isEmptyObject:o,isFunction:a,isHtmlNode:l,isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:u,isNumeric:u,isObject:c,isPlainObject:function(t){return c(t)&&!d(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:h,isSameOrigin:function(t){if(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t.startsWith(e)}},isSymbol:f,isUndefined:function(t){return void 0===t},isWindow:d,type:i,toFinite:w,toNumber:_,toInteger:function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0}})}),define("skylark-langx-types/main",["./types"],function(t){return t}),define("skylark-langx-types",["skylark-langx-types/main"],function(t){return t}),define("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(t,e){var n,r,i=Object.prototype.hasOwnProperty,s=(Array.prototype.slice,e.isBoolean,e.isFunction,e.isObject),o=e.isPlainObject,a=e.isArray;e.isArrayLike,e.isString,e.toInteger;function l(t){if(!s(t))return[];var e=[];for(var n in t)e.push(n);return e}function u(t,e){if(!a(e))return null!=t&&i.call(t,e);for(var n=e.length,r=0;r<n;r++){var s=e[r];if(null==t||!i.call(t,s))return!1;t=t[s]}return!!n}return t.attach("langx.objects",{allKeys:l,attach:t.attach,defaults:(n=l,r=!0,function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var i=1;i<e;i++)for(var s=arguments[i],o=n(s),a=o.length,l=0;l<a;l++){var u=o[l];r&&void 0!==t[u]||(t[u]=s[u])}return t}),has:u,isMatch:function(t,e){var n=n(e),r=n.length;if(null==t)return!r;for(var i=Object(t),s=0;s<r;s++){var o=n[s];if(e[o]!==i[o]||!(o in i))return!1}return!0},keys:function(t){if(s(t))return[];var e=[];for(var n in t)u(t,n)&&e.push(n);return e},removeItem:function(t,e){if(a(t)){var n=t.indexOf(e);-1!=n&&t.splice(n,1)}else if(o(t))for(var r in t)if(t[r]==e){delete t[r];break}return this},values:function(t){for(var e=l(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}})}),define("skylark-langx-objects/clone",["skylark-langx-types","./objects"],function(t,e){var n=t.isPlainObject,r=t.isArray;return e.clone=function t(e,i){var s;if(void 0===e||null===e)s=e;else if(i&&e.clone)s=e.clone();else if(r(e)){s=[];for(var o=0;o<e.length;o++)s.push(t(e[o]))}else if(n(e))for(var a in s={},e)s[a]=t(e[a]);else s=e;return s}}),define("skylark-langx-objects/each",["./objects"],function(t){return t.each=function(t,e,n){var r,i,s,o;if(t)if(void 0===(r=t.length)){for(i in t)if(t.hasOwnProperty(i)&&(o=t[i],!1===(n?e.call(o,o,i):e.call(o,i,o))))break}else for(s=0;s<r&&(o=t[s],!1!==(n?e.call(o,o,s):e.call(o,s,o)));s++);return this}}),define("skylark-langx-objects/_mixin",["skylark-langx-types","./objects"],function(t,e){var n=t.isPlainObject;return function t(e,r,i,s){for(var o in r)s&&void 0!==e[o]||(i&&n(r[o])?(n(e[o])||(e[o]={}),t(e[o],r[o],i,s)):void 0!==r[o]&&(e[o]=r[o]));return e}}),define("skylark-langx-objects/_parse_mixin_args",["skylark-langx-types","./objects"],function(t,e){var n=Array.prototype.slice,r=t.isBoolean;return function(t){var e=n.call(arguments,0),i=e.shift(),s=!1;r(e[e.length-1])&&(s=e.pop());return{target:i,sources:e,deep:s}}}),define("skylark-langx-objects/mixin",["skylark-langx-types","./objects","./_mixin","./_parse_mixin_args"],function(t,e,n,r){return e.mixin=function(){var t=r.apply(this,arguments);return t.sources.forEach(function(e){n(t.target,e,t.deep,!1)}),t.target}}),define("skylark-langx-objects/extend",["./objects","./mixin"],function(t,e){var n=Array.prototype.slice;return t.extend=function(t){var r,i=n.call(arguments,1);"boolean"==typeof t&&(r=t,t=i.shift());0==i.length&&(i=[t],t=this);return i.forEach(function(n){e(t,n,r)}),t}}),define("skylark-langx-objects/includes",["./objects"],function(t){return t.includes=function(t,e,n,r){t=isArrayLike(t)?t:values(t),n=n&&!r?toInteger(n):0;var i=t.length;n<0&&(n=nativeMax(i+n,0));return isString(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&baseIndexOf(t,e,n)>-1}}),define("skylark-langx-objects/is-equal",["skylark-langx-types","./objects"],function(t,e){var n,r,i=t.isFunction,s="undefined"!=typeof Symbol?Symbol.prototype:null;return n=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var s=typeof t;return("function"===s||"object"===s||"object"==typeof e)&&r(t,e,n,i)},r=function(t,e,r,o){var a=toString.call(t);if(a!==toString.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var l="[object Array]"===a;if(!l){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(i(u)&&u instanceof u&&i(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],o=o||[];for(var h=r.length;h--;)if(r[h]===t)return o[h]===e;if(r.push(t),o.push(e),l){if((h=t.length)!==e.length)return!1;for(;h--;)if(!n(t[h],e[h],r,o))return!1}else{var d,f=Object.keys(t);if(h=f.length,Object.keys(e).length!==h)return!1;for(;h--;)if(d=f[h],void 0===e[d]||!n(t[d],e[d],r,o))return!1}return r.pop(),o.pop(),!0},e.isEqual=function(t,e){return n(t,e)}}),define("skylark-langx-objects/omit",["./objects"],function(t){return t.omit=function(t,e,n){if(!t)return null;for(var r=mixin({},t),i=1;i<arguments.length;i++){var s=arguments[i];s in t&&delete r[s]}return r}}),define("skylark-langx-objects/pick",["./objects"],function(t){return t.pick=function(t,e,n){if(!t)return null;for(var r={},i=1;i<arguments.length;i++){var s=arguments[i];s in t&&(r[s]=t[s])}return r}}),define("skylark-langx-objects/result",["skylark-langx-types","./objects"],function(t,e){var n=t.isArray,r=t.isFunction;return e.result=function(t,e,i){n(e)||(e=e.split("."));var s=e.length;if(!s)return r(i)?i.call(t):i;for(var o=0;o<s;o++){var a=null==t?void 0:t[e[o]];void 0===a&&(a=i,o=s),t=r(a)?a.call(t):a}return t}}),define("skylark-langx-objects/safe-mixin",["./objects","./_mixin","./_parse_mixin_args"],function(t,e,n){return t.safeMixin=function(){var t=n.apply(this,arguments);return t.sources.forEach(function(n){e(t.target,n,t.deep,!0)}),t.target}}),define("skylark-langx-objects/scall",["./objects"],function(t){return t.scall=function(t,e,n,r){if(t&&t[e]){var i=slice.call(arguments,2);return t[e].apply(t,i)}}}),define("skylark-langx-objects/shadow",["./objects"],function(t){return t.shadow=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}}),define("skylark-langx-objects/main",["./objects","./clone","./each","./extend","./includes","./is-equal","./mixin","./omit","./pick","./result","./safe-mixin","./scall","./shadow"],function(t){return t}),define("skylark-langx-objects",["skylark-langx-objects/main"],function(t){return t}),define("skylark-langx-arrays/arrays",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects"],function(t,e,n){var r=Array.prototype.filter,i=Array.prototype.find,s=e.isArrayLike;function o(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function a(t){return t!=t}function l(t){if(s(t)){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(s(r))for(var i=0;i<r.length;i++)e.push(r[i]);else e.push(r)}return e}return t}function u(t,e,n){return s(t)?(n||[]).concat(Array.prototype.slice.call(t,e||0)):[t]}return t.attach("langx.arrays",{baseFindIndex:o,baseIndexOf:function(t,e,n){if(e!=e)return o(t,a,n);var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1},compact:function(t){return r.call(t,function(t){return null!=t})},first:function(t,e){return e?t.slice(0,e):t[0]},filter:function(t,e){return r.call(t,e)},find:function(t,e){return i.call(t,e)},flatten:l,grep:function(t,e){var r=[];return n.each(t,function(t,n){e(n,t)&&r.push(n)}),r},inArray:function(t,e){if(!e)return-1;var n;if(e.indexOf)return e.indexOf(t);n=e.length;for(;n--;)if(e[n]===t)return n;return-1},indexOf:function(t,e){return t.indexOf(e)},makeArray:u,toArray:u,last:function(t){return t[t.length-1]},merge:function(t,e){var n=e.length,r=t.length,i=0;if("number"==typeof n)for(;i<n;i++)t[r++]=e[i];else for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},forEach:function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n)},map:function(t,e){var n,r,i,o=[];if(s(t))for(r=0;r<t.length;r++)null!=(n=e.call(t[r],t[r],r))&&o.push(n);else for(i in t)null!=(n=e.call(t[i],t[i],i))&&o.push(n);return l(o)},reduce:function(t,e,n){return Array.prototype.reduce.call(t,e,n)},uniq:function(t){return r.call(t,function(e,n){return t.indexOf(e)==n})}})}),define("skylark-langx-arrays/main",["./arrays"],function(t){return t}),define("skylark-langx-arrays",["skylark-langx-arrays/main"],function(t){return t}),define("skylark-langx/arrays",["skylark-langx-arrays"],function(t){return t}),define("skylark-langx-constructs/constructs",["skylark-langx-ns"],function(t){return t.attach("langx.constructs",{})}),define("skylark-langx-constructs/inherit",["./constructs"],function(t){return t.inherit=function(t,e){if("function"!=typeof e&&e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object.setPrototypeOf(t,e)}}),define("skylark-langx-constructs/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","./constructs","./inherit"],function(t,e,n,r,i,s){var o=r.uniq,a=n.has,l=n.mixin,u=e.isArray,c=e.isDefined,h=function(){function t(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function n(r,i,h,d){u(i)&&(d=h,h=i,i=null),i=i||Object,c(h)&&!u(h)&&(d=h,h=!1);var f=i;h&&(h=function(t,e){var n=[];return e.forEach(function(t){if(a(t,"__mixins__"))throw new Error("nested mixins");for(var e=[];t;)e.unshift(t),t=t.superclass;n=n.concat(e)}),(n=(n=o(n)).filter(function(e){for(var n=t;n;){if(e===n)return!1;if(a(n,"__mixins__"))for(var r=n.__mixins__,i=0;i<r.length;i++)if(r[i]===e)return!1;n=n.superclass}return!0})).length>0&&n}(f,h)),h&&(f=function(t,e){for(var n=t,r=0;r<e.length;r++){var i=new Function;s(i,n),i.superclass=null,l(i.prototype,e[r].prototype),i.prototype.__mixin__=e[r],n=i}return n}(f,h));var p=r.klassName||"",m=new Function("return function "+p+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return s(m,f),m.superclass=i,m._constructor||(m._constructor=t),h&&(m.__mixins__=h),m.partial||(m.partial=function(t,n){return function(t,n,r){var i=t.prototype,s=t.superclass.prototype,o=r&&r.noOverrided;r&&r.overrides;for(var a in n)if("constructor"!==a){var l=n[a];"function"==typeof n[a]?i[a]=l._constructor||o||"function"!=typeof s[a]?l:function(t,e,n){return function(){var t=this.overrided;this.overrided=n;var r=e.apply(this,arguments);return this.overrided=t,r}}(0,l,s[a]):e.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(i,a,l):i[a]=l}return t}(this,t,n)}),m.inherit||(m.inherit=function(t,e,r){return n(t,this,e,r)}),m.partial(r,d),m}}();return i.klass=h}),define("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-constructs/klass"],function(t,e){return t.attach("langx.klass",e)}),define("skylark-langx-klass/main",["./klass"],function(t){return t}),define("skylark-langx-klass",["skylark-langx-klass/main"],function(t){return t}),define("skylark-langx/klass",["skylark-langx-klass"],function(t){return t}),define("skylark-langx/ArrayStore",["./klass"],function(t){var e=function(t){if(!t)return t;var n=!!t.then;function r(r){t[r]=function(){var i=arguments,s=Deferred.when(t,function(t){return e(Array.prototype[r].apply(t,i))});if("forEach"!==r||n)return s}}return n&&(t=Object.delegate(t)),r("forEach"),r("filter"),r("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},n=t({klassName:"ArrayStore",queryEngine:function(t,e){switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var n=t;t=function(t){for(var e in n){var r=n[e];if(r&&r.test){if(!r.test(t[e],t))return!1}else if(r!=t[e])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}function r(n){var r=function(t,e,n){var r,i=0,s=t&&t.length||0,o=[];s&&"string"==typeof t&&(t=t.split(""));"string"==typeof e&&(e=cache[e]||buildFn(e));if(n)for(;i<s;++i)r=t[i],e.call(n,r,i,t)&&o.push(r);else for(;i<s;++i)r=t[i],e(r,i,t)&&o.push(r);return o}(n,t),i=e&&e.sort;if(i&&r.sort("function"==typeof i?i:function(t,e){for(var n,r=0;n=i[r];r++){var s=t[n.attribute],o=e[n.attribute];if(s=null!=s?s.valueOf():s,o=null!=o?o.valueOf():o,s!=o)return!!n.descending==(null==s||s>o)?-1:1}return 0}),e&&(e.start||e.count)){var s=r.length;(r=r.slice(e.start||0,(e.start||0)+(e.count||1/0))).total=s}return r}return r.matches=t,r},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var n=this.data,r=this.index,i=this.idProperty,s=t[i]=e&&"id"in e?e.id:i in t?t[i]:Math.random();if(s in r){if(e&&!1===e.overwrite)throw new Error("Object already exists");n[r[s]]=t}else r[s]=n.push(t)-1;return s},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,n=this.data;if(t in e)return n.splice(e[t],1),this.setData(n),!0},query:function(t,n){return e(this.queryEngine(t,n)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,n=t.length;e<n;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}});return n}),define("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(t){var e,n=0;function r(t){return function(r,i,s,o){var a,l=r[i];l&&l.target==r||(r[i]=a=function(){for(var t=n,r=arguments,i=a.before;i;)r=i.advice.apply(this,r)||r,i=i.next;if(a.around)var s=a.around.advice(this,r);for(var o=a.after;o&&o.id<t;){if(o.receiveArguments){var l=o.advice.apply(this,r);s=l===e?s:l}else s=o.advice.call(this,s,r);o=o.next}return s},l&&(a.around={advice:function(t,e){return l.apply(t,e)}}),a.target=r);var u=function(t,e,r,i){var s,o=t[e],a="around"==e;if(a){var l=r(function(){return o.advice(this,arguments)});s={remove:function(){l&&(l=t=r=null)},advice:function(t,e){return l?l.apply(t,e):o.advice(t,e)}}}else s={remove:function(){if(s.advice){var n=s.previous,i=s.next;i||n?(n?n.next=i:t[e]=i,i&&(i.previous=n)):delete t[e],t=r=s.advice=null}},id:n++,advice:r,receiveArguments:i};if(o&&!a)if("after"==e){for(;o.next&&(o=o.next););o.next=s,s.previous=o}else"before"==e&&(t[e]=s,s.next=o,o.previous=s);else t[e]=s;return s}(a||l,t,s,o);return s=null,u}}return t.attach("langx.aspect",{after:r("after"),around:r("around"),before:r("before")})}),define("skylark-langx-aspect/main",["./aspect"],function(t){return t}),define("skylark-langx-aspect",["skylark-langx-aspect/main"],function(t){return t}),define("skylark-langx/aspect",["skylark-langx-aspect"],function(t){return t}),define("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(t,e,n){return t.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define("skylark-langx-funcs/defer",["skylark-langx-types","./funcs"],function(t,e){return e.defer=function(e,n,r,i){var s={cancel:null},o=e;t.isNumber(n)||t.isFunction(n)||(i=r,r=n,n=0);r&&(o=function(){e.apply(i,r)});if(t.isFunction(n)){var a=!1;n(function(){a||o()}),s.cancel=function(){a=!0}}else{var l;0==n&&requestAnimationFrame?(l=requestAnimationFrame(o),s.cancel=function(){return cancelAnimationFrame(l)}):(l=setTimeout(o,n),s.cancel=function(){return clearTimeout(l)})}return s}}),define("skylark-langx-funcs/debounce",["./funcs","./defer"],function(t,e){return t.debounce=function(t,n,r){var i,s,o=function(){var o=this,l=arguments;return a(),i=setTimeout(function(){i=null,r?s=e(t,l,o):t.apply(o,l)},n),{cancel:a}},a=o.cancel=function(){i&&clearTimeout(i),s&&s.cancel(),i=void 0,s=void 0};return o}}),define("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(t,e){var n=t.mixin,r=function(){function t(){}return function(e,r){t.prototype=e;var i=new t;return t.prototype=null,r&&n(i,r),i}}();return e.delegate=r}),define("skylark-langx-funcs/loop",["./funcs"],function(t){function e(t){this.callback=t,this.running=!1,this.id=-1}return e.prototype.start=function(){if(!this.running){this.running=!0;var t=this;!function e(){t.callback();t.running&&(t.id=requestAnimationFrame(e))}()}},e.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new e(t)}}),define("skylark-langx-funcs/negate",["./funcs"],function(t){return t.negate=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(...e){return!t.apply(this,e)}}}),define("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(t,e){var n=Array.prototype.slice,r=t.isFunction,i=t.isString;return e.bind=e.proxy=function t(e,s){var o=2 in arguments&&n.call(arguments,2);if(r(e)){return function(){return e.apply(s,o?o.concat(n.call(arguments)):arguments)}}if(i(s))return o?(o.unshift(e[s],e),t.apply(null,o)):t(e[s],e);throw new TypeError("expected function")}}),define("skylark-langx-funcs/template",["skylark-langx-objects","./funcs","./proxy"],function(t,e,n){Array.prototype.slice;var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},i=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},o=/\\|'|\r|\n|\t|\u2028|\u2029/g;function a(e,a,l){var u;l=t.defaults({},l,r);var c=RegExp([(l.escape||i).source,(l.interpolate||i).source,(l.evaluate||i).source].join("|")+"|$","g"),h=0,d="__p+='";e.replace(c,function(t,n,r,i,a){return d+=e.slice(h,a).replace(o,function(t){return"\\"+s[t]}),n&&(d+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(d+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(d+="';\n"+i+"\n__p+='"),h=a+t.length,t}),d+="';\n",l.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{u=new Function(l.variable||"obj","_",d)}catch(t){throw t.source=d,t}if(a)return u(a,this);var f=n(function(t){return u.call(this,t,this)},this),p=l.variable||"obj";return f.source="function("+p+"){\n"+d+"}",f}return a.templateSettings=e.templateSettings=r,e.template=a}),define("skylark-langx-funcs/throttle",["./funcs"],function(t){return t.throttle=function(t,e){let n=window.performance.now();return function(...r){const i=window.performance.now();i-n>=e&&(t(...r),n=i)}}}),define("skylark-langx-funcs/main",["./funcs","./debounce","./defer","./delegate","./loop","./negate","./proxy","./template","./throttle"],function(t){return t}),define("skylark-langx-funcs",["skylark-langx-funcs/main"],function(t){return t}),define("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(t,e,n){"use strict";var r=Array.prototype.slice,i=e.proxy,s=t.makeArray,o=n.result,a=n.mixin;a(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var l=function(){var t=this;this.promise=u(new Promise(function(e,n){t._resolve=e,t._reject=n}))};function u(t){if(t.isResolved)return t;var e=!0,n=!1,r=!1,i=t.then(function(t){return r=!0,e=!1,t},function(t){throw n=!0,e=!1,t});i.isResolved=function(){return r},i.isPending=function(){return e},i.isRejected=function(){return n},i.state=function(){return r?"resolved":n?"rejected":"pending"};var s=[],o=[];return i.then=function(t,e,n){return n&&this.progress(n),u(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}))},i.progress=function(t){return s.forEach(function(e){t(e)}),o.push(t),this},i.pipe=i.then,i.notify=function(t){try{return s.push(t),o.forEach(function(e){return e(t)})}catch(t){this.reject(t)}return this},i}return l.prototype.resolve=function(t){var e=r.call(arguments);return this.resolveWith(null,e)},l.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},l.prototype.notify=function(t){var e=o(this,"promise");return e.notify(t),this},l.prototype.reject=function(t){var e=r.call(arguments);return this.rejectWith(null,e)},l.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},l.prototype.isResolved=function(){var t=o(this,"promise");return t.isResolved()},l.prototype.isRejected=function(){var t=o(this,"promise");return t.isRejected()},l.prototype.state=function(){var t=o(this,"promise");return t.state()},l.prototype.then=function(t,e,n){var r=o(this,"promise");return r.then(t,e,n)},l.prototype.progress=function(t){var e=o(this,"promise");return e.progress(t)},l.prototype.catch=function(t){var e=o(this,"promise");return e.catch(t)},l.prototype.always=function(){var t=o(this,"promise");return t.always.apply(t,arguments),this},l.prototype.done=function(){var t=o(this,"promise");return t.done.apply(t,arguments),this},l.prototype.fail=function(t){var e=o(this,"promise");return e.fail(t),this},l.all=function(t){var e=new l;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),o(e,"promise")},l.first=function(t){return u(Promise.race(t))},l.when=function(t,e,n,r){var s=t&&"function"==typeof t.then,o=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new l).resolve(t);if(!o){var a=new l(t.cancel);t.then(i(a.resolve,a),i(a.reject,a),a.notify),t=a.promise}return e||n||r?t.then(e,n,r):t},l.reject=function(t){var e=new l;return e.reject(t),e.promise},l.immediate=l.resolve=function(t){var e=new l;return e.resolve.apply(e,arguments),e.promise},l.promise=function(t){var e=new l;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},l}),define("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(t,e,n){var r=e.each,i={Deferred:n,parallel:function(t,e,i){var s=[];return i=i||null,e=e||[],r(t,function(t,n){s.push(n.apply(i,e))}),n.all(s)},series:function(t,e,i){var s=[],o=new n,a=o.promise;return i=i||null,e=e||[],o.resolve(),r(t,function(t,n){a=a.then(function(){return n.apply(i,e)}),s.push(a)}),n.all(s)},waterful:function(t,e,i){var s=new n,o=s.promise;return i=i||null,e=e||[],s.resolveWith(i,e),r(t,function(t,e){o=o.then(e)}),o}};return t.attach("langx.async",i)}),define("skylark-langx-async/main",["./async"],function(t){return t}),define("skylark-langx-async",["skylark-langx-async/main"],function(t){return t}),define("skylark-langx/async",["skylark-langx-async"],function(t){return t}),define("skylark-langx-binary/binary",["skylark-langx-ns"],function(t){"use strict";return t.attach("langx.binary",{fromBase64:function(t){for(var e,n,r,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=t.length/4*3,a=new ArrayBuffer(o),l=new Uint8Array(a),u=0,c=0;u<o;u+=3)e=s.indexOf(t.charAt(c++)),n=s.indexOf(t.charAt(c++)),r=s.indexOf(t.charAt(c++)),i=s.indexOf(t.charAt(c++)),l[u]=e<<2|n>>4,64!==r&&(l[u+1]=(15&n)<<4|r>>2),64!==i&&(l[u+2]=(3&r)<<6|i);return a},fromBinaryString:function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n},fromBuffer:function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r<t.length;r++)n[r]=t[r];return e}})}),define("skylark-langx-binary/main",["./binary"],function(t){return t}),define("skylark-langx-binary",["skylark-langx-binary/main"],function(t){return t}),define("skylark-langx/binary",["skylark-langx-binary"],function(t){return t}),define("skylark-langx-constructs/main",["./constructs","./inherit","./klass"],function(t){return t}),define("skylark-langx-constructs",["skylark-langx-constructs/main"],function(t){return t}),define("skylark-langx/constructs",["skylark-langx-constructs"],function(t){return t}),define("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(t){return t.attach("langx.datetimes",{parseMilliSeconds:function(t){var e=t.split(" "),n=parseInt(e[0]);if(isNaN(n))return 0;switch(e[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),define("skylark-langx-datetimes/main",["./datetimes"],function(t){return t}),define("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(t){return t}),define("skylark-langx/datetimes",["skylark-langx-datetimes"],function(t){return t}),define("skylark-langx/Deferred",["skylark-langx-async"],function(t){return t.Deferred}),define("skylark-langx-events/events",["skylark-langx-ns"],function(t){return t.attach("langx.events",{})}),define("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(t){var e={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(e.isNode=!0,e.isBrowser=!1),e.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var n=null;if(Object.defineProperty(e,"document",function(){if(!n){var t="undefined"==typeof window?require("html-element"):window;n=t.document}return n}),void 0===e.global.CustomEvent&&(e.global.CustomEvent=function(t,e){this.type=t,this.props=e}),e.isBrowser){var r=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent),i=e.browser={};r.browser&&(i[r.browser]=!0,i.version=r.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0)}return e.detects={},t.attach("langx.hoster",e)}),define("skylark-langx-hoster/detects/mobile",["../hoster"],function(t){var e=/iPhone/i,n=/iPod/i,r=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,a=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,u=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,h=/BlackBerry/i,d=/BB10/i,f=/Opera Mini/i,p=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,g=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};return t.detects.mobile=function(t){var y={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?y.userAgent=t:t&&t.userAgent&&(y={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):y={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var v=y.userAgent,x=v.split("[FBAN");void 0!==x[1]&&(v=x[0]);void 0!==(x=v.split("Twitter"))[1]&&(v=x[0]);var k=function(t){return function(e){return e.test(t)}}(v),b={apple:{phone:k(e)&&!k(u),ipod:k(n),tablet:!k(e)&&(k(r)||g(y))&&!k(u),universal:k(i),device:(k(e)||k(n)||k(r)||k(i)||g(y))&&!k(u)},amazon:{phone:k(a),tablet:!k(a)&&k(l),device:k(a)||k(l)},android:{phone:!k(u)&&k(a)||!k(u)&&k(s),tablet:!k(u)&&!k(a)&&!k(s)&&(k(l)||k(o)),device:!k(u)&&(k(a)||k(l)||k(s)||k(o))||k(/\bokhttp\b/i)},windows:{phone:k(u),tablet:k(c),device:k(u)||k(c)},other:{blackberry:k(h),blackberry10:k(d),opera:k(f),firefox:k(m),chrome:k(p),device:k(h)||k(d)||k(f)||k(m)||k(p)},any:!1,phone:!1,tablet:!1};return b.any=b.apple.device||b.android.device||b.windows.device||b.other.device,b.phone=b.apple.phone||b.android.phone||b.windows.phone,b.tablet=b.apple.tablet||b.android.tablet||b.windows.tablet,b}}),define("skylark-langx-hoster/isMobile",["./hoster","./detects/mobile"],function(t,e){return void 0==t.isMobile&&(t.isMobile=e()),t.isMobile}),define("skylark-langx-hoster/main",["./hoster","./isMobile"],function(t){return t}),define("skylark-langx-hoster",["skylark-langx-hoster/main"],function(t){return t}),define("skylark-langx-events/Event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(t,e,n,r){var i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function s(n,r){return!r&&n.isDefaultPrevented||(r||(r=n),t.each(i,function(t,i){var s=r[t];n[t]=function(){return this[i]=e.returnTrue,s&&s.apply(r,arguments)},n[i]=e.returnFalse})),n}class o extends CustomEvent{constructor(e,n){super(e,n),t.safeMixin(this,n),s(this)}}return o.compatible=s,r.Event=o}),define("skylark-langx-events/Listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event"],function(t,e,n,r,i,s){Array.prototype.slice;var o=n.compact,a=(t.isDefined,t.isUndefined),l=(t.isPlainObject,t.isFunction,t.isBoolean),u=t.isString,c=t.isEmptyObject,h=(e.mixin,e.safeMixin,r({listenTo:function(e,n,r,i,s){if(!e)return this;if(l(i)?(s=i,i=r,r=null):l(r)?(s=r,i=r=null):a(i)&&(s=!1,i=r,r=null),t.isPlainObject(n)){var o=n;for(var c in o)this.listenTo(e,c,o[c],s);return this}i||(i="handleEvent"),u(i)&&(i=this[i]),s?r?e.one(n,r,i,this):e.one(n,i,this):r?e.on(n,r,i,this):e.on(n,i,this);for(var h,d=this._listeningTo||(this._listeningTo=[]),f=0;f<d.length;f++)if(d[f].obj==e){h=d[f];break}h||d.push(h={obj:e,events:{}});var p=h.events,m=p[n]=p[n]||[];return-1==m.indexOf(i)&&m.push(i),this},listenToOnce:function(t,e,n,r){return this.listenTo(t,e,n,r,1)},unlistenTo:function(t,e,n){var r=this._listeningTo;if(!r)return this;u(n)&&(n=this[n]);for(var i=0;i<r.length;i++){var s=r[i];if(!t||t==s.obj){var a=s.events;for(var l in a)if(!e||e==l){var h=a[l];if(h){for(var d=0;d<h.length;d++)n&&n!=h[i]||(s.obj.off(l,h[i],this),h[i]=null);h=a[l]=o(h),c(h)&&(a[l]=null)}}c(a)&&(r[i]=null)}}return r=this._listeningTo=o(r),c(r)&&(this._listeningTo=null),this}}));return i.Listener=h}),define("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(t,e,n,r,i,s,o){var a=Array.prototype.slice,l=n.compact,u=t.isDefined,c=t.isPlainObject,h=t.isFunction,d=t.isString,f=(t.isEmptyObject,e.mixin);e.safeMixin;function p(t){var e=(""+t).split(".");return{name:e[0],ns:e.slice(1).join(" ")}}var m=new Map,g=o.inherit({_prepareArgs:function(t,e){return e=u(e)?[t].concat(e):[t]},on:function(t,e,n,r,i,s){var o=this,a=this._hub||(this._hub={});if(c(t))return i=r,each(t,function(t,r){o.on(t,e,n,r,i,s)}),this;if(d(e)||h(r)||(i=r,r=n,n=e,e=void 0),h(n)&&(i=r,r=n,n=null),!r)throw new Error("No callback function");if(!h(r))throw new Error("The callback  is not afunction");return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var o=p(t),l=o.name,u=o.ns;(a[l]||(a[l]=[])).push({fn:r,selector:e,data:n,ctx:i,ns:u,one:s})}),this},one:function(t,e,n,r,i){return this.on(t,e,n,r,i,1)},emit:function(t){if(!this._hub)return this;var e=this;d(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var n=a.call(arguments,1);return n=this._prepareArgs(t,n),[t.type||t.name,"all"].forEach(function(r){var i=p(r),s=i.name,o=i.ns,a=e._hub[s];if(a){for(var u=a.length,h=!1,d=0;d<u;d++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var m=a[d];(!o||m.ns&&m.ns.startsWith(o))&&(m.data&&(t.data=f({},m.data,t.data)),2==n.length&&c(n[1])&&(t.data=t.data||{},f(t.data,n[1])),m.fn.apply(m.ctx,n),m.one&&(a[d]=null,h=!0))}h&&(e._hub[r]=l(a))}}),this},queueEmit:function(t){const e=t.type||t;let n=m.get(this);n||(n=new Map,m.set(this,n));const r=n.get(e);n.delete(e),window.clearTimeout(r);const i=window.setTimeout(()=>{0===n.size&&(n=null,m.delete(this)),this.trigger(t)},0);n.set(e,i)},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},off:function(t,e){if(t){var n=this._hub||(this._hub={});return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var r=p(t),i=r.name,s=r.ns,o=n[i];if(o){var a=[];if(e||s)for(var l=0,u=o.length;l<u;l++)e&&o[l].fn!==e&&o[l].fn._!==e?a.push(o[l]):!s||o[l].ns&&0==o[l].ns.indexOf(s)||a.push(o[l]);a.length?n[i]=a:delete n[i]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return i.Emitter=g}),define("skylark-langx-events/createEvent",["./events","./Event"],function(t,e){return t.createEvent=function(t,n){return new e(t,n)}}),define("skylark-langx-events/main",["./events","./Event","./Listener","./Emitter","./createEvent"],function(t){return t}),define("skylark-langx-events",["skylark-langx-events/main"],function(t){return t}),define("skylark-langx/Emitter",["skylark-langx-events"],function(t){return t.Emitter}),define("skylark-langx/Evented",["./Emitter"],function(t){return t}),define("skylark-langx/events",["skylark-langx-events"],function(t){return t}),define("skylark-langx/funcs",["skylark-langx-funcs"],function(t){return t}),define("skylark-langx-globals/globals",["skylark-langx-ns"],function(t){var e=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();return t.attach("langx.globals",e)}),define("skylark-langx-globals/console",["./globals"],function(t){return t.console=console}),define("skylark-langx-globals/document",["./globals"],function(t){var e;"undefined"!=typeof global?global:"undefined"!=typeof window&&window;return e="undefined"!=typeof document?document:require("min-document"),t.document=e}),define("skylark-langx-globals/window",["./globals"],function(t){var e="undefined"!=typeof window?window:{};return t.window=e}),define("skylark-langx-globals/main",["./globals","./console","./document","./window"],function(t){return t}),define("skylark-langx-globals",["skylark-langx-globals/main"],function(t){return t}),define("skylark-langx/globals",["skylark-langx-globals"],function(t){return t}),define("skylark-langx/hoster",["skylark-langx-hoster"],function(t){return t}),define("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(t,e){for(var n=[],r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*i.DEG2RAD},radToDeg:function(t){return t*i.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),c=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);"XYX"===i?t.set(a*c,l*h,l*d,a*u):"YZY"===i?t.set(l*d,a*c,l*h,a*u):"ZXZ"===i?t.set(l*h,l*d,a*c,a*u):"XZX"===i?t.set(a*c,l*p,l*f,a*u):"YXY"===i?t.set(l*f,a*c,l*p,a*u):"ZYZ"===i?t.set(l*p,l*f,a*c,a*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return t.attach("langx.maths",i)}),define("skylark-langx-maths/main",["./maths"],function(t){return t}),define("skylark-langx-maths",["skylark-langx-maths/main"],function(t){return t}),define("skylark-langx/maths",["skylark-langx-maths"],function(t){return t}),define("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(t,e){return t.attach("langx.numerics",{toFinite:e.toFinite,toNumber:e.toNumber,toInteger:e.toInteger})}),define("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(t,e,n){for(var r=[],i=0;i<256;i++)r[i]=(i<16?"0":"")+i.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),c=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);"XYX"===i?t.set(a*c,l*h,l*d,a*u):"YZY"===i?t.set(l*d,a*c,l*h,a*u):"ZXZ"===i?t.set(l*h,l*d,a*c,a*u):"XZX"===i?t.set(a*c,l*p,l*f,a*u):"YXY"===i?t.set(l*f,a*c,l*p,a*u):"ZYZ"===i?t.set(l*p,l*f,a*c,a*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return n.maths=s}),define("skylark-langx-numerics/Quaternion",["skylark-langx-klass","./numerics","./maths"],function(t,e,n){var r=t({klassName:"Quaternion",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,s=t.order,o=Math.cos,a=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),h=a(n/2),d=a(r/2),f=a(i/2);return"XYZ"===s?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"YXZ"===s?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"ZXY"===s?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"ZYX"===s?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"YZX"===s?(this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f):"XZY"===s&&(this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=r+a+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-l)*e,this._y=(s-u)*e,this._z=(o-i)*e):r>a&&r>h?(e=2*Math.sqrt(1+r-a-h),this._w=(c-l)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(s+u)/e):a>h?(e=2*Math.sqrt(1+a-r-h),this._w=(s-u)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-r-a),this._w=(o-i)/e,this._x=(s+u)/e,this._y=(l+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,s=t._w,o=e._x,a=e._y,l=e._z,u=e._w;return this._x=n*u+s*o+r*l-i*a,this._y=r*u+s*a+i*o-n*l,this._z=i*u+s*l+n*a-r*o,this._w=s*u-n*o-r*a-i*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,s=this._w,o=s*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*r+e*this._y,this._z=l*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(a),c=Math.atan2(u,o),h=Math.sin((1-e)*c)/u,d=Math.sin(e*c)/u;return this._w=s*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}});return Object.assign(r,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,s,o){var a=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[s+0],d=i[s+1],f=i[s+2],p=i[s+3];if(c!==p||a!==h||l!==d||u!==f){var m=1-o,g=a*h+l*d+u*f+c*p,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var x=Math.sqrt(v),k=Math.atan2(x,g*y);m=Math.sin(m*k)/x,o=Math.sin(o*k)/x}var b=o*y;if(a=a*m+h*b,l=l*m+d*b,u=u*m+f*b,c=c*m+p*b,m===1-o){var w=1/Math.sqrt(a*a+l*l+u*u+c*c);a*=w,l*=w,u*=w,c*=w}}t[e]=a,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Object.assign(r.prototype,{}),e.Quaternion=r}),define("skylark-langx-numerics/Vector3",["skylark-langx-klass","./numerics","./maths","./Quaternion"],function(t,e,n,r){var i=new r,s=t({klassName:"Vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(i.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,s=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*r-o*n,u=a*n+o*e-i*r,c=a*r+i*n-s*e,h=-i*e-s*n-o*r;return this.x=l*a+h*-i+u*-o-c*-s,this.y=u*a+h*-s+c*-i-l*-o,this.z=c*a+h*-o+l*-s-u*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return o.copy(this).projectOnVector(t),this.sub(o)},reflect:function(t){return this.sub(o.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(MathUtils.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},_construct:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}}),o=new s;return e.Vector3=s}),define("skylark-langx-numerics/Matrix4",["skylark-langx-klass","./numerics","./Vector3"],function(t,e,n){var r=new n,i=new n(0,0,0),s=new n(1,1,1),o=new n,a=new n,l=new n,u=t({set:function(t,e,n,r,i,s,o,a,l,u,c,h,d,f,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/r.setFromMatrixColumn(t,0).length(),s=1/r.setFromMatrixColumn(t,1).length(),o=1/r.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=s*u,d=s*c,f=o*u,p=o*c;e[0]=a*u,e[4]=-a*c,e[8]=l,e[1]=d+f*l,e[5]=h-p*l,e[9]=-o*a,e[2]=p-h*l,e[6]=f+d*l,e[10]=s*a}else if("YXZ"===t.order){var m=a*u,g=a*c,y=l*u,v=l*c;e[0]=m+v*o,e[4]=y*o-g,e[8]=s*l,e[1]=s*c,e[5]=s*u,e[9]=-o,e[2]=g*o-y,e[6]=v+m*o,e[10]=s*a}else if("ZXY"===t.order){var m=a*u,g=a*c,y=l*u,v=l*c;e[0]=m-v*o,e[4]=-s*c,e[8]=y+g*o,e[1]=g+y*o,e[5]=s*u,e[9]=v-m*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){var h=s*u,d=s*c,f=o*u,p=o*c;e[0]=a*u,e[4]=f*l-d,e[8]=h*l+p,e[1]=a*c,e[5]=p*l+h,e[9]=d*l-f,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var x=s*a,k=s*l,b=o*a,w=o*l;e[0]=a*u,e[4]=w-x*c,e[8]=b*c+k,e[1]=c,e[5]=s*u,e[9]=-o*u,e[2]=-l*u,e[6]=k*c+b,e[10]=x-w*c}else if("XZY"===t.order){var x=s*a,k=s*l,b=o*a,w=o*l;e[0]=a*u,e[4]=-c,e[8]=l*u,e[1]=x*c+w,e[5]=s*u,e[9]=k*c-b,e[2]=b*c-k,e[6]=o*u,e[10]=w*c+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(i,t,s)},lookAt:function(t,e,n){var r=this.elements;return l.subVectors(t,e),0===l.lengthSq()&&(l.z=1),l.normalize(),o.crossVectors(n,l),0===o.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),o.crossVectors(n,l)),o.normalize(),a.crossVectors(l,o),r[0]=o.x,r[4]=a.x,r[8]=l.x,r[1]=o.y,r[5]=a.y,r[9]=l.y,r[2]=o.z,r[6]=a.z,r[10]=l.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],x=n[11],k=n[15],b=r[0],w=r[4],_=r[8],C=r[12],T=r[1],M=r[5],z=r[9],S=r[13],E=r[2],A=r[6],$=r[10],j=r[14],P=r[3],O=r[7],q=r[11],F=r[15];return i[0]=s*b+o*T+a*E+l*P,i[4]=s*w+o*M+a*A+l*O,i[8]=s*_+o*z+a*$+l*q,i[12]=s*C+o*S+a*j+l*F,i[1]=u*b+c*T+h*E+d*P,i[5]=u*w+c*M+h*A+d*O,i[9]=u*_+c*z+h*$+d*q,i[13]=u*C+c*S+h*j+d*F,i[2]=f*b+p*T+m*E+g*P,i[6]=f*w+p*M+m*A+g*O,i[10]=f*_+p*z+m*$+g*q,i[14]=f*C+p*S+m*j+g*F,i[3]=y*b+v*T+x*E+k*P,i[7]=y*w+v*M+x*A+k*O,i[11]=y*_+v*z+x*$+k*q,i[15]=y*C+v*S+x*j+k*F,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],s=t[1],o=t[5],a=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+i*a*c-r*l*c-i*o*h+n*l*h+r*o*d-n*a*d)+p*(+e*a*d-e*l*h+i*s*h-r*s*d+r*l*u-i*a*u)+m*(+e*l*c-e*o*d-i*s*c+n*s*d+i*o*u-n*l*u)+g*(-r*o*u-e*a*c+e*o*h+r*s*c-n*s*h+n*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=t.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],y=r[13],v=r[14],x=r[15],k=f*v*h-y*p*h+y*c*m-u*v*m-f*c*x+u*p*x,b=g*p*h-d*v*h-g*c*m+l*v*m+d*c*x-l*p*x,w=d*y*h-g*f*h+g*u*m-l*y*m-d*u*x+l*f*x,_=g*f*c-d*y*c-g*u*p+l*y*p+d*u*v-l*f*v,C=i*k+s*b+o*w+a*_;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var T=1/C;return n[0]=k*T,n[1]=(y*p*a-f*v*a-y*o*m+s*v*m+f*o*x-s*p*x)*T,n[2]=(u*v*a-y*c*a+y*o*h-s*v*h-u*o*x+s*c*x)*T,n[3]=(f*c*a-u*p*a-f*o*h+s*p*h+u*o*m-s*c*m)*T,n[4]=b*T,n[5]=(d*v*a-g*p*a+g*o*m-i*v*m-d*o*x+i*p*x)*T,n[6]=(g*c*a-l*v*a-g*o*h+i*v*h+l*o*x-i*c*x)*T,n[7]=(l*p*a-d*c*a+d*o*h-i*p*h-l*o*m+i*c*m)*T,n[8]=w*T,n[9]=(g*f*a-d*y*a-g*s*m+i*y*m+d*s*x-i*f*x)*T,n[10]=(l*y*a-g*u*a+g*s*h-i*y*h-l*s*x+i*u*x)*T,n[11]=(d*u*a-l*f*a-d*s*h+i*f*h+l*s*m-i*u*m)*T,n[12]=_*T,n[13]=(d*y*o-g*f*o+g*s*p-i*y*p-d*s*v+i*f*v)*T,n[14]=(g*u*o-l*y*o-g*s*c+i*y*c+l*s*v-i*u*v)*T,n[15]=(l*f*o-d*u*o+d*s*c-i*f*c-l*s*p+i*u*p)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,s=t.x,o=t.y,a=t.z,l=i*s,u=i*o;return this.set(l*s+n,l*o-r*a,l*a+r*o,0,l*o+r*a,u*o+n,u*a-r*s,0,l*a-r*o,u*a+r*s,i*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,s=e._y,o=e._z,a=e._w,l=i+i,u=s+s,c=o+o,h=i*l,d=i*u,f=i*c,p=s*u,m=s*c,g=o*c,y=a*l,v=a*u,x=a*c,k=n.x,b=n.y,w=n.z;return r[0]=(1-(p+g))*k,r[1]=(d+x)*k,r[2]=(f-v)*k,r[3]=0,r[4]=(d-x)*b,r[5]=(1-(h+g))*b,r[6]=(m+y)*b,r[7]=0,r[8]=(f+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var i=this.elements,s=r.set(i[0],i[1],i[2]).length(),o=r.set(i[4],i[5],i[6]).length(),a=r.set(i[8],i[9],i[10]).length(),l=this.determinant();l<0&&(s=-s),t.x=i[12],t.y=i[13],t.z=i[14],c.copy(this);var u=1/s,h=1/o,d=1/a;return c.elements[0]*=u,c.elements[1]*=u,c.elements[2]*=u,c.elements[4]*=h,c.elements[5]*=h,c.elements[6]*=h,c.elements[8]*=d,c.elements[9]*=d,c.elements[10]*=d,e.setFromRotationMatrix(c),n.x=s,n.y=o,n.z=a,this},makePerspective:function(t,e,n,r,i,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),c=(n+r)/(n-r),h=-(s+i)/(s-i),d=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,i,s){var o=this.elements,a=1/(e-t),l=1/(n-r),u=1/(s-i),c=(e+t)*a,h=(n+r)*l,d=(s+i)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),c=new u;return e.Matrix4=u}),define("skylark-langx-numerics/Euler",["skylark-langx-klass","./numerics","./maths","./Quaternion","./Vector3","./Matrix4"],function(t,e,n,r,i,s){var o=new s,a=new r,l=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var i=n.clamp,s=t.elements,o=s[0],a=s[4],l=s[8],u=s[1],c=s[5],h=s[9],d=s[2],f=s[6],p=s[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,p))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return o.makeRotationFromQuaternion(t),this.setFromRotationMatrix(o,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return a.setFromEuler(this),this.setFromQuaternion(a,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||l.DefaultOrder}});return l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",e.Euler=l}),define("skylark-langx-numerics/Matrix3",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Matrix3",isMatrix3:!0,set:function(t,e,n,r,i,s,o,a,l){var u=this.elements;return u[0]=t,u[1]=r,u[2]=o,u[3]=e,u[4]=i,u[5]=a,u[6]=n,u[7]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],x=r[7],k=r[2],b=r[5],w=r[8];return i[0]=s*p+o*y+a*k,i[3]=s*m+o*v+a*b,i[6]=s*g+o*x+a*w,i[1]=l*p+u*y+c*k,i[4]=l*m+u*v+c*b,i[7]=l*g+u*x+c*w,i[2]=h*p+d*y+f*k,i[5]=h*m+d*v+f*b,i[8]=h*g+d*x+f*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*s*u-e*o*l-n*i*u+n*o*a+r*i*l-r*s*a},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,r=this.elements,i=n[0],s=n[1],o=n[2],a=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],f=d*l-u*h,p=u*c-d*a,m=h*a-l*c,g=i*f+s*p+o*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);var y=1/g;return r[0]=f*y,r[1]=(o*h-d*s)*y,r[2]=(u*s-o*l)*y,r[3]=p*y,r[4]=(d*i-o*c)*y,r[5]=(o*a-u*i)*y,r[6]=m*y,r[7]=(s*c-h*i)*y,r[8]=(l*i-s*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,s,o){var a=Math.cos(i),l=Math.sin(i);this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-r*l,r*a,-r*(-l*s+a*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],l=r[4],u=r[7];return r[0]=e*i+n*a,r[3]=e*s+n*l,r[6]=e*o+n*u,r[1]=-n*i+e*a,r[4]=-n*s+e*l,r[7]=-n*o+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return e.Matrix3=n}),define("skylark-langx-numerics/Transform",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Transform",value:{get:function(){return this._.value}}});return e.Transform=n}),define("skylark-langx-numerics/MatrixTransform",["./numerics","./Transform"],function(t,e){var n=e.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){var e=this._={};e.matrix=t}});return t.MatrixTransform=n}),define("skylark-langx-numerics/Plane",["skylark-langx-klass","./numerics","./Matrix3","./Vector3"],function(t,e,n,r){var i=new r,s=new r,o=new n,a=t({klassName:"Plane",set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=i.subVectors(n,e).cross(s.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("mathsPlane: .projectPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("mathsPlane: .intersectLine() target is now required"),e=new r);var n=t.delta(i),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?void 0:e.copy(n).multiplyScalar(o).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||o.getNormalMatrix(t),r=this.coplanarPoint(i).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}});return e.Plane=a}),define("skylark-langx-numerics/RotateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var r=t.RotateTransform=e.inherit({klassName:"RotateTransform",value:{get:function(){return n.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e,n){var r=this._={};r.angle=t||0,r.centerX=e||0,r.centerY=n||0}});return r}),define("skylark-langx-numerics/ScaleTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var r=e.inherit({klassName:"ScaleTransform",value:{get:function(){return n.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e,n,r){var i=this._={};i.scaleX=t||1,i.scaleY=e||1,i.centerX=n||0,i.centerY=r||0}});return t.ScaleTransform=r}),define("skylark-langx-numerics/SkewTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n){var r=e.inherit({klassName:"SkewTransform",value:{get:function(){return n.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e){var n=this._={};n.skewX=t||0,n.skewY=e||0}});return t.SkewTransform=r}),define("skylark-langx-numerics/Vector2",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector2",set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,s=this.y-t.y;return this.x=i*n-s*r+t.x,this.y=i*r+s*n+t.y,this},_construct:function(t,e){this.x=t||0,this.y=e||0}});return e.Vector2=n}),define("skylark-langx-numerics/TransformMatrix",["skylark-langx-klass","./numerics","./Vector2"],function(t,e,n){var r=Math.PI/180,i={},s=function(t){return i[t]||(i[t]=Math.PI*t/180)},o=t({klassName:"TransformMatrix",_multiplyPoint:function(t){var e=this._,r=t.x*e.m11+t.y*e.m21+e.dx,i=t.x*e.m12+t.y*e.m22+e.dy;return new n(r,i)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){if(this.isIdentity())return t.clone();var e=this.multiplyPoint(t.leftTop),n=this.multiplyPoint(t.leftBottom),r=this.multiplyPoint(t.right),i=this.multiplyPoint(t.rightBottom),s=Math.min(e.x,n.x,r.x,i.x),o=Math.min(e.y,n.y,r.y,i.y),a=Math.max(e.x,n.x,r.x,i.x),l=Math.max(e.y,n.y,r.y,i.y);return new Rect(s,o,a-s,l-o)},prepend:function(t,e,n,r,i,s){var o=this.dx;if(1!=t||0!=e||0!=n||1!=r){var a=this.m11,l=this.m21;this.m11=a*t+this.m12*n,this.m12=a*e+this.m12*r,this.m21=l*t+this.m22*n,this.m22=l*e+this.m22*r}return this.dx=o*t+this.dy*n+i,this.dy=o*e+this.dy*r+s,this},append:function(t,e,n,r,i,s){var o=this.m11,a=this.m12,l=this.m21,u=this.m22;return this.m11=t*o+e*l,this.m12=t*a+e*u,this.m21=n*o+r*l,this.m22=n*a+r*u,this.dx=i*o+s*l+this.dx,this.dy=i*a+s*u+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,e,n,i,s,o,a,l,u){if(s%360)var c=s*r,h=Math.cos(c),d=Math.sin(c);else h=1,d=0;return(l||u)&&(this.dx-=l,this.dy-=u),o||a?(o*=r,a*=r,this.prepend(h*n,d*n,-d*i,h*i,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e)):this.prepend(h*n,d*n,-d*i,h*i,t,e),this},appendTransform:function(t,e,n,i,s,o,a,l,u){if(s%360)var c=s*r,h=Math.cos(c),d=Math.sin(c);else h=1,d=0;return o||a?(o*=r,a*=r,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e),this.append(h*n,d*n,-d*i,h*i,0,0)):this.append(h*n,d*n,-d*i,h*i,t,e),(l||u)&&(this.dx-=l*this.m11+u*this.m21,this.dy-=l*this.m12+u*this.m22),this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m11,i=this.m21,s=this.dx;return this.m11=r*e-this.m12*n,this.m12=r*n+this.m12*e,this.m21=i*e-this.m22*n,this.m22=i*n+this.m22*e,this.dx=s*e-this.dy*n,this.dy=s*n+this.dy*e,this},skew:function(t,e){return t*=r,e*=r,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,e){return this.m11*=t,this.m22*=e,this.dx*=t,this.dy*=e,this},translate:function(t,e){return this.dx+=t,this.dy+=e,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,e=this.m12,n=this.m21,r=this.m22,i=this.dx,s=t*r-e*n;return this.m11=r/s,this.m12=-e/s,this.m21=-n/s,this.m22=t/s,this.dx=(n*this.dy-r*i)/s,this.dy=-(t*this.dy-e*i)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){null==t&&(t={}),t.x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var e=Math.atan2(-this.m21,this.m22),n=Math.atan2(this.m12,this.m11);return e==n?(t.rotation=n/r,this.m11<0&&this.m22>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/r,t.skewY=n/r),t},reinitialize:function(t,e,n,r,i,s,o,a,l){return this._initialize(t,e,n,r,i,s),this.alpha=o||1,this.shadow=a,this.compositeOperation=l,this},appendProperties:function(t,e,n){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=n||this.compositeOperation,this},prependProperties:function(t,e,n){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||n,this},multiply:function(t){var e=this.m11,n=this.m12,r=this.m21,i=this.m22,s=this.dx,o=this.dy,a=t;return this.m11=e*a.m11+r*a.m12,this.m12=n*a.m11+i*a.m12,this.m21=e*a.m21+r*a.m22,this.m22=n*a.m21+i*a.m22,this.dx=e*a.dx+r*a.dy+s,this.dy=n*a.dx+i*a.dy+o,this},clone:function(){var t=this._,e=new o(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return e.shadow=this.shadow,e.alpha=this.alpha,e.compositeOperation=this.compositeOperation,e},toString:function(){var t=this._;return"[TransformMatrix (m11="+t.m11+" m12="+t.m12+" m21="+t.m21+" m22="+t.m22+" dx="+t.dx+" dy="+t.dy+")]"},_construct:function(t,e,n,r,i,s){var o=this._={};o.m11=t||1,o.m12=e||0,o.m21=n||0,o.m22=r||1,o.dx=i||0,o.dy=s||0}});return Object.assign(o,{translate:function(t,e){return new o(1,0,0,1,t,e)},scale:function(t,e){return new o(t,0,0,e||t,0,0)},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return new o(e,n,-n,e,0,0)},rotateg:function(t){return this.rotate(s(t))},skewX:function(t){var e=Math.tan(t);return new o(1,0,e,1)},skewXg:function(t){return this.skewX(s(t))},skewY:function(t){var e=Math.tan(t);return new o(1,e,0,1)},skewYg:function(t){return this.skewY(s(t))},reflect:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,r=e*e,i=n+r,s=2*n/i-1,a=2*t*e/i,l=a,u=2*r/i-1;return new o(s,l,a,u)},project:function(t,e){var n=t*t,r=e*e,i=n+r,s=n/i,a=t*e/i;return yx=a,yy=r/i,new o(s,yx,a,yy)},_sandwich:function(t,e,n){return this.translate(e,n).multiply(t).multiply(this.translate(-e,-n))},scaleAt:function(t,e,n,r){switch(arguments.length){case 4:return this._sandwich(this.scale(t,e),n,r);case 3:return"number"==typeof n?this._sandwich(this.scale(t),e,n):this._sandwich(this.scale(t,e),n.x,n.y)}return this._sandwich(this.scale(t),e.x,e.y)},rotateAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotate(t),e,n):this._sandwich(this.rotate(t),e.x,e.y)},rotategAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotateg(t),e,n):this._sandwich(this.rotateg(t),e.x,e.y)},skewXAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewX(t),e,n):this._sandwich(this.skewX(t),e.x,e.y)},skewXgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewXg(t),e,n):this._sandwich(this.skewXg(t),e.x,e.y)},skewYAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewY(t),e,n):this._sandwich(this.skewY(t),e.x,e.y)},skewYgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewYg(t),e,n):this._sandwich(this.skewYg(t),e.x,e.y)}}),e.TransformMatrix=o}),define("skylark-langx-numerics/TranslateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,e,n,r,i){var s=e.inherit({klassName:"TranslateTransform",value:{get:function(){return n.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e){var n=this._;n.x=t||0,n.y=e||0}});return t.TranslateTransform=s}),define("skylark-langx-numerics/Vector4",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector4",set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*e+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*e+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*e+s[7]*n+s[11]*r+s[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,s=t.elements,o=s[0],a=s[4],l=s[8],u=s[1],c=s[5],h=s[9],d=s[2],f=s[6],p=s[10];if(Math.abs(a-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(a+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(c+1)/2,y=(p+1)/2,v=(a+u)/4,x=(l+d)/4,k=(h+f)/4;return m>g&&m>y?m<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=v/n,i=x/n):g>y?g<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(g),n=v/r,i=k/r):y<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=x/i,r=k/i),this.set(n,r,i,e),this}var b=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(u-a)*(u-a));return Math.abs(b)<.001&&(b=1),this.x=(f-h)/b,this.y=(l-d)/b,this.z=(u-a)/b,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},_construct:function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}});return e.Vector4=n}),define("skylark-langx-numerics/main",["./numerics","./Euler","./maths","./Matrix3","./Matrix4","./MatrixTransform","./Plane","./Quaternion","./RotateTransform","./ScaleTransform","./SkewTransform","./Transform","./TransformMatrix","./TranslateTransform","./Vector2","./Vector3","./Vector4"],function(t){return t}),define("skylark-langx-numerics",["skylark-langx-numerics/main"],function(t){return t}),define("skylark-langx/numerics",["skylark-langx-numerics"],function(t){return t}),define("skylark-langx/objects",["skylark-langx-objects"],function(t){return t}),define("skylark-langx-strings/strings",["skylark-langx-ns"],function(t){var e=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function n(t){return e[t]}var r=/[&<>"'`=]/g;var i=0;function s(t,e){var n,r,i,s,o,a,l,u=arguments.callee;return u.cache[t]||(u.cache[t]=(n=t,r=/^[\w\-]+$/.test(t)?u.get(t):(n="template(string)",t),i=1,s=("try { "+(u.variable?"var "+u.variable+" = this.stash;":"with (this.stash) { ")+"this.ret += '"+r.replace(/<%/g,"").replace(/%>/g,"").replace(/'(?![^\x11\x13]+?\x13)/g,"\\x27").replace(/^\s*|\s*$/g,"").replace(/\n|\r\n/g,function(){return"';\nthis.line = "+ ++i+"; this.ret += '\\n"}).replace(/\x11=raw(.+?)\x13/g,"' + ($1) + '").replace(/\x11=(.+?)\x13/g,"' + this.escapeHTML($1) + '").replace(/\x11(.+?)\x13/g,"'; $1; this.ret += '")+"'; "+(u.variable?"":"}")+"return this.ret;} catch (e) { throw 'TemplateError: ' + e + ' (on "+n+"' + ' line ' + this.line + ')'; } //@ sourceURL="+n+"\n").replace(/this\.ret \+= '';/g,""),o=new Function(s),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},l=function(t){return(""+t).replace(/[&<>\'\"]/g,function(t){return a[t]})},function(t){return o.call(u.context={escapeHTML:l,line:1,ret:"",stash:t})})),e?u.cache[t](e):u.cache[t]}return s.cache={},s.get=function(t){return document.getElementById(t).innerHTML},t.attach("langx.strings",{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}},escapeHTML:function(t){if(null==t)return"";if(!t)return String(t);return t.toString().replace(r,n)},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},ltrim:function(t){return t.replace(/^\s+/,"")},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},rtrim:function(t){return t.replace(/\s+$/,"")},serializeValue:function(t){return JSON.stringify(t)},substitute:function(t,e,n,r){function i(t,e){if(t.match(/\./)){var n,r=function(t,e){var i=t.pop();return i?e[i]?r(t,n=e[i]):null:n};return r(t.split(".").reverse(),e)}return e[t]}return r=r||window,n=n?proxy(r,n):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,s,o){var a=i(s,e);return o&&(a=i(o,r).call(r,a,s)),n(a,s).toString()})},slugify:function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="a/_,:;",n=0,r=e.length;n<r;n++)t=t.replace(new RegExp(e.charAt(n),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(n));return t=t.replace(/\s+/g,"-").replace(/-+/g,"-")},trim:function(t){return null==t?"":String.prototype.trim.call(t)},uniqueId:function(t){var e=++i+"";return t?t+e:e},upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}),define("skylark-langx-strings/base64",["./strings"],function(t){return t.base64={decode:function(t,e){e=null!=e&&e;var n,r,i,s,o,a,l,u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;c<t.length;)s=this._keyStr.indexOf(t.charAt(c++)),o=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),l=this._keyStr.indexOf(t.charAt(c++)),n=s<<2|o>>4,r=(15&o)<<4|a>>2,i=(3&a)<<6|l,u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(i));e||(u=function(t){var e="",n=0,r=c1=c2=0;for(;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}(u));return u},encode:function(t,e){var n,r,i,s,o,a,l,u="",c=0;(e=null!=e&&e)||(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t));for(;c<t.length;)n=t.charCodeAt(c++),r=t.charCodeAt(c++),i=t.charCodeAt(c++),s=n>>2,o=(3&n)<<4|r>>4,a=(15&r)<<2|i>>6,l=63&i,isNaN(r)?a=l=64:isNaN(i)&&(l=64),u=u+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(l);return u}}}),define("skylark-langx-strings/main",["./strings","./base64"],function(t){return t}),define("skylark-langx-strings",["skylark-langx-strings/main"],function(t){return t}),define("skylark-langx/strings",["skylark-langx-strings"],function(t){return t}),define("skylark-langx/Stateful",["./Evented","./strings","./objects"],function(t,e,n){var r=n.isEqual,i=n.mixin,s=n.result,o=n.isEmptyObject,a=n.clone,l=e.uniqueId,u=t.inherit({_construct:function(t,e){var n=t||{};e||(e={}),this.cid=l(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var r=s(this,"defaults");n=i({},r,n),this.set(n,e),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return a(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,n){if(null==t)return this;var i;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;var s=n.unset,o=n.silent,l=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=a(this.attributes),this.changed={});var c=this.attributes,h=this.changed,d=this._previousAttributes;for(var f in i)e=i[f],r(c[f],e)||l.push(f),r(d[f],e)?delete h[f]:h[f]=e,s?delete c[f]:c[f]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!o){l.length&&(this._pending=n);for(var p=0;p<l.length;p++)this.trigger("change:"+l[p],this,c[l[p]],n)}if(u)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&a(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var i in t){var s=t[i];r(e[i],s)||(n[i]=s)}return!o(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i(e,{validationError:n})),!1)}});return u}),define("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(t,e){var n=new e.Emitter;return t.attach("langx.topic",{publish:function(t,e,r){var i=[].slice.call(arguments,1);return n.trigger({type:t,data:i})},subscribe:function(t,e,r){var i=function(t){e.apply(r,t.data)};return n.on(t,i),{remove:function(){n.off(t,i)}}}})}),define("skylark-langx-topic/main",["./topic"],function(t){return t}),define("skylark-langx-topic",["skylark-langx-topic/main"],function(t){return t}),define("skylark-langx/topic",["skylark-langx-topic"],function(t){return t}),define("skylark-langx/types",["skylark-langx-types"],function(t){return t}),define("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./binary","./constructs","./datetimes","./Deferred","./Emitter","./Evented","./events","./funcs","./globals","./hoster","./klass","./maths","./numerics","./objects","./Stateful","./strings","./topic","./types"],function(t,e,n,r,i,s,o,a,l,u,c,h,d,f,p,m,g,y,v,x,k,b,w){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var _=v.mixin,C=(v.safeMixin,w.isFunction);var T=1;function M(){return M}return _(M,{createEvent:u.createEvent,funcArg:function(t,e,n,r){return C(e)?e.call(t,n,r):e},getQueryParams:function(t){var e=(t=t||window.location.href).split("?"),n={};e.length>1&&e[1].split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]});return n},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=T++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),_(M,e,r,a,d,y,v,k,w,{ArrayStore:n,async:i,Deferred:l,Emitter:u,Evented:c,hoster:p,klass:m,Stateful:x,topic:b}),t.langx=M}),define("skylark-domx-browser/browser",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){"use strict";var n=e.hoster.browser;return e.mixin(n,{isIE:!!/msie/i.exec(window.navigator.userAgent),location:function(){return window.location},support:{}}),t.attach("domx.browser",n)}),define("skylark-domx-browser/support/css3",["skylark-langx/langx","../browser"],function(t,e){"use strict";var n,r,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=null,o="",a="",l={},u={},c=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,h=window.document,d=h.createElement("div"),f=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.matchesSelector,p=d.style;for(var m in p){var g=m.match(r||c);if(g){r||(n=g[1],r=new RegExp("^("+n+")(.*)$"),n,o="-"+n.toLowerCase()+"-",a=n.toLowerCase()),l[t.lowerFirst(g[2])]=m;var y=t.dasherize(g[2]);u[y]=o+y,i[m]&&(s=i[m])}}s||void 0!==p.transition&&(s=i.transition);var v={normalizeStyleProperty:function(t){return l[t]||t},normalizeCssProperty:function(t){return u[t]||t},normalizeCssEvent:function(t){return a?a+t:t.toLowerCase()},matchesSelector:f};return t.mixin(e,v),e.css3PropPrefix=v.propPrefix=o,s&&(e.support.transition=v.transition={end:s}),e.support.cssPointerEvents=v.pointerEvents=(d.style.cssText="pointer-events:auto","auto"===d.style.pointerEvents),d=null,e.support.css3=v}),define("skylark-domx-browser/support/fullscreen",["../browser"],function(t){const e={prefixed:!0},n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],r=n[0];let i;for(let t=0;t<n.length;t++)if(n[t][1]in document){i=n[t];break}if(i){for(let t=0;t<i.length;t++)e[r[t]]=i[t];e.prefixed=i[0]!==r[0],t.requestFullscreen=function(){return document.body[e.requestFullscreen].apply(this,arguments)},t.exitFullscreen=function(){return document[e.exitFullscreen].apply(this,arguments)},t.support.fullscreen=e}else t.support.fullscreen=null;return t.support.fullscreen}),define("skylark-domx-browser/support/touch",["../browser"],function(t){return t.support.tocuh=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}),define("skylark-domx-browser/main",["./browser","./support/css3","./support/fullscreen","./support/touch"],function(t){return t}),define("skylark-domx-browser",["skylark-domx-browser/main"],function(t){return t}),define("skylark-langx-scripter/scripter",["skylark-langx/skylark","skylark-langx/langx"],function(t,e,n){var r=document.getElementsByTagName("head")[0],i={},s={},o=0;function a(){return a}var l={type:!0,src:!0,nonce:!0,noModule:!0};return e.mixin(a,{loadJavaScript:function(t,e,n){var a=i[t];if(a||(a=i[t]={state:0,loadedCallbacks:[],errorCallbacks:[]}),a.loadedCallbacks.push(e),a.errorCallbacks.push(n),1===a.state)a.node.onload();else if(-1===a.state)a.node.onerror();else{var l=a.node=document.createElement("script"),u=a.id=o++;l.type="text/javascript",l.async=!1,l.defer=!1,startTime=(new Date).getTime(),r.appendChild(l),l.onload=function(){a.state=1;for(var t=a.loadedCallbacks,e=t.length;e--;)t[e]();a.loadedCallbacks=[],a.errorCallbacks=[]},l.onerror=function(){a.state=-1;for(var t=a.errorCallbacks,e=t.length;e--;)t[e]();a.loadedCallbacks=[],a.errorCallbacks=[]},l.src=t,s[u]=l}return a.id},deleteJavaScript:function(t){var e=s[t];if(e){var n=e.src;e.parentNode&&e.parentNode.remove(e),delete s[t],delete i[n]}},evaluate:function(t,e,n){var r,i,s=(n=n||document).createElement("script");if(s.text=t,e)for(r in l)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&s.setAttribute(r,i);return n.head.appendChild(s).parentNode.removeChild(s),this}}),t.attach("langx.scripter",a)}),define("skylark-langx-scripter/main",["./scripter"],function(t){return t}),define("skylark-langx-scripter",["skylark-langx-scripter/main"],function(t){return t}),define("skylark-domx-noder/noder",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-scripter","skylark-domx-browser"],function(t,e,n,r){var i=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),s=/^\s*<(\w+|!)[^>]*>/,o=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,a=document.createElement("div"),l=document.createElement("table"),u=document.createElement("tbody"),c=document.createElement("tr"),h={tr:u,tbody:l,thead:l,tfoot:l,td:c,th:c,"*":a},d=/^(?:body|html)$/i,f=Array.prototype.map,p=Array.prototype.slice;function m(t,n){var r=function(t){"function"==typeof t&&(t=t());return f.call(e.isArrayLike(t)?t:[t],t=>("function"==typeof t&&(t=t()),T(t)||C(t)?t:"string"==typeof t&&/\S/.test(t)?document.createTextNode(t):void 0)).filter(t=>t)}(t);return n&&(r=f.call(r,function(t){return t.cloneNode(!0)})),e.flatten(r)}function g(t,e){var n=t.nodeName&&t.nodeName.toLowerCase();return void 0!==e?n===e.toLowerCase():n}function y(t,n){if(e.isFunction(t))return t.apply(n,[]);if(e.isArrayLike(t)){for(var r,i=0;i<t.length;i++)e.isFunction(t[i])&&(t[i]=t[i].apply(n,[]),e.isArrayLike(t[i])&&(r=!0));r&&(t=e.flatten(t))}return t}function v(t,e,n){e=y(e,t);for(var r=t,i=m(e,n),s=0;s<i.length;s++)r.appendChild(i[s]);return this}function x(t,n,r,i){var s;if(s=/svg/i.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t),e.isHtmlNode(n)?(i=n,n=null,r=null):e.isHtmlNode(r)&&(i=r,r=null),n)for(var o in n)s[o]=n[o];if(r)for(var o in r)s.setAttribute(o,r[o]);return i&&v(i,s),s}function k(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this}function b(t){return!1===t?r.exitFullscreen.apply(document):t?t[r.support.fullscreen.requestFullscreen]():document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}var w=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;function _(t,e,n){if(n)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function C(t){return t&&3===t.nodeType}function T(t){return t&&1===t.nodeType}function M(t){return t?9==t.nodeType?t:t.ownerDocument:document}function z(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||z(t.parentNode)))}function S(){return S}return e.mixin(S,{active:function(t){var e;t=t||document;try{e=t.activeElement}catch(n){e=t.body}e||(e=t.body);e.nodeName||(e=t.body);return e},after:function(t,e,n){e=y(e,t);var r=(s=t).parentNode;if(r)for(var i=m(e,n),s=s.nextSibling,o=0;o<i.length;o++)s?r.insertBefore(i[o],s):r.appendChild(i[o]);return this},append:v,before:function(t,e,n){e=y(e,t);var r=t,i=r.parentNode;if(i)for(var s=m(e,n),o=0;o<s.length;o++)i.insertBefore(s[o],r);return this},blur:function(t){t.blur()},body:function(){return document.body},clone:function(t,e){var n,r=this;if(!i||1!==t.nodeType||e)return t.cloneNode(e);if(!e)return n=document.createElement(t.nodeName),each(r.getAttribs(t),function(e){r.setAttrib(n,e.nodeName,r.getAttrib(t,e.nodeName))}),n},contains:function(t,e){return _(e,t)},contents:function(t){if(g(t,"iframe"))return t.contentDocument;return t.childNodes},createElement:x,createFragment:function(t){if(t=e.trim(t),o.test(t))return[x(RegExp.$1)];var n=s.test(t)&&RegExp.$1;n in h||(n="*");var r=h[n];return r.innerHTML=function(t){for(var e=t.split("/>"),n="",r=0;r<e.length-1;r++){var i=e[r].split("<");n+=e[r]+"></"+i[i.length-1].split(" ")[0]+">"}return n+e[e.length-1]}(""+t),dom=p.call(r.childNodes),dom.forEach(function(t){r.removeChild(t)}),dom},createTextNode:function(t){return document.createTextNode(t)},doc:function(){return document},empty:k,generateId:function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;for(;n--;)r+=e.charCodeAt(n);return r.toString(36)},fullscreen:b,focusable:function(t,e){var n,r,i,s,o,a=t.nodeName.toLowerCase();if("area"===a)return n=t.parentNode,r=n.name,!(!t.href||!r||"map"!==n.nodeName.toLowerCase())&&((i=$("img[usemap='#"+r+"']")).length>0&&i.is(":visible"));/^(input|select|textarea|button|object)$/.test(a)?(s=!t.disabled)&&(o=$(t).closest("fieldset")[0])&&(s=!o.disabled):s="a"===a&&t.href||e;return s&&$(t).is(":visible")&&visible($(t))},fromPoint:function(t,e){return document.elementFromPoint(t,e)},html:function(t,r){var i=function(t,n){if(void 0===n)return t.innerHTML;if(k(t),n=n||"",e.isString(n)&&(n=n.replace(w,"<$1></$2>")),e.isString(n)||e.isNumber(n))t.innerHTML=n;else if(e.isArrayLike(n))for(var r=0;r<n.length;r++)t.appendChild(n[r]);else t.appendChild(n);return this}(t,r);if(void 0!==r){for(var s=t.querySelectorAll("script"),o=0;o<s.length;o++){var a=s[o];rscriptType.test(a.type||"")&&n.evaluate(a.textContent,a)}return this}return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)},isChildOf:_,isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isEditable:z,isElement:T,isFullscreen:function(t){return b()===t},isInDocument:function(t){return t===document.body||document.body.contains(t)},isInFrame:function(){try{return window.parent!==window.self}catch(t){return!0}},isInput:function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||z(t)},isTextNode:C,isWindow:e.isWindow,nodeName:g,offsetParent:function(t){var e=t.offsetParent||document.body;for(;e&&!d.test(e.nodeName)&&"static"==document.defaultView.getComputedStyle(e).position;)e=e.offsetParent;return e},ownerDoc:M,ownerWindow:function(t){var e=M(t);return e.defaultView||e.parentWindow},prepend:function(t,e,n){for(var r=t,i=r.firstChild,s=m(e,n),o=0;o<s.length;o++)i?r.insertBefore(s[o],i):r.appendChild(s[o]);return this},reflow:function(t){t||(t=document);return t.offsetHeight,this},remove:function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){console.warn("The node is already removed",t)}return this},removeChild:function(t,n){e.isArrayLike(n)||(n=[n]);for(var r=0;r<n.length;r++)t.removeChild(n[r]);return this},replace:function(t,e){return e.parentNode.replaceChild(t,e),this},selectable:function(t,e){if(void 0===t||void 0===t.style)return;t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off"},traverse:function t(e,n){n(e);for(var r=0,i=e.childNodes.length;r<i;r++)t(e.childNodes[r],n);return this},reverse:function(t){for(var e=t.firstChild,n=t.children.length-1;n>0;n--)if(n>0){var r=t.children[n];t.insertBefore(r,e)}},wrapper:function(t,n){e.isString(n)&&(n=this.createFragment(n).firstChild);t.parentNode.insertBefore(n,t),n.appendChild(t)},wrapperInner:function(t,e){var n=p.call(t.childNodes);t.appendChild(e);for(var r=0;r<n.length;r++)e.appendChild(n[r]);return this},unwrap:function(t){var e=t.parentNode;if(e){if(this.isDoc(e.parentNode))return;e.parentNode.insertBefore(t,e)}}}),t.attach("domx.noder",S)}),define("skylark-domx-styler/styler",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){Array.prototype.every;var n=Array.prototype.forEach,r=e.camelCase,i=e.dasherize;function s(t,e){return"number"!=typeof e||o[i(t)]?e:e+"px"}var o={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},a={};function l(t){return t in a?a[t]:a[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){var n=t.className||"",r=n&&void 0!==n.baseVal;if(void 0===e)return r?n.baseVal:n;r?n.baseVal=e:t.className=e}var c={};function h(t,n){if(!n)return this;var r=u(t);return(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);r.match(e)||(r+=(r?" ":"")+t)}),u(t,r),this}function d(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)}function f(t,e){var n=l(e);return t.className&&t.className.match(n)}function p(t,n){if(n){var r=u(t);(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);r.match(e)&&(r=r.replace(e," "))}),u(t,r.trim())}else u(t,"");return this}var m=function(){return m};return e.mixin(m,{autocssfix:!1,cssHooks:{},addClass:h,className:u,css:function(t,o,a){if(void 0==a){var l=d(t);if(void 0==o)return l;if(e.isString(o))return t.style[r(o)]||l.getPropertyValue(i(o));if(e.isArrayLike(o)){var u={};return n.call(o,function(e){u[e]=t.style[r(e)]||l.getPropertyValue(i(e))}),u}}var c="";if("string"==typeof o)a||0===a?c=i(o)+":"+s(o,a):t.style.removeProperty(i(o));else for(key in o)void 0!==o[key]&&(o[key]||0===o[key]?c+=i(key)+":"+s(key,o[key])+";":t.style.removeProperty(i(key)));return t.style.cssText+=";"+c,this},disabled:function(t,e){if(arguments.length<2)return!!this.dom.disabled;return t.disabled=e,this},hasClass:f,hide:function(t){return m.css(t,"display","none"),this},isInvisible:function(t){return"none"==m.css(t,"display")||0==m.css(t,"opacity")||"hidden"==m.css(t,"visibility")},removeClass:p,show:function(t){m.css(t,"display",""),"none"==m.css(t,"display")&&m.css(t,"display",function(t){var e,n;c[t]||(e=document.createElement(t),document.body.appendChild(e),n=d(e).getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),c[t]=n);return c[t]}(t.nodeName));return this},toggleClass:function(t,e,n){return e.split(/\s+/g).forEach(function(e){void 0===n&&(n=!f(t,e)),n?h(t,e):p(t,e)}),this}}),t.attach("domx.styler",m)}),define("skylark-domx-styler/main",["./styler"],function(t,e,n){return t}),define("skylark-domx-styler",["skylark-domx-styler/main"],function(t){return t}),define("skylark-domx-noder/overlay",["skylark-domx-styler","./noder"],function(t,e){return e.overlay=function(n,r){var i=e.createElement("div",r);return t.css(i,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),n.appendChild(i),i}}),define("skylark-domx-noder/throb",["skylark-langx/langx","skylark-domx-styler","./noder"],function(t,e,n){return n.throb=function(t,r){(r=r||{}).text,r.style;var i,s=r.time,o=r.callback,a=n.createElement("div",{className:r.className||"throbber"}),l=function(){i&&(clearTimeout(i),i=null),a&&(n.remove(a),a=null)};r.style&&e.css(a,r.style);var u=r.content||'<span class="throb"></span>';n.html(a,u),t.appendChild(a),s&&(i=setTimeout(function(){l(),o&&o()},s));return{throbber:a,remove:l,update:function(t){t&&t.text&&a&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-noder/main",["./noder","./overlay","./throb"],function(t){return t}),define("skylark-domx-noder",["skylark-domx-noder/main"],function(t){return t}),define("skylark-domx-finder/finder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,r,s){var o={},a=Array.prototype.filter,l=Array.prototype.slice,u=n.matchesSelector;(function(){var t,e,n,r,i,s={},o={},a=/\\/g,l=function(n,i){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var a=(r=!!i)?o:s;if(a[n])return a[n];for(t={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},e=-1;n!=(n=n.replace(d,f)););return t.length=t.expressions.length,a[t.raw]=r?c(t):t},u=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},c=function(t){for(var e=t.expressions,n=0;n<e.length;n++){for(var r=e[n],i={parts:[],tag:"*",combinator:u(r[0].combinator)},s=0;s<r.length;s++){var o=r[s];o.reverseCombinator||(o.reverseCombinator=" "),o.combinator=o.reverseCombinator,delete o.reverseCombinator}r.reverse().push(i)}return t},h=(i=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(t){return t.replace(i,"\\")}),d=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+h(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function f(i,s,o,l,c,d,f,p,m,g,y,v,x,k,b,w){if((s||-1===e)&&(t.expressions[++e]=[],n=-1,s))return"";if(o||l||-1===n){o=o||" ";var _=t.expressions[e];r&&_[n]&&(_[n].reverseCombinator=u(o)),_[++n]={combinator:o,tag:"*"}}var C=t.expressions[e][n];if(c)C.tag=c.replace(a,"");else if(d)C.id=d.replace(a,"");else if(f)f=f.replace(a,""),C.classList||(C.classList=[]),C.classes||(C.classes=[]),C.classList.push(f),C.classes.push({value:f,regexp:new RegExp("(^|\\s)"+h(f)+"(\\s|$)")});else if(x)w=(w=w||b)?w.replace(a,""):null,C.pseudos||(C.pseudos=[]),C.pseudos.push({key:x.replace(a,""),value:w,type:1==v.length?"class":"element"});else if(p){var T,M;switch(p=p.replace(a,""),y=(y||"").replace(a,""),m){case"^=":M=new RegExp("^"+h(y));break;case"$=":M=new RegExp(h(y)+"$");break;case"~=":M=new RegExp("(^|\\s)"+h(y)+"(\\s|$)");break;case"|=":M=new RegExp("^"+h(y)+"(-|$)");break;case"=":T=function(t){return y==t};break;case"*=":T=function(t){return t&&t.indexOf(y)>-1};break;case"!=":T=function(t){return y!=t};break;default:T=function(t){return!!t}}""==y&&/^[*$^]=$/.test(m)&&(T=function(){return!1}),T||(T=function(t){return t&&M.test(t)}),C.attributes||(C.attributes=[]),C.attributes.push({key:p,operator:m,value:y,test:T})}return""}var p=this.Slick||{};p.parse=function(t){return l(t)},p.escapeRegExp=h,this.Slick||(this.Slick=p)}).apply(o);var c=/^(?:input|select|textarea|button)$/i,h=/^h\d$/i,l=Array.prototype.slice;o.parseSelector=o.Slick.parse;var d=o.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},checked:function(t){return!!t.checked},contains:function(t,e,n,r){if($(this).text().indexOf(r)>-1)return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,n,r){return e==r},even:function(t,e,n,r){return e%2==0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return r.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,n,r){return e>r},has:function(t,e,n,r){return k(t,r)},header:function(t){return h.test(t.nodeName)},hidden:function(t){return!o.pseudos.visible(t)},input:function(t){return c.test(t.nodeName)},last:function(t,e,n){return e===n.length-1},lt:function(t,e,n,r){return e<r},not:function(t,e,n,r){return!_(t,r)},odd:function(t,e,n,r){return e%2==1},parent:function(t){return!!t.parentElement},selected:function(t){return!!t.selected},tabbable:function(t){var e=t.tabindex,n=null!=e;return(!n||e>=0)&&r.focusable(element,n)},text:function(t){return"text"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth},empty:function(t){return!t.hasChildNodes()}};function f(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function p(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}for(i in["first","eq","last"].forEach(function(t){d[t].isArrayFilter=!0}),d.nth=d.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d[i]=f(i);for(i in{submit:!0,reset:!0})d[i]=p(i);function m(t,n,r){for(var i=[],s=r&&e.isString(r);(t=t.parentElement)&&9!==t.nodeType;){if(r)if(s){if(_(t,r))break}else if(e.isArrayLike(r)){if(e.inArray(t,r)>-1)break}else if(t==r)break;n&&!_(t,n)||i.push(t)}return i}function g(t,e){for(var n=t.childNodes,r=[],i=0;i<n.length;i++){var t=n[i];1==t.nodeType&&r.push(t)}return e&&(r=o.filter(r,e)),r}function y(t,e,n,r){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentElement===n&&_(t,e):_(t,e))||r&&t===n)return t;if(t===n)break}while(t=M(t))}return null}function v(t,e){try{return l.call(t.querySelectorAll(e))}catch(t){}return o.query(t,e)}function x(t,e){try{return t.querySelector(e)}catch(t){}var n=o.query(t,e);return n.length>0?n[0]:null}function k(t,e){return e||(e=t,t=document.body),_(t,e)?t:x(t,e)}function b(t,e,n){for(var r=t.childNodes,i=r[0];i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.nextSibling}return null}function w(t,e,n){for(var r=t.childNodes,i=r[r.length-1];i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.previousSibling}return null}function _(t,n){if(!n||!t||1!==t.nodeType)return!1;if(e.isString(n)){try{return u.call(t,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(t){}return o.match(t,n)}return e.isArrayLike(n)?e.inArray(t,n)>-1:e.isPlainObject(n)?o.check(t,n):t===n}function C(t,e,n){for(var r=t.nextSibling;r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.nextSibling}return null}function T(t,e){for(var n=t.nextSibling,r=[];n;)1==n.nodeType&&(e&&!_(n,e)||r.push(n)),n=n.nextSibling;return r}function M(t,e){var n=t.host&&t!==document&&t.host.nodeType?t.host:t.parentElement;return!n||e&&!_(n,e)?null:n}function z(t,e,n){for(var r=t.previousSibling;r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.previousSibling}return null}function S(t,e){for(var n=t.previousSibling,r=[];n;)1==n.nodeType&&(e&&!_(n,e)||r.push(n)),n=n.previousSibling;return r}function E(t,e){for(var n=t.parentElement.firstChild,r=[];n;)1==n.nodeType&&n!==t&&(e&&!_(n,e)||r.push(n)),n=n.nextSibling;return r}o.divide=function(t){var e,n,r,i,s,o="",a=[];if((n=t.id)&&(o+="#"+n),r=t.classes)for(var l=r.length;l--;)o+="."+r[l].value;if(i=t.attributes)for(var l=0;l<i.length;l++)i[l].operator?o+="["+i[l].key+i[l].operator+JSON.stringify(i[l].value)+"]":o+="["+i[l].key+"]";if(s=t.pseudos)for(l=s.length;l--;)part=s[l],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(o+=":"+part.key+"("+JSON.stringify(part));return(e=t.tag)&&"*"!==e&&(o=e.toUpperCase()+o),o||(o="*"),{nativeSelector:o,customPseudos:a}},o.check=function(t,e,n,r,i){var s,o,a,l,c,h,d,f,p;if(!i){if(s=e.tag){var m=t.nodeName.toUpperCase();if("*"==s){if(m<"@")return!1}else if(m!=(s||"").toUpperCase())return!1}if((o=e.id)&&t.getAttribute("id")!=o)return!1;if(a=e.classes)for(h=a.length;h--;)if(!(f=t.getAttribute("class"))||!a[h].regexp.test(f))return!1;if(l=e.attributes)for(h=l.length;h--;)if((d=l[h]).operator?!d.test(t.getAttribute(d.key)):!t.hasAttribute(d.key))return!1}if(c=e.pseudos)for(h=c.length;h--;)if(d=c[h],p=this.pseudos[d.key]){if((i&&p.isArrayFilter||!i&&!p.isArrayFilter)&&!p(t,n,r,d.value))return!1}else if(!i&&!u.call(t,d.key))return!1;return!0},o.match=function(t,n){var r;if(!(r=e.isString(n)?o.Slick.parse(n):n))return!0;var i,s,a=r.expressions,l=0;for(i=0;s=a[i];i++)if(1==s.length){var u=s[0];if(this.check(t,u))return!0;l++}if(l==r.length)return!1;var c,h=this.query(document,r);for(i=0;c=h[i++];)if(c===t)return!0;return!1},o.filterSingle=function(t,e){var n=a.call(t,function(n,r){return o.check(n,e,r,t,!1)});return n=a.call(n,function(t,r){return o.check(t,e,r,n,!0)})},o.filter=function(t,n){if(!e.isString(n))return o.filterSingle(t,n);var r,i,s=o.Slick.parse(n).expressions,a=[];for(r=0;i=s[r];r++){if(1!=i.length)throw new Error("not supported selector:"+n);var l=i[0],u=o.filterSingle(t,l);a=e.uniq(a.concat(u))}return a},o.combine=function(t,e){var n,r=e.combinator,i=e,s=[];switch(r){case">":s=g(t,i);break;case"+":(n=C(t,i,!0))&&s.push(n);break;case"^":(n=b(t,i,!0))&&s.push(n);break;case"~":s=T(t,i);break;case"++":var u=z(t,i,!0),c=C(t,i,!0);u&&s.push(u),c&&s.push(c);break;case"~~":s=E(t,i);break;case"!":s=m(t,i);break;case"!>":(n=M(t,i))&&s.push(n);break;case"!+":s=z(t,i,!0);break;case"!^":(n=w(t,i,!0))&&s.push(n);break;case"!~":s=S(t,i);break;default:var h=this.divide(e);if(s=l.call(t.querySelectorAll(h.nativeSelector)),h.customPseudos)for(var d=h.customPseudos.length-1;d>=0;d--)s=a.call(s,function(t,e){return o.check(t,{pseudos:[h.customPseudos[d]]},e,s,!1)}),s=a.call(s,function(t,e){return o.check(t,{pseudos:[h.customPseudos[d]]},e,s,!0)})}return s},o.query=function(t,n,r){for(var i,s,a=this.Slick.parse(n),l=[],u=a.expressions,c=0;i=u[c];c++){for(var h,d=[t],f=0;s=i[f];f++)(h=e.map(d,function(t,e){return o.combine(t,s)}))&&(d=h);h&&(l=l.concat(h))}return l};var A=function(){return A};return e.mixin(A,{ancestor:function(t,n,r){var i=r&&e.isString(r);for(;t=t.parentElement;){if(_(t,n))return t;if(r)if(i){if(_(t,r))break}else if(t==r)break}return null},ancestors:m,byId:function(t,e){return(e=e||r.doc()).getElementById(t)},childAt:function(t,n,r){var i=0,o=t.children;r=e.mixin({ignoreHidden:!0,excluding:null,closesting:null},r);for(var a=0;a<o.length;a++){var l=o[a];if((!r.ignoreHidden||"none"!==s.css(l))&&((!r.excluding||!r.excluding.includes(l))&&(!r.closesting||y(l,r.closesting,t,!1)))){if(i===n)return l;i++}}return null},children:g,closest:y,descendant:x,descendants:v,find:k,findAll:function(t,e){e||(e=t,t=document.body);return v(t,e)},firstChild:b,index:function(t,n){var r=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)e.isString(n)?_(t,n)&&r++:e.isFunction(n)&&n(t)&&r++,r++;return r},lastChild:w,matches:_,nextSibling:C,nextSiblings:T,parent:M,previousSibling:z,previousSiblings:S,pseudos:o.pseudos,siblings:E}),t.attach("domx.finder",A)}),define("skylark-domx-finder/main",["./finder"],function(t){return t}),define("skylark-domx-finder",["skylark-domx-finder/main"],function(t){return t}),define("skylark-domx-data/data",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-finder","skylark-domx-noder"],function(t,e,n,r){var i=Array.prototype.map,s=(Array.prototype.filter,e.camelCase),o=e.deserializeValue,a=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var u={option:{get:function(t){var e=t.getAttribute("value");return null!=e?e:(m(t).match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},select:{get:function(t){var e,n,i,s=t.options,o=t.selectedIndex,a="select-one"===t.type,l=a?null:[],u=a?o+1:s.length;for(i=o<0?u:a?o:0;i<u;i++)if((n=s[i]).selected&&!n.disabled&&(!n.parentNode.disabled||!r.nodeName(n.parentNode,"optgroup"))){if(e=g(n),a)return e;l.push(e)}return l},set:function(t,n){for(var r,i,s=t.options,o=e.makeArray(n),a=s.length;a--;)((i=s[a]).selected=e.inArray(u.option.get(i),o)>-1)&&(r=!0);return r||(t.selectedIndex=-1),o}}};function c(t,e,n){if(void 0===n){if("object"==typeof e){for(var r in e)c(t,r,e[r]);return this}return t.getAttribute?t.getAttribute(e):t[e]}return t.setAttribute?t.setAttribute(e,n):t[e]=n,this}function h(t,n){var r=t._$_store;return!r&&n&&(r=t._$_store=function(t){var n={};return e.each(t.attributes||[],function(t,e){0==e.name.indexOf("data-")&&(n[s(e.name.replace("data-",""))]=o(e.value))}),n}(t)),r}function d(t,e,n){var r=h(t,!0);r[s(e)]=n}function f(t,n,r){if(void 0===r){if("object"==typeof n){for(var i in n)d(t,i,n[i]);return this}return function(t,n){if(void 0===n)return h(t,!0);var r=h(t);if(r){if(n in r)return r[n];var i=s(n);if(i in r)return r[i]}var o="data-"+n.replace(a,"-$1").toLowerCase(),l=c(t,o);return e.isString(l)||(l=void 0),l}(t,n)}return d(t,n,r),this}function p(t){t._$_store&&delete t._$_store}function m(t,e){return void 0===e?void 0!==t.textContent?t.textContent:t.innerText:(e=null==e?"":""+e,void 0!==t.textContent?t.textContent=e:t.innerText=e,this)}function g(t,n){var r=u[t.type]||u[t.nodeName.toLowerCase()];if(void 0===n)return r&&"get"in r&&void 0!==(ret=r.get(t,"value"))?ret:(ret=t.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret);null==n?n="":"number"==typeof n?n+="":e.isArray(n)&&(n=e.map(n,function(t){return null==t?"":t+""})),r&&"set"in r&&void 0!==r.set(t,n,"value")||(t.value=n)}function y(){return y}return e.each(["radio","checkbox"],function(){u[this]={set:function(t,n){if(e.isArray(n))return t.checked=e.inArray(g(t),n)>-1}}}),n.pseudos.data=function(t,e,n,r){return!!f(t,r||n[3])},e.mixin(y,{aria:function(t,e,n){return this.attr(t,"aria-"+e,n)},attr:c,cleanData:p,data:f,pluck:function(t,e){return i.call(t,function(t){return t[e]})},prop:function t(e,n,r){if(void 0===r&&"object"==typeof n){for(var i in n)t(e,i,n[i]);return this}n=l[n]||n;return void 0===r?e[n]:(e[n]=r,this)},removeAttr:function(t,e){return e.split(" ").forEach(function(e){!function(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}(t,e)}),this},removeData:function(t,n){if(n){e.isString(n)&&(n=n.split(/\s+/));var r=h(t,!0);n.forEach(function(t){delete r[t]})}else p(t);return this},removeProp:function(t,e){return e.split(" ").forEach(function(e){delete t[e]}),this},text:m,val:g,valHooks:u}),t.attach("domx.data",y)}),define("skylark-domx-query/query",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder"],function(t,e,n,r){var i,s=Array.prototype.some,o=Array.prototype.push,a=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),l=(Array.prototype.map,Array.prototype.filter),u=Array.prototype.forEach,c=Array.prototype.indexOf,h=Array.prototype.sort,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=e.funcArg,p=e.isArrayLike,m=e.isString,g=e.uniq,y=e.isFunction,v=e.type,x=(e.isArray,e.isWindow,e.isDocument,e.isObject);e.isPlainObject,e.compact,e.flatten,e.camelCase,e.dasherize,r.children;function k(t,r,i){return function(i){var s,o=e.map(arguments,function(t){return"function"==(s=v(t))||"object"==s||"array"==s||null==t?t:n.createFragment(t)});return o.length<1?this:(this.each(function(e){t.apply(r,[this,o,e>0])}),this)}}function b(t,n){return function(){var r=a.call(arguments),i=e.map(this,function(e,i){return t.apply(n,[e].concat(r))});return S(g(i))}}function w(t,e,n){return function(r){a.call(arguments);var i=this.map(function(i,s){return s.querySelector?t.apply(e,n?[s]:[s,r]):[]});return n&&r?i.filter(r):i}}function _(t,e,n){return function(r,i){a.call(arguments);var s=this.map(function(s,o){return t.apply(e,n?[o,r]:[o,i,r])});return n&&i?s.filter(i):s}}function C(t,e){return function(){var n=a.call(arguments);return this.each(function(r,i){t.apply(e,[this].concat(n))}),this}}function T(t,n,r){return function(i){return e.isDefined(i)?(u.call(this,function(e,s){var o;o=r?f(e,i,s,r(e)):i,t.apply(n,[e,o])}),this):this[0]?t.apply(n,[this[0]]):void 0}}var M,z=e.klass({klassName:"SkNodeList",init:function(t,i){var s,a,l,u;if(t&&(this.context=i=i||n.doc(),m(t)?(this.selector=t,(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:d.exec(t))?s[1]?(a=n.createFragment(t),e.isPlainObject(i)&&(u=i)):(l=r.byId(s[2],n.ownerDoc(i)))&&(a=[l]):(e.isString(i)&&(i=r.find(i)),a=r.descendants(i,t))):a=!n.isWindow(t)&&p(t)?t:[t]),a&&(o.apply(this,a),u))for(var c in u)e.isFunction(this[c])?this[c](u[c]):this.attr(c,u[c]);return this}}),S=function(){i=function(t){return t instanceof z},init=function(t,e){return new z(t,e)};var t=function(e,n){return y(e)?(t.ready(function(){e(t)}),d):i(e)?e:n&&i(n)&&m(e)?n.find(e):init(e,n)},d=t(document);t.fn=z.prototype,e.mixin(t.fn,{length:0,map:function(n){return t(g(e.map(this,function(t,e){return n.call(t,e,t)})))},slice:function(){return t(a.apply(this,arguments))},forEach:function(){return u.apply(this,arguments)},get:function(t){return void 0===t?a.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return c.apply(this,arguments)},sort:function(){return h.apply(this,arguments)},toArray:function(){return a.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,e){n.remove(e)}),this)},each:function(t){return e.each(this,t),this},filter:function(e){return y(e)?this.not(this.not(e)):t(l.call(this,function(t){return r.matches(t,e)}))},add:function(e,n){return t(g(this.toArray().concat(t(e,n).toArray())))},is:function(t){if(this.length>0){if(e.isString(t))return s.call(this,function(e){return r.matches(e,t)});if(e.isArrayLike(t))return s.call(this,function(n){return e.inArray(n,t)>-1});if(e.isHtmlNode(t))return s.call(this,function(e){return e==t})}return!1},not:function(e){var n=[];if(y(e)&&void 0!==e.call)this.each(function(t,r){e.call(this,t,r)||n.push(this)});else{var r="string"==typeof e?this.filter(e):p(e)&&y(e.item)?a.call(e):t(e);this.forEach(function(t){r.indexOf(t)<0&&n.push(t)})}return t(n)},has:function(e){return this.filter(function(){return x(e)?n.contains(this,e):t(this).find(e).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:w(r.descendants,r),closest:w(r.closest,r),parents:w(r.ancestors,r),parentsUntil:_(r.ancestors,r),parent:w(r.parent,r),children:w(r.children,r),contents:b(n.contents,n),empty:C(n.empty,n),html:T(n.html,n),pluck:function(t){return e.map(this,function(e){return e[t]})},pushStack:function(e){var n=t(e);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n="function"==typeof e;return this.each(function(r){t(this).wrapAll(n?e.call(this,r):e)})},wrapAll:function(e){var n;return this[0]&&("function"==typeof e&&(e=e.call(this[0])),n=t(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(e){return"function"==typeof e?this.each(function(n){t(this).wrapInner(e.call(this,n))}):this.each(function(){var n=t(this),r=n.contents();r.length?r.wrapAll(e):n.append(e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){t(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(e){return this.each(function(){var n=t(this);(void 0===e?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},prevAll:w(r.previousSiblings,r),next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},nextAll:w(r.nextSiblings,r),siblings:w(r.siblings,r),index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])}}),t.fn.detach=t.fn.remove,t.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};n.traverse;return t.fn.after=k(n.after,n),t.fn.prepend=k(n.prepend,n),t.fn.before=k(n.before,n),t.fn.append=k(n.append,n),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(e){for(var r,i=[],s=t(e),a=s.length-1,l=0;l<=a;l++)r=l===a?this:this.clone(!0),t(s[l])[n](r),o.apply(i,r.get());return this.pushStack(i)}}),t}();return(M=S).fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var t=M(this);return(!n||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&i.length?i:M(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(e){var n=t.fn[e];t.fn[e]=function(){var t=n.apply(this,arguments);return t.prevObject=this,t}})}(S),function(t){var s;t.fn.query=t.fn.find,t.fn.place=function(t,s){return e.isString(t)?t=r.descendant(t):i(t)&&(t=t[0]),this.each(function(e,r){switch(s){case"before":n.before(t,r);break;case"after":n.after(t,r);break;case"replace":n.replace(t,r);break;case"only":n.empty(t),n.append(t,r);break;case"first":n.prepend(t,r);break;default:n.append(t,r)}})},t.fn.addContent=function(t,n){return t.template&&(t=e.substitute(t.template,t)),this.append(t)},t.fn.disableSelection=(s="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(s+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return n.reflow(this[0])},t.fn.isBlockNode=function(){return n.isBlockNode(this[0])}}(S),S.fn.plugin=function(t,e){var n=a.call(arguments,1),r=this,i=this;return this.each(function(){i=plugins.instantiate.apply(r,[this,t].concat(n))}),i},S.wraps={wrapper_node_operation:k,wrapper_map:b,wrapper_value:T,wrapper_selector:w,wrapper_some_chk:function(t,e){return function(){var n=a.call(arguments);return s.call(this,function(r){return t.apply(e,[r].concat(n))})}},wrapper_selector_until:_,wrapper_every_act_firstArgFunc:function(t,e,n){return function(r){var i=a.call(arguments);return u.call(this,function(s,o){var a=f(s,r,o,n(s));t.apply(e,[s,a].concat(i.slice(1)))}),this}},wrapper_every_act:C,wrapper_name_value:function(t,n,r){return function(i,s){return e.isPlainObject(i)||e.isDefined(s)?(u.call(this,function(e,o){var a;a=r?f(e,s,o,r(e,i)):s,t.apply(n,[e,i,a])}),this):this[0]?t.apply(n,[this[0],i]):void 0}}},t.attach("domx.query",S)}),define("skylark-domx-query/main",["./query","skylark-domx-styler"],function(t,e){return t.fn.style=t.wraps.wrapper_name_value(e.css,e),t.fn.css=t.wraps.wrapper_name_value(e.css,e),t.fn.hasClass=t.wraps.wrapper_some_chk(e.hasClass,e),t.fn.addClass=t.wraps.wrapper_every_act_firstArgFunc(e.addClass,e,e.className),t.fn.removeClass=t.wraps.wrapper_every_act_firstArgFunc(e.removeClass,e,e.className),t.fn.toggleClass=t.wraps.wrapper_every_act_firstArgFunc(e.toggleClass,e,e.className),t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t}),define("skylark-domx-query",["skylark-domx-query/main"],function(t){return t}),define("skylark-domx-velm/velm",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query"],function(t,e,n,r,i){var s=Array.prototype.map,o=Array.prototype.slice,a=e.klass({klassName:"VisualElement",_construct:function(t){e.isString(t)&&(t="<"===(t=e.trim(t)).charAt(0)?n.createFragment(t)[0]:document.getElementById(t)),this._elm=t}});a.prototype.$=a.prototype.query=function(t){return i(t,this._elm)},a.prototype.elm=function(){return this._elm};var l=new a(document.body),u=function(t){return t?new a(t):l};return e.mixin(u,{batch:function(t,e,n){return t.forEach(function(t){var r=t instanceof a?t:u(t);r[e].apply(r,n)}),this},root:new a(document.body),VisualElement:a,partial:function(t,e){var n={};n[t]=e,a.partial(n)},delegate:function(t,n,r){var i={};t.forEach(function(t){var l=t;r&&r[t]&&(l=r[t]),i[t]=function(t,n){return function(){var r=this._elm,i=t.apply(n,[r].concat(o.call(arguments)));if(i){if(i===n)return this;i instanceof HTMLElement?i=new a(i):e.isArrayLike(i)&&(i=s.call(i,function(t){return t instanceof HTMLElement?new a(t):t}))}return i}}(n[l],n)}),a.partial(i)}}),u.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],r),u.find=function(t){return"body"===t?this.root:this.root.descendant(t)},u.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],n),t.attach("domx.velm",u)}),define("skylark-domx-velm/main",["./velm","skylark-domx-styler"],function(t,e){t.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],e);return["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(e){var n=e;t.VisualElement.prototype[n]=function(t){return this.css(e,t),this}}),t}),define("skylark-domx-velm",["skylark-domx-velm/main"],function(t){return t}),define("skylark-domx-data/main",["./data","skylark-domx-velm","skylark-domx-query"],function(t,e,n){return e.delegate(["attr","data","prop","removeAttr","removeData","text","val"],t),n.fn.text=n.wraps.wrapper_value(t.text,t,t.text),n.fn.attr=n.wraps.wrapper_name_value(t.attr,t,t.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(t.removeAttr,t),n.fn.prop=n.wraps.wrapper_name_value(t.prop,t,t.prop),n.fn.removeProp=n.wraps.wrapper_every_act(t.removeProp,t),n.fn.data=n.wraps.wrapper_name_value(t.data,t),n.fn.removeData=n.wraps.wrapper_every_act(t.removeData),n.fn.val=n.wraps.wrapper_value(t.val,t,t.val),t}),define("skylark-domx-data",["skylark-domx-data/main"],function(t){return t}),define("skylark-domx-eventer/eventer",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-finder","skylark-domx-noder","skylark-domx-data"],function(t,e,n,r,i,s){e.mixin;var o=e.each,a=(Array.prototype.slice,e.uid),l=/^([A-Z]|returnValue$|layer[XY]$)/,u={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},c=/complete|loaded|interactive/;function h(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(u,function(r,i){var s=n[r];t[r]=function(){return this[i]=e.returnTrue,s&&s.apply(n,arguments)},t[i]=e.returnFalse})),t}function d(t){if(t){var e=(""+t).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}return{type:null,ns:null}}function f(t){return t&&(e.isFunction(t)||e.isFunction(t.handleEvent))}var p=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],m={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},g=function(){return function(t,n){e.isString(t)?n=n||{}:t=(n=t||{}).type||"";var r=d(t);t=r.type,n=e.mixin({bubbles:!0,cancelable:!0},n),r.ns&&(n.namespace=r.ns);var i=function(t){var e=m[t];e||(e=0);return p[e]}(t),s=new i(t,n);return e.safeMixin(s,n),h(s)}}();function y(t,n){var r,i={originalEvent:t};for(r in t)"keyIdentifier"===r||l.test(r)||void 0===t[r]||(i[r]=t[r]);return n&&e.mixin(i,n),h(i,t)}var v={},x="onfocusin"in window,k={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"},w=function(t){return b[t]||x&&k[t]||t},_={},C=e.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,n){var s=this._bindings,o={fn:t,options:e.mixin({},n)};s.push(o);var a=this;if(!a._listener){a._listener=function(t){var n=this,s=y(t),o=t._args,l=a._bindings,u=s.namespace;o=e.isDefined(o)?[s].concat(o):[s],s.type=a._event,e.each(l,function(t,l){var c=n;if(s.isImmediatePropagationStopped&&s.isImmediatePropagationStopped())return!1;var h=l.fn,d=l.options||{},f=d.selector,p=d.one,m=d.data;if(!u||u==d.ns||-1!==d.ns.indexOf(u)){if(f){if(!(c=r.closest(s.target,f))||c===n)return;e.mixin(s,{currentTarget:c,liveFired:n})}var g=a._event;if(g in b){var y=s.relatedTarget;if(y&&(y===c||i.contains(c,y)))return}e.isDefined(m)&&(s.data=m),p&&a.remove(h,d),!1===(h.handleEvent?h.handleEvent.apply(h,o):d.ctx?h.apply(d.ctx,o):h.apply(c,o))&&(s.preventDefault(),s.stopPropagation())}})};var l=a._event;a._target.addEventListener?a._target.addEventListener(w(l),a._listener,!1):console.warn("invalid eventer object",a._target)}},remove:function(t,n){var r,i;(n=e.mixin({},n)).ns&&(i=n.ns,r=new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var i=(!t||t===e.fn)&&(!r||r.test(e.options.ns))&&(!n.selector||n.selector==e.options.selector);return!i}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(w(this._event),this._listener,!1),this._listener=null)}}),T=e.klass({init:function(t){this._target=t,this._handler={}},register:function(t,n,r){var i=d(t),t=i.type,s=v[t],o=s&&(s.bindType||s.bindEventName),a=this._handler;void 0===a[t]&&(a[t]=new C(this._target,o||t)),a[t].add(n,e.mixin({ns:i.ns},r))},unregister:function(t,n,r){var i=this._handler,s=d(t);if(t=s.type){var o=i[t];o&&o.remove(n,e.mixin({ns:s.ns},r))}else for(t in i){var o=i[t];o.remove(n,e.mixin({ns:s.ns},r))}}}),M=function(t){var e=a(t),n=_[e];return n||(n=_[e]=new T(t)),n};var z=[],S=e.loop(function(){for(var t=0;t<z.length;t++)A(z[t],"focused");z=[]});function E(t,n,r,i,s,o,a){if(e.isPlainObject(n))return e.each(n,function(e,n){E(t,e,r,i,n,a)}),this;e.isString(r)||f(s)||(a=o,o=s,s=i,i=r,r=void 0),f(i)&&(a=o,o=s,s=i,i=void 0),e.isBoolean(o)&&(a=o,o=void 0),!1===s&&(s=e.returnFalse),"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var l=M(t);return n.forEach(function(t){if("ready"==t)return $(s);l.register(t,s,{data:i,selector:r,ctx:o,one:!!a})}),this}function A(t,e,n){var r;(r=e instanceof Event?e:g(e,n))._args=n;var i=t.dispatchEvent||t.trigger;return i?i.call(t,r):console.warn("The evented parameter is not a eventable object"),this}function $(t){return c.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1),this}S.start();var j=[],P=e.loop(function(){for(var t=0;t<j.length;t++)A(j[t],"resized");j=[]});P.start();var O={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function q(){return q}return n.support.transition&&(v.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),e.mixin(q,{NativeEvents:m,clear:function(t){return M(t).unregister(),this},create:g,focused:function(t){z.includes(t)||z.push(t)},keys:O,isNativeEvent:function(t){if(e.isString(t))return!!m[t];if(e.isArray(t)){for(var n=0;n<t.length;n++)if(m[t])return!1;return t.length>0}},off:function t(n,r,i,s){if(e.isPlainObject(r))return e.each(r,function(e,r){t(n,e,i,r)}),this;e.isString(i)||f(s)||!1===s||(s=i,i=void 0);!1===s&&(s=e.returnFalse);"string"==typeof r&&(r=r.indexOf(",")>-1?r.split(","):r.split(/\s/));var o=M(n);r&&r.forEach(function(t){o.unregister(t,s,{selector:i})});return this},on:E,one:function(...t){return E(...t,!0),this},proxy:y,ready:$,resized:function(t){j.includes(t)||j.push(t)},shortcuts:function(t){var e=s.data(t,"shortcuts");if(!e){e={},s.data(t,"shortcuts",e);var n=function(t,e){var n=e.metaKey||e.ctrlKey;if(t.ctrl==n&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode))return e.preventDefault(),"keydown"==e.type&&t.fn(e),!0};E(t,"keyup keypress keydown",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var r in e)n(e[r],t)})}return{add:function(t,n){(t.indexOf(",")>-1?t.toLowerCase().split(","):t.toLowerCase().split(" ")).forEach(function(t){var r={fn:n,alt:!1,ctrl:!1,shift:!1};t.split("+").forEach(function(t){switch(t){case"alt":case"ctrl":case"shift":r[t]=!0;break;default:r.charCode=t.charCodeAt(0),r.keyCode=O[t]||t.toUpperCase().charCodeAt(0)}});var i=(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode;e[i]=r})}}},special:v,stop:function(t){window.document.all&&(t.keyCode=0);t.preventDefault&&(t.preventDefault(),t.stopPropagation());return this},trigger:A}),o(m,function(t){q[t]=function(e,n,r,i){return arguments.length>1?this.on(e,t,n,r,i):("focus"==t?e.focus&&e.focus():"blur"==t?e.blur&&e.blur():"click"==t?e.click&&e.click():this.trigger(e,t),this)}}),t.attach("domx.eventer",q)}),define("skylark-domx-eventer/main",["skylark-langx/langx","./eventer","skylark-domx-velm","skylark-domx-query"],function(t,e,n,r){var i=["off","on","one","trigger"];return t.each(e.NativeEvents,function(t){i.push(t)}),n.delegate(i,e),t.each(i,function(t,n){r.fn[n]=r.wraps.wrapper_every_act(e[n],e)}),r.ready=e.ready,e}),define("skylark-domx-eventer",["skylark-domx-eventer/main"],function(t){return t}),define("skylark-domx-forms/forms",["skylark-langx/skylark"],function(t){return t.attach("domx.forms",{})}),define("skylark-domx-forms/deserialize",["skylark-langx/langx","skylark-domx-query","./forms"],function(t,e,n){function r(t,e,n){var r=n[t];return void 0===r?n[t]=[e]:r.push(e),n}var i={checked:["radio","checkbox"],selected:["option","select-one","select-multiple"],value:["button","color","date","datetime","datetime-local","email","hidden","month","number","password","range","reset","search","submit","tel","text","textarea","time","url","week"]};function s(e,n,r,s,o){var a=function(e){var n=function(t){return(t.type||t.nodeName).toLowerCase()}(e),r=void 0;return t.each(i,function(e,i){if(t.inArray(n,i)>-1)return r=e,!1}),r}(e);if("value"==a&&n==s)e.value=r,o.call(e,r);else if("checked"==a||"selected"==a){var l=[];e.options?t.each(e.options,function(t,e){l.push(e)}):l.push(e),e.multiple&&0==s&&(e.selectedIndex=-1),t.each(l,function(t,e){e.value==r&&(e[a]=!0,o.call(e,r))})}}var o={change:t.noop,complete:t.noop};return n.deserialize=function(n,i,a){t.isFunction(a)&&(a={complete:a});a=t.extend(o,a||{}),i=function(e){var n={},i=/\+/g;t.isPlainObject(e)?(t.extend(n,e),t.each(n,function(e,r){t.isArray(r)||(n[e]=[r])})):t.isArray(e)?t.each(e,function(t,e){r(e.name,e.value,n)}):"string"==typeof e&&t.each(e.split("&"),function(t,e){var s=e.split("="),o=decodeURIComponent(s[0].replace(i,"%20")),a=decodeURIComponent(s[1].replace(i,"%20"));r(o,a,n)});return n}(i);var l=function(n,i){var s={},o=e(n).map(function(){return this.elements?t.makeArray(this.elements):this}).filter(i||":input:not(:disabled)").get();return t.each(o,function(t,e){r(e.name,e,s)}),s}(n,a.filter);return t.each(i,function(e,n){t.each(l[e],function(e,r){t.each(n,function(t,n){s(r,e,n,t,a.change)})})}),a.complete.call(n),this}}),define("skylark-domx-forms/serializeArray",["skylark-langx/langx","skylark-domx-data","./forms"],function(t,e,n){return n.serializeArray=function(n){var r,i,s=[],o=function(t){if(t.forEach)return t.forEach(o);s.push({name:r,value:t})};return t.each(n.elements,function(t,n){i=n.type,(r=n.name)&&"fieldset"!=n.nodeName.toLowerCase()&&!n.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||n.checked)&&o(e.val(n))}),s}}),define("skylark-domx-forms/serializeObject",["skylark-langx/langx","./forms","./serializeArray"],function(t,e,n){return e.serializeObject=function(e){var r={};return t.each(n(e),function(e,n){var i=n.name,s=n.value;r[i]=void 0===r[i]?s:t.isArray(r[i])?r[i].concat(s):[r[i],s]}),r}}),define("skylark-domx-forms/serialize",["skylark-langx/langx","./forms","./serializeArray"],function(t,e,n){return e.serialize=function(t){var e=[];return n(t).forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")}}),define("skylark-domx-forms/main",["./forms","skylark-domx-velm","skylark-domx-query","./deserialize","./serializeArray","./serializeObject","./serialize"],function(t,e,n){return e.delegate(["deserialize","serializeArray","serializeObject","serialize"],t),n.fn.deserialize=n.wraps.wrapper_value(t.deserialize,t,t.deserialize),n.fn.serializeArray=n.wraps.wrapper_value(t.serializeArray,t,t.serializeArray),n.fn.serializeObject=n.wraps.wrapper_value(t.serializeObject,t,t.serializeObject),n.fn.serialize=n.wraps.wrapper_value(t.serialize,t,t.serialize),t}),define("skylark-domx-forms",["skylark-domx-forms/main"],function(t){return t}),define("skylark-domx-fx/fx",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach("domx.fx",n)}),define("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,r){"use strict";var i,s=/^(?:body|html)$/i,o=e.toPixel,a=n.offsetParent;function l(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.borderLeftWidth,t),top:o(e.borderTopWidth,t),right:o(e.borderRightWidth,t),bottom:o(e.borderBottomWidth,t)}}function u(t,e){if(void 0===e)return s.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var n=a(t),r=u(n),i=f(t),o=l(n);return g(t,{top:e.top-r.top-i.top-o.top,left:e.left-r.left-i.left-o.left}),this}function c(t,e){return void 0!==e?(u(t,e),k(t,e),this):t==window||t==document.documentElement||t==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect?t.getBoundingClientRect():void 0}function h(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var n="border-box"===r.css(t,"box-sizing"),i={width:e.width,height:e.height};if(n){var s=l(t);void 0!==i.width&&(i.width=i.width+s.left+s.right),void 0!==i.height&&(i.height=i.height+s.top+s.bottom)}else{var o=p(t);void 0!==i.width&&(i.width=i.width-o.left-o.right),void 0!==i.height&&(i.height=i.height-o.top-o.bottom)}return r.css(t,i),this}function d(t){var e=t.documentElement,n=t.body,r=Math.max,i=r(e.scrollWidth,n.scrollWidth),s=r(e.clientWidth,n.clientWidth),o=r(e.offsetWidth,n.offsetWidth),a=r(e.scrollHeight,n.scrollHeight),l=r(e.clientHeight,n.clientHeight),u=r(e.offsetHeight,n.offsetHeight);return{width:i<o?s:i,height:a<u?l:a}}function f(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.marginLeft),top:o(e.marginTop),right:o(e.marginRight),bottom:o(e.marginBottom)}}function p(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.paddingLeft),top:o(e.paddingTop),right:o(e.paddingRight),bottom:o(e.paddingBottom)}}function m(t,e){if(void 0===e){var n=t.getBoundingClientRect(),r=t.ownerDocument.defaultView;return{left:n.left+r.pageXOffset,top:n.top+r.pageYOffset}}var i=a(t),s=m(i),o=f(t),u=l(i);return g(t,{top:e.top-s.top-o.top-u.top,left:e.left-s.left-o.left-u.left}),this}function g(t,n){if(void 0==n){var i=a(t),s=u(t),o=u(i),c=f(t),h=l(i);return{top:s.top-o.top-h.top-c.top,left:s.left-o.left-h.left-c.left}}var i=a(t),d={top:n.top,left:n.left};return e.isDefined(d.top)&&(d.top=d.top+(x(i)||0)),e.isDefined(d.left)&&(d.left=d.left+(v(i)||0)),"static"==r.css(t,"position")&&(d.position="relative"),r.css(t,d),this}function y(t,e){if(void 0===e){var n=a(t),r=c(t),i=u(n),s=(f(t),l(n));return{top:r.top-i.top-s.top,left:r.left-i.left-s.left,width:r.width,height:r.height}}return g(t,e),k(t,e),this}function v(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n="scrollLeft"in t;return void 0===e?n?t.scrollLeft:t.pageXOffset:(n?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function x(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n="scrollTop"in t;return void 0===e?n?t.scrollTop:t.pageYOffset:(n?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function k(t,n){if(void 0==n)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?d(document):{width:t.offsetWidth,height:t.offsetHeight};var i="border-box"===r.css(t,"box-sizing"),s={width:n.width,height:n.height};if(!i){var o=p(t),a=l(t);void 0!==s.width&&""!==s.width&&null!==s.width&&(s.width=s.width-o.left-o.right-a.left-a.right),void 0!==s.height&&""!==s.height&&null!==s.height&&(s.height=s.height-o.top-o.bottom-a.top-a.bottom)}return r.css(t,s),this}function b(t){return c(t=t||window)}function w(){return w}return e.mixin(w,{borderExtents:l,boundingPosition:u,boundingRect:c,clientHeight:function(t,e){return void 0==e?h(t).height:h(t,{height:e})},clientSize:h,clientWidth:function(t,e){return void 0==e?h(t).width:(h(t,{width:e}),this)},contentRect:function(t){var e=h(t),n=p(t);return{left:n.left,top:n.top,width:e.width-n.left-n.right,height:e.height-n.top-n.bottom}},getDocumentSize:d,hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},height:function(t,e){return void 0==e?k(t).height:(k(t,{height:e}),this)},inview:function(t,e){var n=function(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}(c(t),e),r=b();return!!n&&n.bottom>=0&&n.right>=0&&n.top<=r.height&&n.left<=r.width},marginExtents:f,marginRect:function(t){var e=y(t),n=f(t);return{left:e.left,top:e.top,width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}},marginSize:function(t){var e=k(t),n=f(t);return{width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}},offsetParent:a,paddingExtents:p,pagePosition:m,pageRect:function(t,e){if(void 0===e){var n=t.getBoundingClientRect(),r=t.ownerDocument.defaultView;return{left:n.left+r.pageXOffset,top:n.top+r.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}}return m(t,e),k(t,e),this},relativePosition:g,relativeRect:y,scrollbarWidth:function(){if(void 0!==i)return i;var t,e,s=n.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],o=s.childNodes[0];n.append(document.body,s),t=o.offsetWidth,r.css(s,"overflow","scroll"),e=o.offsetWidth,t===e&&(e=s[0].clientWidth);return n.remove(s),i=t-e},scrollIntoView:function(t,e){var n,r,i,s,o,a,l=t.parentNode,u=function(t,e){var n,r,i=t;n=r=0;for(;i&&i!=e&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(t,l);n=u.x,r=u.y,i=t.offsetWidth,s=t.offsetHeight,o=l.clientWidth,a=l.clientHeight,"end"==e?(n-=o-i,r-=a-s):"center"==e&&(n-=o/2-i/2,r-=a/2-s/2);return l.scrollLeft=n,l.scrollTop=r,this},scrollLeft:v,scrollTop:x,scrollBy:function(t,e,n){t.scrollLeft+=e,t.scrollTop+=n},size:k,testAxis:function(t){var e=t.offsetTop,n=t.offsetLeft,r=t.offsetWidth,i=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;var s={x:0,y:0};e<window.pageYOffset?s.y=e-window.pageYOffset:e+i>window.pageYOffset+window.innerHeight&&(s.y=e+i-(window.pageYOffset+window.innerHeight));n<window.pageXOffset?s.x=n-window.pageXOffset:n+r>window.pageXOffset+window.innerWidth&&(s.x=n+r-(window.pageXOffset+window.innerWidth));return s},viewportSize:b,width:function(t,e){return void 0==e?k(t).width:(k(t,{width:e}),this)}}),t.attach("domx.geom",w)}),define("skylark-domx-geom/posit",["skylark-langx/langx","skylark-domx-noder","skylark-domx-styler","./geom"],function(t,e,n,r){"use strict";var i=Math.max,s=Math.abs,o=/left|center|right/,a=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/;function h(t,e,n){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?n/100:1)]}function d(t,e){return parseInt(n.css(t,e),10)||0}var f={fit:{left:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,u=a+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&u<=0?(n=t.left+l+e.collisionWidth-o-s,t.left+=l-n):t.left=u>0&&l<=0?s:l>u?s+o-e.collisionWidth:s:l>0?t.left+=l:u>0?t.left-=u:t.left=i(t.left-a,t.left)},top:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollTop:r.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,u=a+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&u<=0?(n=t.top+l+e.collisionHeight-o-s,t.top+=l-n):t.top=u>0&&l<=0?s:l>u?s+o-e.collisionHeight:s:l>0?t.top+=l:u>0?t.top-=u:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var n,r,i=e.within,o=i.offset.left+i.scrollLeft,a=i.width,l=i.isWindow?i.scrollLeft:i.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((n=t.left+d+f+p+e.collisionWidth-a-o)<0||n<s(c))&&(t.left+=d+f+p):h>0&&((r=t.left-e.collisionPosition.marginLeft+d+f+p-l)>0||s(r)<h)&&(t.left+=d+f+p)},top:function(t,e){var n,r,i=e.within,o=i.offset.top+i.scrollTop,a=i.height,l=i.isWindow?i.scrollTop:i.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-a-l,d="top"===e.my[1],f=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];c<0?((r=t.top+f+p+m+e.collisionHeight-a-o)<0||r<s(c))&&(t.top+=f+p+m):h>0&&((n=t.top-e.collisionPosition.marginTop+f+p+m-l)>0||s(n)<h)&&(t.top+=f+p+m)}},flipfit:{left:function(){f.flip.left.apply(this,arguments),f.fit.left.apply(this,arguments)},top:function(){f.flip.top.apply(this,arguments),f.fit.top.apply(this,arguments)}}};return r.posit=function(c,p){var m,g,y,v,x,k,b=(p=t.extend({},p)).of,w=(M=p.within,z=M||window,S=e.isWindow(z),E=!!z&&9===z.nodeType,A=!S&&!E,$=marginSize(z),{element:z,isWindow:S,isDocument:E,offset:A?r.pagePosition(M):{left:0,top:0},scrollLeft:r.scrollLeft(z),scrollTop:r.scrollTop(z),width:$.width,height:$.height}),_=function(t){var e=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-x"),i=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-y"),s="scroll"===e||"auto"===e&&t.width<r.scrollWidth(t.element);return{width:"scroll"===i||"auto"===i&&t.height<r.scrollHeight(t.element)?r.scrollbarWidth():0,height:s?r.scrollbarWidth():0}}(w),C=(p.collision||"flip").split(" "),T={};var M,z,S,E,A,$;j=b,k=9===j.nodeType?{size:size(j),offset:{top:0,left:0}}:e.isWindow(j)?{size:r.size(j),offset:{top:r.scrollTop(j),left:r.scrollLeft(j)}}:j.preventDefault?{size:{width:0,height:0},offset:{top:j.pageY,left:j.pageX}}:{size:r.size(j),offset:r.pagePosition(j)},b.preventDefault&&(p.at="left top");var j;g=k.size.width,y=k.size.height,v=k.offset,x=t.extend({},v),t.each(["my","at"],function(){var t,e,n=(p[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):a.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=a.test(n[1])?n[1]:"center",t=l.exec(n[0]),e=l.exec(n[1]),T[this]=[t?t[0]:0,e?e[0]:0],p[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]);"right"===p.at[0]?x.left+=g:"center"===p.at[0]&&(x.left+=g/2);"bottom"===p.at[1]?x.top+=y:"center"===p.at[1]&&(x.top+=y/2);return m=h(T.at,g,y),x.left+=m[0],x.top+=m[1],function(e){var n,o,a=r.marginSize(e),l=a.width,u=a.height,c=d(e,"marginLeft"),k=d(e,"marginTop"),M=l+c+d(e,"marginRight")+_.width,z=u+k+d(e,"marginBottom")+_.height,S=t.extend({},x),E=h(T.my,a.width,a.height);"right"===p.my[0]?S.left-=l:"center"===p.my[0]&&(S.left-=l/2),"bottom"===p.my[1]?S.top-=u:"center"===p.my[1]&&(S.top-=u/2),S.left+=E[0],S.top+=E[1],n={marginLeft:c,marginTop:k},t.each(["left","top"],function(t,r){f[C[t]]&&f[C[t]][r](S,{targetWidth:g,targetHeight:y,elemWidth:l,elemHeight:u,collisionPosition:n,collisionWidth:M,collisionHeight:z,offset:[m[0]+E[0],m[1]+E[1]],my:p.my,at:p.at,within:w,elem:e})}),p.using&&(o=function(t){var n=v.left-S.left,r=n+g-l,o=v.top-S.top,a=o+y-u,c={target:{element:b,left:v.left,top:v.top,width:g,height:y},element:{element:e,left:S.left,top:S.top,width:l,height:u},horizontal:r<0?"left":n>0?"right":"center",vertical:a<0?"top":o>0?"bottom":"middle"};g<l&&s(n+r)<g&&(c.horizontal="center"),y<u&&s(o+a)<y&&(c.vertical="middle"),i(s(n),s(r))>i(s(o),s(a))?c.important="horizontal":c.important="vertical",p.using.call(this,t,c)}),r.pagePosition(e,t.extend(S,{using:o}))}(c)}}),define("skylark-domx-geom/scrollToTop",["skylark-langx/langx","skylark-domx-styler","./geom"],function(t,e,n){return n.scrollToTop=function(e,n,r,i){var s=parseInt(e.scrollTop),o=0,a=1e3*r/5,l=parseInt(n),u=setInterval(function(){++o<=a&&(e.scrollTop=(l-s)/a*o+s),o>=a+1&&(clearInterval(u),i&&t.debounce(i,1e3)())},5);return this}}),define("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query","./posit","./scrollToTop"],function(t,e,n,r){return n.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","marginRect","marginSize","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","pageSize","width"],e,{pageSize:"size"}),r.fn.offset=r.wraps.wrapper_value(e.pagePosition,e,e.pagePosition),r.fn.scrollTop=r.wraps.wrapper_value(e.scrollTop,e),r.fn.scrollLeft=r.wraps.wrapper_value(e.scrollLeft,e),r.fn.position=function(n){if(!this.length)return this;if(n)return n.of&&n.of.length&&((n=t.clone(n)).of=n.of[0]),this.each(function(){e.posit(this,n)});var r=this[0];return e.relativePosition(r)},r.fn.offsetParent=r.wraps.wrapper_map(e.offsetParent,e),r.fn.pageSize=r.wraps.wrapper_value(e.size,e),r.fn.width=r.wraps.wrapper_value(e.width,e,e.width),r.fn.height=r.wraps.wrapper_value(e.height,e,e.height),r.fn.clientSize=r.wraps.wrapper_value(e.clientSize,e.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});r.fn["outer"+n]=function(n,r){if(arguments.length?"boolean"!=typeof n&&(r=n,n=!1):(n=!1,r=void 0),void 0===r){var i=this[0];if(!i)return;var s=e.size(i);if(n){var o=e.marginExtents(i);s.width=s.width+o.left+o.right,s.height=s.height+o.top+o.bottom}return"width"===t?s.width:s.height}return this.each(function(i,s){var o={},a=e.marginExtents(s);"width"===t?(o.width=r,n&&(o.width=o.width-a.left-a.right)):(o.height=r,n&&(o.height=o.height-a.top-a.bottom)),e.size(s,o)})}}),r.fn.innerWidth=r.wraps.wrapper_value(e.clientWidth,e,e.clientWidth),r.fn.innerHeight=r.wraps.wrapper_value(e.clientHeight,e,e.clientHeight),e}),define("skylark-domx-geom",["skylark-domx-geom/main"],function(t){return t}),define("skylark-domx-transits/transits",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach("domx.transits",n)}),define("skylark-domx-transits/transit",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./transits"],function(t,e,n,r,i,s,o){var a,l,u,c,h=e.normalizeCssEvent("TransitionEnd"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,f=e.css3PropPrefix+"transform",p={};return p[a=e.normalizeCssProperty("transition-property")]=p[l=e.normalizeCssProperty("transition-duration")]=p[c=e.normalizeCssProperty("transition-delay")]=p[u=e.normalizeCssProperty("transition-timing-function")]="",o.transit=function(e,n,m,g,y,v){var x,k,b,w={},_=[],C="",T=this,M=!1,z=!1;t.isPlainObject(m)&&(g=m.easing,y=m.complete,v=m.delay,m=m.duration);t.isString(m)&&(m=o.speeds[m]);void 0===m&&(m=o.speeds.normal);m/=1e3,o.off&&(m=0);t.isFunction(g)?(y=g,eace="swing"):g=g||"swing";v?v/=1e3:v=0;for(x in n){var S=n[x];if(d.test(x))C+=x+"("+S+") ";else{if("scrollTop"===x&&(z=!0),"clip"==x&&t.isPlainObject(S)){if(w[x]="rect("+S.top+"px,"+S.right+"px,"+S.bottom+"px,"+S.left+"px)","auto"==i.css(e,"clip")){var E=r.size(e);i.css(e,"clip","rect(0px,"+E.width+"px,"+E.height+"px,0px)"),!0}}else w[x]=S;_.push(t.dasherize(x))}}k=h,C&&(w[f]=C,_.push(f));m>0&&(w[a]=_.join(", "),w[l]=m+"s",w[c]=v+"s",w[u]=g);b=function(t){if(M=!0,t){if(t.target!==t.currentTarget)return;s.off(t.target,k,b)}else s.off(e,k,b);i.css(e,p),y&&y.call(this)},m>0&&(s.on(e,k,b),t.debounce(function(){M||b.call(T)},1e3*(m+v)+25)());e.clientLeft,i.css(e,w),m<=0&&t.debounce(function(){M||b.call(T)},0)();z&&r.scrollToTop(e,n.scrollTop,m,y);return this}}),define("skylark-domx-animates/animates",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser"],function(t,e,n){function r(){return r}return e.mixin(r,{off:!1,speeds:{normal:400,fast:200,slow:600},animationName:n.normalizeCssProperty("animation-name"),animationDuration:n.normalizeCssProperty("animation-duration"),animationDelay:n.normalizeCssProperty("animation-delay"),animationTiming:n.normalizeCssProperty("animation-timing-function"),animationEnd:n.normalizeCssEvent("AnimationEnd"),animateBaseClass:"animated"}),t.attach("domx.animates",r)}),define("skylark-domx-animates/animation",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./animates"],function(t,e,n,r,i,s,o){var a=o.animationName,l=o.animationDuration,u=o.animationTiming,c=o.animationDelay,h=o.animationEnd,d={};return d[a]=d[l]=d[c]=d[u]="",o.animation=function(e,n,r,c,d,f){var p={};t.isPlainObject(r)&&(c=r.easing,d=r.complete,f=r.delay,r=r.duration);t.isString(r)&&(r=o.speeds[r]);void 0===r&&(r=o.speeds.normal);r/=1e3,t.isFunction(c)?(d=c,eace="swing"):c=c||"swing";f?f/=1e3:f=0;p[a]=n,p[l]=r+"s",p[u]=c,r>0&&s.on(e,h,d);return e.clientLeft,i.css(e,p),this}}),define("skylark-domx-fx/animate",["skylark-langx/langx","skylark-domx-transits/transit","skylark-domx-animates/animation","./fx"],function(t,e,n,r){return r.animate=function(r,i,s,o,a,l){return t.isString(i)?n(r,i,s,o,a,l):e(r,i,s,o,a,l)}}),define("skylark-domx-transits/bounce",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,r,i){return r.bounce=function(r,s,o){var a,l,u,c,h=s.mode,d="hide"===h,f="show"===h,p=s.direction||"up",m=s.distance,g=s.times||5,y=2*g+(f||d?1:0),v=s.duration/y,x=s.easing,k="up"===p||"down"===p?"top":"left",b="up"===p||"left"===p,w=0,_=t.Deferred,C=[];if(u=n.css(r,k),!m){var T=e.size(r);m=("top"===k?T.height:T.width)/3}c=e.relativePosition(r)[k],f&&((l={opacity:1})[k]=u,n.css(r,"opacity",0),n.css(r,k,c+(b?2*-m:2*m)),C.push(M(r,l,v,x)));d&&(m/=Math.pow(2,g-1));function M(t,e,n,r){return function(){var s=new _;return i(t,e,n,r,function(){s.resolve()}),s.promise}}for((l={})[k]=u;w<g;w++)(a={})[k]=c+(b?-m:m),C.push(M(r,a,v,x)),C.push(M(r,l,v,x)),m=d?2*m:m/2;d&&((a={opacity:0})[k]=c+(b?-1*m:m),C.push(M(r,a,v,x)));return C.push(o),C.reduce(function(t,e,n,r){return t.then(e)},_.resolve()),this}}),define("skylark-domx-transits/emulateTransitionEnd",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","./transits"],function(t,e,n,r){return r.emulateTransitionEnd=function(t,r){var i=!1;n.one(t,"transitionEnd",function(){i=!0});return setTimeout(function(){i||n.trigger(t,e.support.transition.end)},r),this}}),define("skylark-domx-transits/show",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,r){return n.show=function(n,i,s){e.show(n),i&&(!s&&t.isFunction(i)&&(s=i,i="normal"),e.css(n,"opacity",0),r(n,{opacity:1,scale:"1,1"},i,s));return this}}),define("skylark-domx-transits/hide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,r){return n.hide=function(n,i,s){i?(!s&&t.isFunction(i)&&(s=i,i="normal"),r(n,{opacity:0,scale:"0,0"},i,function(){e.hide(n),s&&s.call(n)})):e.hide(n);return this}}),define("skylark-domx-transits/explode",["skylark-langx/langx","skylark-domx-styler","skylark-domx-geom","skylark-domx-noder","skylark-domx-query","./transits","./transit","./show","./hide"],function(t,e,n,r,i,s,o,a,l){return s.explode=function(t,r,s){e.show(t),e.css(t,"visibility","hidden");var o,a,l,u,c,h=r.pieces?Math.round(Math.sqrt(r.pieces)):3,d=h,f="show"===r.mode,p=n.pagePosition(t),m=n.marginSize(t),g=Math.ceil(m.width/d),y=Math.ceil(m.height/h),v=[];function x(){v.push(this),v.length===h*d&&(e.css(t,{visibility:"visible"}),i(v).remove(),s())}for(var k=0;k<h;k++)for(l=p.top+k*y,c=k-(h-1)/2,o=0;o<d;o++)a=p.left+o*g,u=o-(d-1)/2,i(t).clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-k*y}).parent().addClass(r.explodeClass||"ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:y,left:a+(f?u*g:0),top:l+(f?c*y:0),opacity:f?0:1}).transit({left:a+(f?0:u*g),top:l+(f?0:c*y),opacity:f?1:0},r.duration||500,r.easing,x);return this}}),define("skylark-domx-transits/fade",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,r){return n.fade=function(e,n,i,s){t.isFunction(i)&&(s=i,i={});return r(e,{opacity:n},(i=i||{}).duration,i.easing,s),this}}),define("skylark-domx-transits/fadeIn",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(t,e,n,r){return n.fadeIn=function(t,n,i){var s=e.css(t,"opacity");s>0?e.css(t,"opacity",0):s=1;return e.show(t),r(t,s,n,i),this}}),define("skylark-domx-transits/fadeOut",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(t,e,n,r){return n.fadeOut=function(t,e,n){return r(t,0,e,n),this}}),define("skylark-domx-transits/fadeToggle",["skylark-langx/langx","skylark-domx-styler","./transits","./fadeIn","./fadeOut"],function(t,e,n,r,i){return n.fadeToggle=function(t,n,s,o){e.isInvisible(t)?r(t,n,s,o):i(t,n,s,o);return this}}),define("skylark-domx-transits/pulsate",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,r,i){return r.pulsate=function(e,r,s){var o=r.mode,a="show"===o||!o,l=a||"hide"===o,u=2*(r.times||5)+(l?1:0),c=r.duration/u,h=0,d=1;(a||n.isInvisible(e))&&(n.css(e,"opacity",0),n.show(e),h=1);var f=t.Deferred,p=[];function m(t,e,n,r){return function(){var s=new f;return i(t,e,n,r,function(){s.resolve()}),s.promise}}for(;d<u;d++)p.push(m(e,{opacity:h},c,r.easing)),h=1-h;return p.push(m(e,{opacity:h},c,r.easing)),p.push(s),p.reduce(function(t,e,n,r){return t.then(e)},f.resolve()),this}}),define("skylark-domx-transits/shake",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,r,i){return r.shake=function(n,r,s){var o=1,a=r.direction||"left",l=r.distance||20,u=r.times||3,c=2*u+1,h=Math.round(r.duration/c),d="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},y={},v=t.Deferred;function x(t,e,n,r){return function(){var s=new v;return i(t,e,n,r,function(){s.resolve()}),s.promise}}for(start=e.relativePosition(n)[d],funcs=[],p[d]=start,m[d]=start+(f?-1:1)*l,g[d]=m[d]+(f?1:-1)*l*2,y[d]=g[d]+(f?-1:1)*l*2,funcs.push(x(n,m,h,r.easing));o<u;o++)funcs.push(x(n,g,h,r.easing)),funcs.push(x(n,y,h,r.easing));return funcs.push(x(n,p,h/2,r.easing)),funcs.push(s),funcs.reduce(function(t,e,n,r){return t.then(e)},v.resolve()),this}}),define("skylark-domx-transits/slide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,r){return n.slide=function(i,s,o){t.isFunction(s)&&(o=s,s={});var a=(s=s||{}).direction||"down",l="up"===a||"left"===a,u="up"===a||"down"===a,c=s.duration||n.speeds.normal,h=e.css(i,"position");if(l){if(e.isInvisible(i))return this}else e.show(i),e.css(i,{position:"absolute",visibility:"hidden"});if(u){var d=e.css(i,"margin-top"),f=e.css(i,"margin-bottom"),p=e.css(i,"padding-top"),m=e.css(i,"padding-bottom"),g=e.css(i,"height");l?(e.css(i,{visibility:"visible",overflow:"hidden",height:g,marginTop:d,marginBottom:f,paddingTop:p,paddingBottom:m}),r(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:c,queue:!1,complete:function(){e.hide(i),e.css(i,{visibility:"visible",overflow:"hidden",height:g,marginTop:d,marginBottom:f,paddingTop:p,paddingBottom:m}),o&&o.apply(i)}})):(e.css(i,{position:h,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),r(i,{height:g,marginTop:d,marginBottom:f,paddingTop:p,paddingBottom:m},{duration:c,complete:function(){o&&o.apply(i)}}))}else{var y=e.css(i,"margin-left"),v=e.css(i,"margin-right"),x=e.css(i,"padding-left"),k=e.css(i,"padding-right"),b=e.css(i,"width");l?(e.css(i,{visibility:"visible",overflow:"hidden",width:b,marginLeft:y,marginRight:v,paddingLeft:x,paddingRight:k}),r(i,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:c,queue:!1,complete:function(){e.hide(i),e.css(i,{visibility:"visible",overflow:"hidden",width:b,marginLeft:y,marginRight:v,paddingLeft:x,paddingRight:k}),o&&o.apply(i)}})):(e.css(i,{position:h,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),r(i,{width:b,marginLeft:y,marginRight:v,paddingLeft:x,paddingRight:k},{duration:c,complete:function(){o&&o.apply(i)}}))}return this}}),define("skylark-domx-transits/slideDown",["./transits","./slide"],function(t,e){return t.slideDown=function(t,n,r){return e(t,{direction:"down",duration:n},r)}}),define("skylark-domx-transits/slideUp",["./transits","./slide"],function(t,e){return t.slideUp=function(t,n,r){return e(t,{direction:"up",duration:n},r)}}),define("skylark-domx-transits/slideToggle",["skylark-langx/langx","skylark-domx-geom","./transits","./slideDown","./slideUp"],function(t,e,n,r,i){return n.slideToggle=function(t,n,s){0==e.height(t)?r(t,n,s):i(t,n,s);return this}}),define("skylark-domx-transits/throb",["skylark-langx/langx","skylark-domx-styler","skylark-domx-noder","./transits","./transit"],function(t,e,n,r,i){return r.throb=function(t,r){(r=r||{}).text,r.style;var i,s=r.time,o=r.callback,a=n.createElement("div",{class:r.className||"throbber"}),l=function(){i&&(clearTimeout(i),i=null),a&&(n.remove(a),a=null)};r.style&&e.css(a,r.style);var u=r.content||'<span class="throb"></span>';n.html(a,u),t.appendChild(a),s&&(i=setTimeout(function(){l(),o&&o()},s));return{throbber:a,remove:l,update:function(t){t&&t.text&&a&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-transits/toggle",["skylark-langx/langx","skylark-domx-styler","./transits","./show","./hide"],function(t,e,n,r,i){return n.toggle=function(t,n,s){e.isInvisible(t)?r(t,n,s):i(t,n,s);return this}}),define("skylark-domx-transits/main",["./transits","skylark-domx-velm","skylark-domx-query","./transit","./bounce","./emulateTransitionEnd","./explode","./fadeIn","./fadeOut","./fade","./fadeToggle","./hide","./pulsate","./shake","./show","./slide","./slideDown","./slideToggle","./slideUp","./throb","./toggle"],function(t,e,n){return e.delegate(["transit","emulateTransitionEnd","fadeIn","fadeOut","fade","fadeToggle","hide","scrollToTop","slideDown","slideToggle","slideUp","show","toggle"],t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.transit=n.wraps.wrapper_every_act(t.transit,t),n.fn.emulateTransitionEnd=n.wraps.wrapper_every_act(t.emulateTransitionEnd,t),n.fn.show=n.wraps.wrapper_every_act(t.show,t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.toogle=n.wraps.wrapper_every_act(t.toogle,t),n.fn.fadeTo=n.wraps.wrapper_every_act(t.fadeTo,t),n.fn.fadeIn=n.wraps.wrapper_every_act(t.fadeIn,t),n.fn.fadeOut=n.wraps.wrapper_every_act(t.fadeOut,t),n.fn.fadeToggle=n.wraps.wrapper_every_act(t.fadeToggle,t),n.fn.slideDown=n.wraps.wrapper_every_act(t.slideDown,t),n.fn.slideToggle=n.wraps.wrapper_every_act(t.slideToggle,t),n.fn.slideUp=n.wraps.wrapper_every_act(t.slideUp,t),t}),define("skylark-domx-transits",["skylark-domx-transits/main"],function(t){return t}),define("skylark-domx-fx/bounce",["skylark-domx-transits","./fx"],function(t,e){return e.bounce=t.bounce}),define("skylark-domx-fx/emulateTransitionEnd",["skylark-domx-transits","./fx"],function(t,e){return e.emulateTransitionEnd=t.emulateTransitionEnd}),define("skylark-domx-fx/explode",["skylark-domx-transits","./fx"],function(t,e){return e.explode=t.explode}),define("skylark-domx-fx/fadeIn",["skylark-domx-transits","./fx"],function(t,e){return e.fadeIn=t.fadeIn}),define("skylark-domx-fx/fadeOut",["skylark-domx-transits","./fx"],function(t,e){return e.fadeOut=t.fadeOut}),define("skylark-domx-fx/fade",["skylark-domx-transits","./fx"],function(t,e){return e.fade=t.fade}),define("skylark-domx-fx/fadeToggle",["skylark-domx-transits","./fx"],function(t,e){return e.fadeToggle=t.fadeToggle}),define("skylark-domx-fx/hide",["skylark-domx-transits","./fx"],function(t,e){return e.hide=t.hide}),define("skylark-domx-fx/pulsate",["skylark-domx-transits","./fx"],function(t,e){return e.pulsate=t.pulsate}),define("skylark-domx-fx/shake",["skylark-domx-transits","./fx"],function(t,e){return e.shake=t.shake}),define("skylark-domx-fx/show",["skylark-domx-transits","./fx"],function(t,e){return e.show=t.show}),define("skylark-domx-fx/slide",["skylark-domx-transits","./fx"],function(t,e){return e.slide=function(t,n,r){langx.isFunction(n)&&(r=n,n={});var i=(n=n||{}).direction||"down",s="up"===i||"left"===i,o="up"===i||"down"===i,a=n.duration||e.speeds.normal,l=styler.css(t,"position");if(s){if(styler.isInvisible(t))return this}else styler.show(t),styler.css(t,{position:"absolute",visibility:"hidden"});if(o){var u=styler.css(t,"margin-top"),c=styler.css(t,"margin-bottom"),h=styler.css(t,"padding-top"),d=styler.css(t,"padding-bottom"),f=styler.css(t,"height");s?(styler.css(t,{visibility:"visible",overflow:"hidden",height:f,marginTop:u,marginBottom:c,paddingTop:h,paddingBottom:d}),animate(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:a,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:"visible",overflow:"hidden",height:f,marginTop:u,marginBottom:c,paddingTop:h,paddingBottom:d}),r&&r.apply(t)}})):(styler.css(t,{position:l,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),animate(t,{height:f,marginTop:u,marginBottom:c,paddingTop:h,paddingBottom:d},{duration:a,complete:function(){r&&r.apply(t)}}))}else{var p=styler.css(t,"margin-left"),m=styler.css(t,"margin-right"),g=styler.css(t,"padding-left"),y=styler.css(t,"padding-right"),v=styler.css(t,"width");s?(styler.css(t,{visibility:"visible",overflow:"hidden",width:v,marginLeft:p,marginRight:m,paddingLeft:g,paddingRight:y}),animate(t,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:a,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:"visible",overflow:"hidden",width:v,marginLeft:p,marginRight:m,paddingLeft:g,paddingRight:y}),r&&r.apply(t)}})):(styler.css(t,{position:l,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),animate(t,{width:v,marginLeft:p,marginRight:m,paddingLeft:g,paddingRight:y},{duration:a,complete:function(){r&&r.apply(t)}}))}return this}}),define("skylark-domx-fx/slideDown",["skylark-domx-transits","./fx"],function(t,e){return e.slideDown=function(t,e,n){return slide(t,{direction:"down",duration:e},n)}}),define("skylark-domx-fx/slideToggle",["skylark-domx-transits","./fx"],function(t,e){return e.slideToggle=function(t,e,n){0==geom.height(t)?slideDown(t,e,n):slideUp(t,e,n);return this}}),define("skylark-domx-fx/slideUp",["skylark-domx-transits","./fx"],function(t,e){return e.slideUp=function(t,e,n){return slide(t,{direction:"up",duration:e},n)}}),define("skylark-domx-fx/throb",["skylark-domx-transits","./fx"],function(t,e){return e.throb=function(t,e){(e=e||{}).text,e.style;var n,r=e.time,i=e.callback,s=noder.createElement("div",{class:e.className||"throbber"}),o=function(){n&&(clearTimeout(n),n=null),s&&(noder.remove(s),s=null)};e.style&&styler.css(s,e.style);var a=e.content||'<span class="throb"></span>';noder.html(s,a),t.appendChild(s),r&&(n=setTimeout(function(){o(),i&&i()},r));return{throbber:s,remove:o,update:function(t){t&&t.text&&s&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-fx/toggle",["skylark-domx-transits","./fx"],function(t,e){return e.toggle=function(t,e,n){styler.isInvisible(t)?show(t,e,n):hide(t,e,n);return this}}),define("skylark-domx-fx/main",["./fx","./animate","./bounce","./emulateTransitionEnd","./explode","./fadeIn","./fadeOut","./fade","./fadeToggle","./hide","./pulsate","./shake","./show","./slide","./slideDown","./slideToggle","./slideUp","./throb","./toggle"],function(t){return t}),define("skylark-domx-fx",["skylark-domx-fx/main"],function(t){return t}),define("skylark-jquery/core",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-forms","skylark-domx-fx","skylark-domx-styler","skylark-domx-query","skylark-langx-scripter"],function(t,e,n,r,i,s,o,a,l,u,c,h){var d,f=Array.prototype.filter;Array.prototype.slice;return(d=c).fn.jquery="2.2.0",d.browser=n,d.camelCase=e.camelCase,d.cleanData=function(t){for(var e,n=0;void 0!==(e=t[n]);n++)i.cleanData(e)},d.removeData=function(t,e){i.removeData(t,e)},d.each=e.each,d.extend=e.extend,d.grep=function(t,e){return f.call(t,e)},d.attr=function(t,e){return i.attr(t,e)},d.isArray=e.isArray,d.isEmptyObject=e.isEmptyObject,d.isFunction=e.isFunction,d.isWindow=e.isWindow,d.isPlainObject=e.isPlainObject,d.isNumeric=e.isNumber,d.inArray=e.inArray,d.makeArray=e.makeArray,d.map=e.map,d.noop=function(){},d.parseJSON=window.JSON.parse,d.proxy=e.proxy,d.trim=e.trim,d.type=e.type,d.fn.extend=function(t){e.mixin(d.fn,t)},function(t){t.Event=function(t,n){if(e.isString(t)){var r=t;return s.create(r,n)}return s.proxy(t,n)},t.event={},t.event.special=s.special,t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this},t.fn.triggerHandler=t.fn.trigger,t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.bind=function(t,e,n,r){return this.on(t,e,n,r)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.ready=function(t){return s.ready(t),this},t.fn.stop=function(){return this},t.fn.moveto=function(t,e){return this.animate({left:t+"px",top:e+"px"},.4)},t.ready=s.ready,t.on=s.on,t.off=s.off}(c),function(t){t.uuid=0,t.support=n.support,t.expr={},t.expr[":"]=t.expr.pseudos=t.expr.filters=o.pseudos,t.expr.createPseudo=function(t){return t},t.cssHooks=u.cssHooks,t.contains=r.contains,t.css=u.css,t.data=i.data,t.fx=l,t.fx.step={},t.speed=function(e,n,r){var i=e&&"object"==typeof e?t.extend({},e):{complete:r||!r&&n||t.isFunction(e)&&e,duration:e,easing:r&&n||n&&!t.isFunction(n)&&n};return t.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in t.fx.speeds?i.duration=t.fx.speeds[i.duration]:i.duration=t.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){t.isFunction(i.old)&&i.old.call(this),i.queue&&t.dequeue(this,i.queue)},i},t.easing={},t.offset={},t.offset.setOffset=function(e,n,r){var i=t.css(e,"position");"static"===i&&(e.style.position="relative");var s,o,a=t(e),l=a.offset(),u=t.css(e,"top"),c=t.css(e,"left"),h=("absolute"===i||"fixed"===i)&&t.inArray("auto",[u,c])>-1,d={},f={};h?(f=a.position(),s=f.top,o=f.left):(s=parseFloat(u)||0,o=parseFloat(c)||0),t.isFunction(n)&&(n=n.call(e,r,l)),null!=n.top&&(d.top=n.top-l.top+s),null!=n.left&&(d.left=n.left-l.left+o),"using"in n?n.using.call(e,d):a.css(d)},t._data=function(t,e){return t.hasAttribute?i.data(t,e):{}};var e=t.fn.text;t.fn.text=function(t){var n=e.apply(this,arguments);return void 0===n&&(n=""),n},t.fn.pos=t.fn.position}(c),c.parseHTML=function(t){return r.createFragment(t)},c.uniqueSort=c.unique=e.uniq,c.skylark=t,window.jQuery=window.$=c}),define("skylark-langx-emitter/Emitter",["skylark-langx-events"],function(t){return t.Emitter}),define("skylark-langx-emitter/Evented",["./Emitter"],function(t){return t}),define("skylark-langx-urls/urls",["skylark-langx-ns"],function(t){return t.attach("langx.urls",{})}),define("skylark-langx-urls/parseUrl",["./urls"],function(t){"use strict";return t.parseUrl=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"];let n=document.createElement("a");n.href=t;const r=""===n.host&&"file:"!==n.protocol;let i;r&&((i=document.createElement("div")).innerHTML=`<a href="${t}"></a>`,n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(i));const s={};for(let t=0;t<e.length;t++)s[e[t]]=n[e[t]];"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,""));"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,""));s.protocol||(s.protocol=window.location.protocol);r&&document.body.removeChild(i);return s}}),define("skylark-langx-urls/isCrossOrigin",["./urls","./parseUrl"],function(t,e){"use strict";return t.isCrossOrigin=function(t,n=window.location){const r=e(t);return(":"===r.protocol?n.protocol:r.protocol)+r.host!==n.protocol+n.host}}),define("skylark-net-http/http",["skylark-langx-ns/ns"],function(t){return t.attach("net.http",{})}),define("skylark-net-http/Xhr",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-funcs","skylark-langx-async/Deferred","skylark-langx-emitter/Evented","skylark-langx-urls/isCrossOrigin","./http"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(t){return a||(a=document.createElement("a")),a.href=t,a.href},a,Xhr=function(){var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{}};function mimeToDataType(t){if(t&&(t=t.split(";",2)[0]),t){if(t==htmlType)return"html";if(t==jsonType)return"json";if(scriptTypeRE.test(t))return"script";if(xmlTypeRE.test(t))return"xml"}return"text"}function appendQuery(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&"string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||("string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(t,e,n,r){var i,s=isArray(e),o=isPlainObject(e);each(e,function(e,a){i=type(a),r&&(e=n?r:r+"["+(o||"object"==i||"array"==i?e:"")+"]"),!r&&s?t.add(a.name,a.value):"array"==i||!n&&"object"==i?serialize(t,a,n,e):t.add(e,a)})}var param=function(t,e){var n=[];return n.add=function(t,e){isFunction(e)&&(e=e()),null==e&&(e=""),this.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},serialize(n,t,e),n.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),"blob"!=dataType&&"arraybuffer"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type"));try{"script"==dataType?eval(xhr.responseText):result="xml"==dataType?xhr.responseXML:"json"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):"blob"==dataType?xhr.response:"arraybuffer"==dataType?xhr.response:xhr.responseText}catch(t){error=t}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||isCrossOrigin(url)||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var t=this._,e=t.xhr;e&&e.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type="GET",this._request(t)},post:function(t){return(t=t||{}).type="POST",this._request(t)},patch:function(t){return(t=t||{}).type="PATCH",this._request(t)},put:function(t){return(t=t||{}).type="PUT",this._request(t)},del:function(t){return(t=t||{}).type="DELETE",this._request(t)},init:function(t){this._={options:t||{}}}});return["request","get","post","put","del","patch"].forEach(function(t){Xhr[t]=function(e,n){var r=new Xhr({url:e});return r[t](n)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define("skylark-jquery/ajax",["skylark-langx/langx","skylark-net-http/Xhr","./core"],function(t,e,n){var r=0;function i(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function s(t,e,r,i){return n.isFunction(t)?(i=e,r=t,e=void 0,t=void 0):n.isFunction(e)&&(i=r,r=e,e=void 0),n.isFunction(r)||(i=r,r=void 0),{url:t,data:e,success:r,dataType:i}}n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){n.fn[e]=function(t){return this.on(e,t)}}),n.ajaxJSONP=function(e){var s,o,a=new t.Deferred,l=e.jsonpCallback,u=(n.isFunction(l)?l():l)||"jsonp"+ ++r,c=document.createElement("script"),h=window[u],d=function(t){n(c).triggerHandler("error",t||"abort")},f={abort:d};for(var p in e.data)e.url=i(e.url,p+"="+e.data[p]);return n(c).on("load error",function(t,e){clearTimeout(o),n(c).off().remove(),"error"!=t.type&&s?a.resolve(s[0],200,f):a.reject(t),window[u]=h,s&&n.isFunction(h)&&h(s[0]),h=s=void 0}),window[u]=function(){s=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+u),document.head.appendChild(c),e.timeout>0&&(o=setTimeout(function(){d("timeout")},e.timeout)),a},n.ajaxSettings={processData:!0},n.ajax=function(r,s){if(r?s?s.url=r:s=t.isString(r)?{url:r}:r:s={url:"./"},"jsonp"==(s=t.mixin({},n.ajaxSettings,s)).dataType){var o=/\?.+=\?/.test(s.url);return o||(s.url=i(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),n.ajaxJSONP(s)}var a=e.request(s.url,s);return(a=a.then(function(t,e,r){n(document).trigger("ajaxSucess"),s.success&&s.success.apply(this,arguments);s.complete&&s.complete.apply(this,arguments);return t},function(){n(document).trigger("ajaxError"),s.error&&s.error.apply(this,arguments)})).success=a.done,a.error=a.fail,a.complete=a.always,a},n.get=function(){return n.ajax(s.apply(null,arguments))},n.post=function(){var t=s.apply(null,arguments);return t.type="POST",n.ajax(t)},n.getJSON=function(){var t=s.apply(null,arguments);return t.dataType="json",n.ajax(t)};var o=n.fn.load;function a(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,s=e.toLowerCase().match(l)||[];if(jQuery.isFunction(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}n.fn.load=function(t,e,r){if("string"!=typeof t&&o)return o.apply(this,arguments);if(!this.length)return this;var i,a=this,l=s(t,e,r),u=l.url&&l.url.split(/\s/),c=l.success;return u&&u.length>1&&(l.url=u[0],i=u[1]),l.data&&"object"==typeof l.data&&(l.type="POST"),l.success=function(t){a.html(i?n("<div>").html(t.replace(rscript,"")).find(i):t),c&&c.apply(a,arguments)},n.ajax(l),this},n.param=e.param;var l=/\S+/g;return n.ajaxPrefilter=a({}),n.ajaxTransport=a({}),n.ajaxSetup=function(n,r){t.mixin(e.defaultOptions,n,r)},n.getScript=function(t,e){return n.get(t,void 0,e,"script")},n}),define("skylark-jquery/callbacks",["./core"],function(t){return t.Callbacks=function(e){var n,r,i,s,o,a,l=[],u=!(e=t.extend({},e)).once&&[],c=function(t){for(n=e.memory&&t,r=!0,a=s||0,s=0,o=l.length,i=!0;l&&a<o;++a)if(!1===l[a].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:h.disable())},h={add:function(){if(l){var r=l.length,a=function(n){t.each(n,function(t,n){"function"==typeof n?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&a(n)})};a(arguments),i?o=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&t.each(arguments,function(e,n){for(var r;(r=t.inArray(n,l,r))>-1;)l.splice(r,1),i&&(r<=o&&--o,r<=a&&--a)}),this},has:function(e){return!(!l||!(e?t.inArray(e,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||r&&!u||(e=[t,(e=e||[]).slice?e.slice():e],i?u.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments)},fired:function(){return!!r}};return h},t}),define("skylark-jquery/deferred",["./core","skylark-langx/langx"],function(t,e){return t.Deferred=function(){var t=new e.Deferred,n={promise:function(){return t.promise}};return["resolve","resolveWith","reject","rejectWith","notify","then","done","fail","progress","always","state"].forEach(function(e){n[e]=function(){var r=t[e].apply(t,arguments);return r==t&&(r=n),r}}),n},t.when=function(){var t=e.Deferred.all(e.makeArray(arguments)),n=t.then;return t.then=function(e,r){return n.call(t,function(t){return e&&e.apply(null,t)},r)},t},t}),define("skylark-jquery/queue",["skylark-langx/langx","./core","./callbacks"],function(t,e){var n="Sky"+("1.0"+Math.random()).replace(/\D/g,""),r=/\S+/g,i=[].push;function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n+Math.random()}s.uid=1,s.accepts=function(t){return!t.nodeType||(1===t.nodeType||9===t.nodeType)},s.prototype={key:function(t){if(!s.accepts(t))return 0;var n={},r=t[this.expando];if(!r){r=s.uid++;try{n[this.expando]={value:r},Object.defineProperties(t,n)}catch(i){n[this.expando]=r,e.extend(t,n)}}return this.cache[r]||(this.cache[r]={}),r},set:function(t,n,r){var i,s=this.key(t),o=this.cache[s];if("string"==typeof n)o[n]=r;else if(e.isEmptyObject(o))e.extend(this.cache[s],n);else for(i in n)o[i]=n[i];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,n,r){var i;return void 0===n||n&&"string"==typeof n&&void 0===r?void 0!==(i=this.get(t,n))?i:this.get(t,e.camelCase(n)):(this.set(t,n,r),void 0!==r?r:n)},remove:function(t,n){var i,s,o,a=this.key(t),l=this.cache[a];if(void 0===n)this.cache[a]={};else{e.isArray(n)?s=n.concat(n.map(e.camelCase)):(o=e.camelCase(n),s=n in l?[n,o]:(s=o)in l?[s]:s.match(r)||[]),i=s.length;for(;i--;)delete l[s[i]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var o=new s;return e.extend(e,{queue:function(t,n,r){var i;if(t)return n=(n||"fx")+"queue",i=o.get(t,n),r&&(!i||e.isArray(r)?i=o.access(t,n,e.makeArray(r)):i.push(r)),i||[]},dequeue:function(t,n){n=n||"fx";var r=e.queue(t,n),i=r.length,s=r.shift(),o=e._queueHooks(t,n);"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===n&&r.unshift("inprogress"),delete o.stop,s.call(t,function(){e.dequeue(t,n)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,n){var r=n+"queueHooks";return o.get(t,r)||o.access(t,r,{empty:e.Callbacks("once memory").add(function(){o.remove(t,[n+"queue",r])})})},makeArray:function(t,n){var r=n||[];return null!=t&&(!function(t){var n=t.length,r=e.type(t);if(e.isWindow(t))return!1;if(1===t.nodeType&&n)return!0;return"array"===r||"function"!==r&&(0===n||"number"==typeof n&&n>0&&n-1 in t)}(Object(t))?i.call(r,t):e.merge(r,"string"==typeof t?[t]:t)),r},merge:function(t,e){var n=e.length,r=t.length,i=0;if("number"==typeof n)for(;i<n;i++)t[r++]=e[i];else for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t}}),e.extend(e.fn,{queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),arguments.length<r?e.queue(this[0],t):void 0===n?this:this.each(function(){var r=e.queue(this,t,n);e._queueHooks(this,t),"fx"===t&&"inprogress"!==r[0]&&e.dequeue(this,t)})},dequeue:function(t){return this.each(function(){e.dequeue(this,t)})},delay:function(t,n){return t=e.fx&&e.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var r,i=1,s=e.Deferred(),a=this,l=this.length,u=function(){--i||s.resolveWith(a,[a])};for("string"!=typeof t&&(n=t,t=void 0),t=t||"fx";l--;)(r=o.get(a[l],t+"queueHooks"))&&r.empty&&(i++,r.empty.add(u));return u(),s.promise(n)}}),e}),define("skylark-domx-plugins-base/plugins",["skylark-langx-ns"],function(t){"use strict";return t.attach("domx.plugins",{pluginKlasses:{},shortcuts:{}})}),define("skylark-domx-plugins-base/plugin",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-funcs","skylark-langx-events/Emitter","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-query","skylark-domx-velm","./plugins"],function(t,e,n,r,i,s,o,a,l,u,c,h,d,f,p){"use strict";Array.prototype.slice,Array.prototype.concat;function m(t){return t.hasOwnProperty("superclass")?t.superclass:Object.getPrototypeOf(t)}var g=i.inherit({klassName:"Plugin",_construct:function(t,e){this._elm=t,this._initOptions(e)},_initOptions:function(t){var e=this.constructor,r=e.cache=e.hasOwnProperty("cache")?e.cache:{},i=r.defaults;if(!i){var s=[];do{if(s.unshift(e),e===g)break;e=m(e)}while(e);i=r.defaults={};for(var o=0;o<s.length;o++)(e=s[o]).prototype.hasOwnProperty("options")&&n.mixin(i,e.prototype.options,!0),e.hasOwnProperty("options")&&n.mixin(i,e.options,!0)}return Object.defineProperty(this,"options",{value:n.mixin({},i,t,!0)}),this.options},destroy:function(){this._destroy(),this.unlistenTo(),o.removeData(this._elm,this.pluginName)},_destroy:r.noop,_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},elmx:function(t){return t?f(t):(this._velm||(this._velm=f(this._elm)),this._velm)},$:function(t){return t?d(t):(this._$elm||(this._$elm=d(this._elm)),this._$elm)},option:function(t,e){var r,i,s,o=t;if(0===arguments.length)return n.mixin({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=n.mixin({},this.options[t]),s=0;s<r.length-1;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},getUID:function(t){t=t||"plugin";do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},elm:function(){return this._elm}});return p.Plugin=g}),define("skylark-domx-plugins-base/instantiate",["skylark-domx-data","./plugins","./plugin"],function(t,e,n){"use strict";var r=e.pluginKlasses;function i(e,n,i){var s=n.split(":"),o=s[1];n=s[0],o||(o=n);var a=t.data(e,o);if("instance"===i)return a;if("destroy"===i){if(!a)throw new Error("The plugin instance is not existed");a.destroy(),a=void 0}else if(a)i&&a.reset(i);else{if(void 0!==i&&"object"!=typeof i)throw new Error("The options must be a plain object");var l=r[n];a=new l(e,i),t.data(e,o,a)}return a}return n.instantiate=function(t,e){return i(t,this.prototype.pluginName,e)},e.instantiate=i}),define("skylark-domx-plugins-base/shortcutter",["skylark-langx-types","./plugins","./instantiate"],function(t,e,n){"use strict";var r=Array.prototype.slice;return e.shortcutter=function(e,i){return function(s,o){var a=n(s,e,"instance");if("instance"===o)return a||null;if(!a&&(a=n(s,e,"object"==typeof o&&o||{}),"string"!=typeof o))return this;if(o){var l=r.call(arguments,1);if(i)return i.apply(a,l);if("string"==typeof o){var u=o;if(!a)throw new Error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+u+"'");if(!t.isFunction(a[u])||"_"===u.charAt(0))throw new Error("no such method '"+u+"' for "+e+" plugin instance");l=r.call(l,1);var c=a[u].apply(a,l);return c==a&&(c=void 0),c}}}}}),define("skylark-domx-plugins-base/register",["skylark-langx-types","skylark-domx-query","skylark-domx-velm","./plugins","./shortcutter"],function(t,e,n,r,i){"use strict";var s=Array.prototype.slice,o=r.pluginKlasses,a=r.shortcuts;return r.register=function(r,l,u,c){var h=r.prototype.pluginName;if(o[h]=r,l){u&&t.isFunction(u)&&(c=u,u=null),u&&(h=h+":"+u);var d=a[l]=i(h,c);e.fn[l]=function(t){var e=this;if(this.length||"instance"!==t){var n=s.call(arguments);this.each(function(){var t=s.call(n);t.unshift(this);var r=d.apply(void 0,t);void 0!==r&&(e=r)})}else e=void 0;return e},n.partial(l,function(t){var e=d(this._elm,t);return void 0===e&&(e=this),e})}}}),define("skylark-domx-plugins-base/main",["skylark-domx-query","skylark-domx-velm","./plugins","./instantiate","./plugin","./register","./shortcutter"],function(t,e,n,r,i,s,o){"use strict";var a=Array.prototype.slice;return t.fn.plugin=function(t,e){var n,i=a.call(arguments,1),s=this;return this.each(function(){n=r.apply(s,[this,t].concat(i))}),n},e.partial("plugin",function(t,e){var n=a.call(arguments,1);return r.apply(this,[this._elm,t].concat(n))}),n}),define("skylark-domx-plugins-base",["skylark-domx-plugins-base/main"],function(t){return t}),define("skylark-jquery/JqueryPlugin",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx/langx","skylark-domx-data","skylark-domx-eventer","skylark-domx-plugins-base","skylark-domx-query"],function(t,e,n,r,i,s,o,a){var l=0,u=o.Plugin.inherit({klassName:"JqPlugin",pluginEventPrefix:"",options:{create:null},destroy:function(){this.overrided(),this.element.off(this.eventNamespace),this.bindings.off(this.eventNamespace)},_construct:function(t,e){t=a(t||this.defaultElement||this)[0],this.element=a(t),this.uuid=l++,this.eventNamespace="."+this.pluginName+this.uuid,this.bindings=a(),this.classesElementLookup={},this.hoverable=a(),this.focusable=a(),t!==this&&(i.data(t,this.pluginName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=a(t.style?t.ownerDocument:t.document||t),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.overrided(t,e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_initOptions:function(t){t=r.mixin(this._getCreateOptions(),t),this.overrided(t)},_getCreateOptions:function(){return{}},_getCreateEventData:r.noop,_super:function(){if(this.overrided)return this.overrided.apply(this,arguments)},_superApply:function(t){if(this.overrided)return this.overrided.apply(this,t)},_create:r.noop,_init:r.noop,_classes:function(t){var n=[],i=this;function s(e,s){var o,l;for(l=0;l<e.length;l++)o=i.classesElementLookup[e[l]]||a(),t.add?(t.element.each(function(t,e){var n=r.map(i.classesElementLookup,function(t){return t}).some(function(t){return a(t).is(e)});n||i._on(a(e),{remove:"_untrackClassesElement"})}),o=a(r.uniq(o.get().concat(t.element.get())))):o=a(o.not(t.element).get()),i.classesElementLookup[e[l]]=o,n.push(e[l]),s&&t.classes[e[l]]&&n.push(t.classes[e[l]])}return(t=e.mixin({element:this.element,classes:this.options.classes||{}},t)).keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var e=this;r.each(e.classesElementLookup,function(r,i){-1!==n.inArray(t.target,i)&&(e.classesElementLookup[r]=a(i.not(t.target).get()))}),this._off(a(t.target))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof t||null===t,s={extra:i?e:n,keys:i?t:e,element:i?this.element:t,add:r};return s.element.toggleClass(this._classes(s),r),this},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=a(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(e,r){function o(){if(t||!0!==s.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||a.guid++);var l=e.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+s.eventNamespace,c=l[2];c?i.on(u,c,o):n.on(u,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=a(this.bindings.not(t).get()),this.focusable=a(this.focusable.not(t).get()),this.hoverable=a(this.hoverable.not(t).get())},_trigger:function(e,n,r){var i,o,a=this.options[e];if(r=r||{},(n=s.proxy(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})}});return u}),define("skylark-jquery/widget",["skylark-langx/langx","skylark-domx-plugins-base","./core","./JqueryPlugin"],function(t,e,n,r){var i,s=Array.prototype.hasOwnProperty,o=Array.prototype.slice;return n.cleanData=(i=n.cleanData,function(t){var e,r,s;for(s=0;null!=(r=t[s]);s++)(e=n._data(r,"events"))&&e.remove&&n(r).triggerHandler("remove");i(t)}),n.widget=function(t,r,i){var s,o,a=t.split(".")[0];t=t.split(".")[1];var l=a+"-"+t;i||(i=r,r=n.Widget),n.isArray(i)&&(i=n.extend.apply(null,[{}].concat(i))),n.expr.pseudos[l.toLowerCase()]=function(t){return!!n.data(t,l)},n[a]=n[a]||{},s=n[a][t];var u=r.prototype,c={};for(var h in i){var d=i[h];n.isPlainObject(d)?c[h]=n.isPlainObject(u[h])?n.widget.extend({},u[h],d):n.widget.extend({},d):c[h]=d}var f=n.widget.extend({widgetEventPrefix:s&&r.prototype.widgetEventPrefix||t},{options:r.prototype.options},c,{name:l,namespace:a,widgetName:t,pluginName:"jqueryui."+(a?a+".":"")+t,widgetFullName:l});return o=n[a][t]=r.inherit(f),n.extend(o,s,{version:i.version,_proto:f,_childConstructors:[]}),s?(n.each(s._childConstructors,function(t,e){var r=e.prototype;n.widget(r.namespace+"."+r.widgetName,o,e._proto)}),delete s._childConstructors):r._childConstructors&&r._childConstructors.push(o),e.register(o,t,l),o},n.widget.extend=function(t){for(var e,r,i=o.call(arguments,1),a=0,l=i.length;a<l;a++)for(e in i[a])r=i[a][e],s.call(i[a],e)&&void 0!==r&&(n.isPlainObject(r)?t[e]=n.isPlainObject(t[e])?n.widget.extend({},t[e],r):n.widget.extend({},r):t[e]=r);return t},n.Widget=r.inherit({widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},widget:function(){return this.element},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,r,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(r=n(i.get()),this._removeClass(i,e),r.addClass(this._classes({element:r,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(n(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(n(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-focus")}})}}),n.Widget._childConstructors=[],n.each({show:"fadeIn",hide:"fadeOut"},function(t,e){n.Widget.prototype["_"+t]=function(r,i,s){var o;"string"==typeof i&&(i={effect:i});var a=i?!0===i||"number"==typeof i?e:i.effect||e:t;"number"==typeof(i=i||{})&&(i={duration:i}),o=!n.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&n.effects&&n.effects.effect[a]?r[t](i):a!==t&&r[a]?r[a](i.duration,i.easing,s):r.queue(function(e){n(this)[t](),s&&s.call(r[0]),e()})}}),n.widget}),define("skylark-jquery/main",["./core","./ajax","./callbacks","./deferred","./queue","./JqueryPlugin","./widget"],function(t){return t}),define("skylark-jquery",["skylark-jquery/main"],function(t){return t}),define("skylark-lightgallery/light-gallery",["skylark-jquery"],function(t){"use strict";var e={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,ariaLabelledby:"",ariaDescribedby:"",closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1,supportLegacyBrowser:!0};function n(n,r){if(this.el=n,this.$el=t(n),this.s=t.extend({},e,r),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBarTimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=t(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(t(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}return n.prototype.init=function(){var e=this;e.s.preload>e.$items.length&&(e.s.preload=e.$items.length);var n=window.location.hash;n.indexOf("lg="+this.s.galleryId)>0&&(e.index=parseInt(n.split("&slide=")[1],10),t("body").addClass("lg-from-hash"),t("body").hasClass("lg-on")||(setTimeout(function(){e.build(e.index)}),t("body").addClass("lg-on"))),e.s.dynamic?(e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||0,t("body").hasClass("lg-on")||setTimeout(function(){e.build(e.index),t("body").addClass("lg-on")})):e.$items.on("click.lgcustom",function(n){try{n.preventDefault(),n.preventDefault()}catch(t){n.returnValue=!1}e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||e.$items.index(this),t("body").hasClass("lg-on")||(e.build(e.index),t("body").addClass("lg-on"))})},n.prototype.build=function(e){var n=this;n.structure(),t.each(t.fn.lightGallery.modules,function(e){n.modules[e]=new t.fn.lightGallery.modules[e](n.el)}),n.slide(e,!1,!1,!1),n.s.keyPress&&n.keyPress(),n.$items.length>1?(n.arrow(),setTimeout(function(){n.enableDrag(),n.enableSwipe()},50),n.s.mousewheel&&n.mousewheel()):n.$slide.on("click.lg",function(){n.$el.trigger("onSlideClick.lg")}),n.counter(),n.closeGallery(),n.$el.trigger("onAfterOpen.lg"),n.s.hideBarsDelay>0&&n.$outer.on("mousemove.lg click.lg touchstart.lg",function(){n.$outer.removeClass("lg-hide-items"),clearTimeout(n.hideBarTimeout),n.hideBarTimeout=setTimeout(function(){n.$outer.addClass("lg-hide-items")},n.s.hideBarsDelay)}),n.$outer.trigger("mousemove.lg")},n.prototype.structure=function(){var e,n="",r="",i=0,s="",o=this;for(t("body").append('<div class="lg-backdrop"></div>'),t(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),i=0;i<this.$items.length;i++)n+='<div class="lg-item"></div>';this.s.controls&&this.$items.length>1&&(r='<div class="lg-actions"><button type="button" aria-label="Previous slide" class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button type="button" aria-label="Next slide" class="lg-next lg-icon">'+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(s='<div role="status" aria-live="polite" class="lg-sub-html"></div>');var a=this.s.ariaLabelledby?'aria-labelledby="'+this.s.ariaLabelledby+'"':"",l=this.s.ariaDescribedby?'aria-describedby="'+this.s.ariaDescribedby+'"':"";if(e='<div tabindex="-1" aria-modal="true" '+a+" "+l+' role="dialog" class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+n+'</div><div class="lg-toolbar lg-group"><button type="button" aria-label="Close gallery" class="lg-close lg-icon"></button></div>'+r+s+"</div></div>",t("body").append(e),this.$outer=t(".lg-outer"),this.$outer.focus(),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),o.setTop(),t(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){o.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var u=this.$outer.find(".lg-inner");u.css("transition-timing-function",this.s.cssEasing),u.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){t(".lg-backdrop").addClass("in")}),setTimeout(function(){o.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" aria-label="Download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=t(window).scrollTop()},n.prototype.setTop=function(){if("100%"!==this.s.height){var e=t(window).height(),n=(e-parseInt(this.s.height,10))/2,r=this.$outer.find(".lg");e>=parseInt(this.s.height,10)?r.css("top",n+"px"):r.css("top","0px")}},n.prototype.doCss=function(){return!!function(){var t=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],e=document.documentElement,n=0;for(n=0;n<t.length;n++)if(t[n]in e.style)return!0}()},n.prototype.isVideo=function(t,e){var n;if(n=this.s.dynamic?this.s.dynamicEl[e].html:this.$items.eq(e).attr("data-html"),!t)return n?{html5:!0}:(console.error("lightGallery :- data-src is not provided on slide item "+(e+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html"),!1);var r=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),i=t.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)/i),s=t.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),o=t.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return r?{youtube:r}:i?{vimeo:i}:s?{dailymotion:s}:o?{vk:o}:void 0},n.prototype.counter=function(){this.s.counter&&t(this.s.appendCounterTo).append('<div id="lg-counter" role="status" aria-live="polite"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},n.prototype.addHtml=function(e){var n,r,i=null;if(this.s.dynamic?this.s.dynamicEl[e].subHtmlUrl?n=this.s.dynamicEl[e].subHtmlUrl:i=this.s.dynamicEl[e].subHtml:(r=this.$items.eq(e)).attr("data-sub-html-url")?n=r.attr("data-sub-html-url"):(i=r.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!i&&(i=r.attr("title")||r.find("img").first().attr("alt"))),!n)if(void 0!==i&&null!==i){var s=i.substring(0,1);"."!==s&&"#"!==s||(i=this.s.subHtmlSelectorRelative&&!this.s.dynamic?r.find(i).html():t(i).html())}else i="";".lg-sub-html"===this.s.appendSubHtmlTo?n?this.$outer.find(this.s.appendSubHtmlTo).load(n):this.$outer.find(this.s.appendSubHtmlTo).html(i):n?this.$slide.eq(e).load(n):this.$slide.eq(e).append(i),void 0!==i&&null!==i&&(""===i?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[e])},n.prototype.preload=function(t){var e=1,n=1;for(e=1;e<=this.s.preload&&!(e>=this.$items.length-t);e++)this.loadContent(t+e,!1,0);for(n=1;n<=this.s.preload&&!(t-n<0);n++)this.loadContent(t-n,!1,0)},n.prototype.loadContent=function(e,n,r){var i,s,o,a,l,u,c,h=this,d=!1,f=function(e){for(var n=[],r=[],i=0;i<e.length;i++){var o=e[i].split(" ");""===o[0]&&o.splice(0,1),r.push(o[0]),n.push(o[1])}for(var a=t(window).width(),l=0;l<n.length;l++)if(parseInt(n[l],10)>a){s=r[l];break}};if(h.s.dynamic){if(h.s.dynamicEl[e].poster&&(d=!0,o=h.s.dynamicEl[e].poster),u=h.s.dynamicEl[e].html,s=h.s.dynamicEl[e].src,c=h.s.dynamicEl[e].alt,h.s.dynamicEl[e].responsive){var p=h.s.dynamicEl[e].responsive.split(",");f(p)}a=h.s.dynamicEl[e].srcset,l=h.s.dynamicEl[e].sizes}else{var m=h.$items.eq(e);if(m.attr("data-poster")&&(d=!0,o=m.attr("data-poster")),u=m.attr("data-html"),s=m.attr("href")||m.attr("data-src"),c=m.attr("title")||m.find("img").first().attr("alt"),m.attr("data-responsive")){var g=m.attr("data-responsive").split(",");f(g)}a=m.attr("data-srcset"),l=m.attr("data-sizes")}var y=!1;h.s.dynamic?h.s.dynamicEl[e].iframe&&(y=!0):"true"===h.$items.eq(e).attr("data-iframe")&&(y=!0);var v=h.isVideo(s,e);if(!h.$slide.eq(e).hasClass("lg-loaded")){if(y)h.$slide.eq(e).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+h.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+s+'"  allowfullscreen="true"></iframe></div></div>');else if(d){var x="";x=v&&v.youtube?"lg-has-youtube":v&&v.vimeo?"lg-has-vimeo":"lg-has-html5",h.$slide.eq(e).prepend('<div class="lg-video-cont '+x+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+o+'" /></div></div>')}else v?(h.$slide.eq(e).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),h.$el.trigger("hasVideo.lg",[e,s,u])):(c=c?'alt="'+c+'"':"",h.$slide.eq(e).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" '+c+' src="'+s+'" /></div>'));if(h.$el.trigger("onAferAppendSlide.lg",[e]),i=h.$slide.eq(e).find(".lg-object"),l&&i.attr("sizes",l),a&&(i.attr("srcset",a),this.s.supportLegacyBrowser))try{picturefill({elements:[i[0]]})}catch(t){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}".lg-sub-html"!==this.s.appendSubHtmlTo&&h.addHtml(e),h.$slide.eq(e).addClass("lg-loaded")}h.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){var n=0;r&&!t("body").hasClass("lg-from-hash")&&(n=r),setTimeout(function(){h.$slide.eq(e).addClass("lg-complete"),h.$el.trigger("onSlideItemLoad.lg",[e,r||0])},n)}),v&&v.html5&&!d&&h.$slide.eq(e).addClass("lg-complete"),!0===n&&(h.$slide.eq(e).hasClass("lg-complete")?h.preload(e):h.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){h.preload(e)}))},n.prototype.slide=function(e,n,r,i){var s=this.$outer.find(".lg-current").index(),o=this;if(!o.lGalleryOn||s!==e){var a=this.$slide.length,l=o.lGalleryOn?this.s.speed:0;if(!o.lgBusy){var u,c,h;if(this.s.download)(u=o.s.dynamic?!1!==o.s.dynamicEl[e].downloadUrl&&(o.s.dynamicEl[e].downloadUrl||o.s.dynamicEl[e].src):"false"!==o.$items.eq(e).attr("data-download-url")&&(o.$items.eq(e).attr("data-download-url")||o.$items.eq(e).attr("href")||o.$items.eq(e).attr("data-src")))?(t("#lg-download").attr("href",u),o.$outer.removeClass("lg-hide-download")):o.$outer.addClass("lg-hide-download");if(this.$el.trigger("onBeforeSlide.lg",[s,e,n,r]),o.lgBusy=!0,clearTimeout(o.hideBarTimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){o.addHtml(e)},l),this.arrowDisable(e),i||(e<s?i="prev":e>s&&(i="next")),n)this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),a>2?(c=e-1,h=e+1,0===e&&s===a-1?(h=0,c=a-1):e===a-1&&0===s&&(h=0,c=a-1)):(c=0,h=1),"prev"===i?o.$slide.eq(h).addClass("lg-next-slide"):o.$slide.eq(c).addClass("lg-prev-slide"),o.$slide.eq(e).addClass("lg-current");else o.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===i?(this.$slide.eq(e).addClass("lg-prev-slide"),this.$slide.eq(s).addClass("lg-next-slide")):(this.$slide.eq(e).addClass("lg-next-slide"),this.$slide.eq(s).addClass("lg-prev-slide")),setTimeout(function(){o.$slide.removeClass("lg-current"),o.$slide.eq(e).addClass("lg-current"),o.$outer.removeClass("lg-no-trans")},50);o.lGalleryOn?(setTimeout(function(){o.loadContent(e,!0,0)},this.s.speed+50),setTimeout(function(){o.lgBusy=!1,o.$el.trigger("onAfterSlide.lg",[s,e,n,r])},this.s.speed)):(o.loadContent(e,!0,o.s.backdropDuration),o.lgBusy=!1,o.$el.trigger("onAfterSlide.lg",[s,e,n,r])),o.lGalleryOn=!0,this.s.counter&&t("#lg-counter-current").text(e+1)}o.index=e}},n.prototype.goToNextSlide=function(t){var e=this,n=e.s.loop;t&&e.$slide.length<3&&(n=!1),e.lgBusy||(e.index+1<e.$slide.length?(e.index++,e.$el.trigger("onBeforeNextSlide.lg",[e.index]),e.slide(e.index,t,!1,"next")):n?(e.index=0,e.$el.trigger("onBeforeNextSlide.lg",[e.index]),e.slide(e.index,t,!1,"next")):e.s.slideEndAnimatoin&&!t&&(e.$outer.addClass("lg-right-end"),setTimeout(function(){e.$outer.removeClass("lg-right-end")},400)))},n.prototype.goToPrevSlide=function(t){var e=this,n=e.s.loop;t&&e.$slide.length<3&&(n=!1),e.lgBusy||(e.index>0?(e.index--,e.$el.trigger("onBeforePrevSlide.lg",[e.index,t]),e.slide(e.index,t,!1,"prev")):n?(e.index=e.$items.length-1,e.$el.trigger("onBeforePrevSlide.lg",[e.index,t]),e.slide(e.index,t,!1,"prev")):e.s.slideEndAnimatoin&&!t&&(e.$outer.addClass("lg-left-end"),setTimeout(function(){e.$outer.removeClass("lg-left-end")},400)))},n.prototype.keyPress=function(){var e=this;this.$items.length>1&&t(window).on("keyup.lg",function(t){e.$items.length>1&&(37===t.keyCode&&(t.preventDefault(),e.goToPrevSlide()),39===t.keyCode&&(t.preventDefault(),e.goToNextSlide()))}),t(window).on("keydown.lg",function(t){!0===e.s.escKey&&27===t.keyCode&&(t.preventDefault(),e.$outer.hasClass("lg-thumb-open")?e.$outer.removeClass("lg-thumb-open"):e.destroy())})},n.prototype.arrow=function(){var t=this;this.$outer.find(".lg-prev").on("click.lg",function(){t.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){t.goToNextSlide()})},n.prototype.arrowDisable=function(t){!this.s.loop&&this.s.hideControlOnEnd&&(t+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),t>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},n.prototype.setTranslate=function(t,e,n){this.s.useLeft?t.css("left",e):t.css({transform:"translate3d("+e+"px, "+n+"px, 0px)"})},n.prototype.touchMove=function(e,n){var r=n-e;Math.abs(r)>15&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),r,0),this.setTranslate(t(".lg-prev-slide"),-this.$slide.eq(this.index).width()+r,0),this.setTranslate(t(".lg-next-slide"),this.$slide.eq(this.index).width()+r,0))},n.prototype.touchEnd=function(t){var e=this;"lg-slide"!==e.s.mode&&e.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){e.$outer.removeClass("lg-dragging"),t<0&&Math.abs(t)>e.s.swipeThreshold?e.goToNextSlide(!0):t>0&&Math.abs(t)>e.s.swipeThreshold?e.goToPrevSlide(!0):Math.abs(t)<5&&e.$el.trigger("onSlideClick.lg"),e.$slide.removeAttr("style")}),setTimeout(function(){e.$outer.hasClass("lg-dragging")||"lg-slide"===e.s.mode||e.$outer.removeClass("lg-slide")},e.s.speed+100)},n.prototype.enableSwipe=function(){var t=this,e=0,n=0,r=!1;t.s.enableSwipe&&t.doCss()&&(t.$slide.on("touchstart.lg",function(n){t.$outer.hasClass("lg-zoomed")||t.lgBusy||(n.preventDefault(),t.manageSwipeClass(),e=n.originalEvent.targetTouches[0].pageX)}),t.$slide.on("touchmove.lg",function(i){t.$outer.hasClass("lg-zoomed")||(i.preventDefault(),n=i.originalEvent.targetTouches[0].pageX,t.touchMove(e,n),r=!0)}),t.$slide.on("touchend.lg",function(){t.$outer.hasClass("lg-zoomed")||(r?(r=!1,t.touchEnd(n-e)):t.$el.trigger("onSlideClick.lg"))}))},n.prototype.enableDrag=function(){var e=this,n=0,r=0,i=!1,s=!1;e.s.enableDrag&&e.doCss()&&(e.$slide.on("mousedown.lg",function(r){e.$outer.hasClass("lg-zoomed")||e.lgBusy||t(r.target).text().trim()||(r.preventDefault(),e.manageSwipeClass(),n=r.pageX,i=!0,e.$outer.scrollLeft+=1,e.$outer.scrollLeft-=1,e.$outer.removeClass("lg-grab").addClass("lg-grabbing"),e.$el.trigger("onDragstart.lg"))}),t(window).on("mousemove.lg",function(t){i&&(s=!0,r=t.pageX,e.touchMove(n,r),e.$el.trigger("onDragmove.lg"))}),t(window).on("mouseup.lg",function(o){s?(s=!1,e.touchEnd(r-n),e.$el.trigger("onDragend.lg")):(t(o.target).hasClass("lg-object")||t(o.target).hasClass("lg-video-play"))&&e.$el.trigger("onSlideClick.lg"),i&&(i=!1,e.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},n.prototype.manageSwipeClass=function(){var t=this.index+1,e=this.index-1;this.s.loop&&this.$slide.length>2&&(0===this.index?e=this.$slide.length-1:this.index===this.$slide.length-1&&(t=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),e>-1&&this.$slide.eq(e).addClass("lg-prev-slide"),this.$slide.eq(t).addClass("lg-next-slide")},n.prototype.mousewheel=function(){var t=this;t.$outer.on("mousewheel.lg",function(e){e.deltaY&&(e.deltaY>0?t.goToPrevSlide():t.goToNextSlide(),e.preventDefault())})},n.prototype.closeGallery=function(){var e=this,n=!1;this.$outer.find(".lg-close").on("click.lg",function(){e.destroy()}),e.s.closable&&(e.$outer.on("mousedown.lg",function(e){n=!!(t(e.target).is(".lg-outer")||t(e.target).is(".lg-item ")||t(e.target).is(".lg-img-wrap"))}),e.$outer.on("mousemove.lg",function(){n=!1}),e.$outer.on("mouseup.lg",function(r){(t(r.target).is(".lg-outer")||t(r.target).is(".lg-item ")||t(r.target).is(".lg-img-wrap")&&n)&&(e.$outer.hasClass("lg-dragging")||e.destroy())}))},n.prototype.destroy=function(e){var n=this;e||(n.$el.trigger("onBeforeClose.lg"),t(window).scrollTop(n.prevScrollTop)),e&&(n.s.dynamic||this.$items.off("click.lg click.lgcustom"),t.removeData(n.el,"lightGallery")),this.$el.off(".lg.tm"),t.each(t.fn.lightGallery.modules,function(t){n.modules[t]&&n.modules[t].destroy()}),this.lGalleryOn=!1,clearTimeout(n.hideBarTimeout),this.hideBarTimeout=!1,t(window).off(".lg"),t("body").removeClass("lg-on lg-from-hash"),n.$outer&&n.$outer.removeClass("lg-visible"),t(".lg-backdrop").removeClass("in"),setTimeout(function(){n.$outer&&n.$outer.remove(),t(".lg-backdrop").remove(),e||n.$el.trigger("onCloseAfter.lg"),n.$el.focus()},n.s.backdropDuration+50)},t.fn.lightGallery=function(e){return this.each(function(){if(t.data(this,"lightGallery"))try{t(this).data("lightGallery").init()}catch(t){console.error("lightGallery has not initiated properly",t)}else t.data(this,"lightGallery",new n(this,e))})},t.fn.lightGallery.modules={},t.fn.lightGallery}),define("skylark-lightgallery/modules/autoplay",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},r=function(e){return this.core=t(e).data("lightGallery"),this.$el=t(e),!(this.core.$items.length<2)&&(this.core.s=t.extend({},n,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};r.prototype.init=function(){var t=this;t.core.s.autoplayControls&&t.controls(),t.core.s.progressBar&&t.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),t.progress(),t.core.s.autoplay&&t.$el.one("onSlideItemLoad.lg.tm",function(){t.startlAuto()}),t.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){t.interval&&(t.cancelAuto(),t.canceledOnTouch=!0)}),t.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!t.interval&&t.canceledOnTouch&&(t.startlAuto(),t.canceledOnTouch=!1)})},r.prototype.progress=function(){var t,e,n=this;n.$el.on("onBeforeSlide.lg.tm",function(){n.core.s.progressBar&&n.fromAuto&&(t=n.core.$outer.find(".lg-progress-bar"),e=n.core.$outer.find(".lg-progress"),n.interval&&(e.removeAttr("style"),t.removeClass("lg-start"),setTimeout(function(){e.css("transition","width "+(n.core.s.speed+n.core.s.pause)+"ms ease 0s"),t.addClass("lg-start")},20))),n.fromAuto||n.core.s.fourceAutoplay||n.cancelAuto(),n.fromAuto=!1})},r.prototype.controls=function(){var e=this;t(this.core.s.appendAutoplayControlsTo).append('<button type="button" aria-label="Toggle autoplay" class="lg-autoplay-button lg-icon"></button>'),e.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){t(e.core.$outer).hasClass("lg-show-autoplay")?(e.cancelAuto(),e.core.s.fourceAutoplay=!1):e.interval||(e.startlAuto(),e.core.s.fourceAutoplay=e.fourceAutoplayTemp)})},r.prototype.startlAuto=function(){var t=this;t.core.$outer.find(".lg-progress").css("transition","width "+(t.core.s.speed+t.core.s.pause)+"ms ease 0s"),t.core.$outer.addClass("lg-show-autoplay"),t.core.$outer.find(".lg-progress-bar").addClass("lg-start"),t.interval=setInterval(function(){t.core.index+1<t.core.$items.length?t.core.index++:t.core.index=0,t.fromAuto=!0,t.core.slide(t.core.index,!1,!1,"next")},t.core.s.speed+t.core.s.pause)},r.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},r.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},t.fn.lightGallery.modules.autoplay=r}),define("skylark-lightgallery/modules/fullscreen",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={fullScreen:!0};function r(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}var i=function(e){return this.core=t(e).data("lightGallery"),this.$el=t(e),this.core.s=t.extend({},n,this.core.s),this.init(),this};i.prototype.init=function(){var t="";if(this.core.s.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;t='<button type="button" aria-label="Toggle fullscreen" class="lg-fullscreen lg-icon"></button>',this.core.$outer.find(".lg-toolbar").append(t),this.fullScreen()}},i.prototype.requestFullscreen=function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},i.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},i.prototype.fullScreen=function(){var e=this;t(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){e.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){r()?e.exitFullscreen():e.requestFullscreen()})},i.prototype.destroy=function(){r()&&this.exitFullscreen(),t(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},t.fn.lightGallery.modules.fullscreen=i}),define("skylark-lightgallery/modules/hash",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={hash:!0},r=function(e){return this.core=t(e).data("lightGallery"),this.core.s=t.extend({},n,this.core.s),this.core.s.hash&&(this.oldHash=window.location.hash,this.init()),this};r.prototype.init=function(){var e,n=this;n.core.$el.on("onAfterSlide.lg.tm",function(t,e,r){history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search+"#lg="+n.core.s.galleryId+"&slide="+r):window.location.hash="lg="+n.core.s.galleryId+"&slide="+r}),t(window).on("hashchange.lg.hash",function(){e=window.location.hash;var t=parseInt(e.split("&slide=")[1],10);e.indexOf("lg="+n.core.s.galleryId)>-1?n.core.slide(t,!1,!1):n.core.lGalleryOn&&n.core.destroy()})},r.prototype.destroy=function(){this.core.s.hash&&(this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?history.replaceState?history.replaceState(null,null,this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash="",this.core.$el.off(".lg.hash"))},t.fn.lightGallery.modules.hash=r}),define("skylark-lightgallery/modules/pager",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={pager:!1},r=function(e){return this.core=t(e).data("lightGallery"),this.$el=t(e),this.core.s=t.extend({},n,this.core.s),this.core.s.pager&&this.core.$items.length>1&&this.init(),this};r.prototype.init=function(){var e,n,r,i=this,s="";if(i.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),i.core.s.dynamic)for(var o=0;o<i.core.s.dynamicEl.length;o++)s+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+i.core.s.dynamicEl[o].thumb+'" /></div></span>';else i.core.$items.each(function(){i.core.s.exThumbImage?s+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+t(this).attr(i.core.s.exThumbImage)+'" /></div></span>':s+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+t(this).find("img").attr("src")+'" /></div></span>'});(n=i.core.$outer.find(".lg-pager-outer")).html(s),(e=i.core.$outer.find(".lg-pager-cont")).on("click.lg touchend.lg",function(){var e=t(this);i.core.index=e.index(),i.core.slide(i.core.index,!1,!0,!1)}),n.on("mouseover.lg",function(){clearTimeout(r),n.addClass("lg-pager-hover")}),n.on("mouseout.lg",function(){r=setTimeout(function(){n.removeClass("lg-pager-hover")})}),i.core.$el.on("onBeforeSlide.lg.tm",function(t,n,r){e.removeClass("lg-pager-active"),e.eq(r).addClass("lg-pager-active")})},r.prototype.destroy=function(){},t.fn.lightGallery.modules.pager=r}),define("skylark-lightgallery/modules/rotate",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={rotate:!0,rotateLeft:!0,rotateRight:!0,flipHorizontal:!0,flipVertical:!0},r=function(e){return this.core=t(e).data("lightGallery"),this.core.s=t.extend({},n,this.core.s),this.core.s.rotate&&this.core.doCss()&&this.init(),this};r.prototype.buildTemplates=function(){var t="";this.core.s.flipVertical&&(t+='<button aria-label="Flip vertical" class="lg-flip-ver lg-icon"></button>'),this.core.s.flipHorizontal&&(t+='<button aria-label="flip horizontal" class="lg-flip-hor lg-icon"></button>'),this.core.s.rotateLeft&&(t+='<button aria-label="Rotate left" class="lg-rotate-left lg-icon"></button>'),this.core.s.rotateRight&&(t+='<button aria-label="Rotate right" class="lg-rotate-right lg-icon"></button>'),this.core.$outer.find(".lg-toolbar").append(t)},r.prototype.init=function(){var t=this;this.buildTemplates(),this.rotateValuesList={},this.core.$el.on("onAferAppendSlide.lg.tm.rotate",function(e,n){var r=t.core.$slide.eq(n).find(".lg-img-wrap");r.wrap('<div class="lg-img-rotate"></div>')}),this.core.$outer.find(".lg-rotate-left").on("click.lg",this.rotateLeft.bind(this)),this.core.$outer.find(".lg-rotate-right").on("click.lg",this.rotateRight.bind(this)),this.core.$outer.find(".lg-flip-hor").on("click.lg",this.flipHorizontal.bind(this)),this.core.$outer.find(".lg-flip-ver").on("click.lg",this.flipVertical.bind(this)),this.core.$el.on("onBeforeSlide.lg.tm.rotate",function(e,n,r){t.rotateValuesList[r]||(t.rotateValuesList[r]={rotate:0,flipHorizontal:1,flipVertical:1})})},r.prototype.applyStyles=function(){var t=this.core.$slide.eq(this.core.index).find(".lg-img-rotate");t.css("transform","rotate("+this.rotateValuesList[this.core.index].rotate+"deg) scale3d("+this.rotateValuesList[this.core.index].flipHorizontal+", "+this.rotateValuesList[this.core.index].flipVertical+", 1)")},r.prototype.getCurrentRotation=function(t){if(!t)return 0;var e=window.getComputedStyle(t,null),n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"none";if("none"!==n){var r=n.split("(")[1].split(")")[0].split(",");if(r){var i=Math.round(Math.atan2(r[1],r[0])*(180/Math.PI));return i<0?i+360:i}}return 0},r.prototype.rotateLeft=function(){this.rotateValuesList[this.core.index].rotate-=90,this.applyStyles()},r.prototype.rotateRight=function(){this.rotateValuesList[this.core.index].rotate+=90,this.applyStyles()},r.prototype.flipHorizontal=function(){var t=this.core.$slide.eq(this.core.index).find(".lg-img-rotate")[0],e=this.getCurrentRotation(t),n="flipHorizontal";90!==e&&270!==e||(n="flipVertical"),this.rotateValuesList[this.core.index][n]*=-1,this.applyStyles()},r.prototype.flipVertical=function(){var t=this.core.$slide.eq(this.core.index).find(".lg-img-rotate")[0],e=this.getCurrentRotation(t),n="flipVertical";90!==e&&270!==e||(n="flipHorizontal"),this.rotateValuesList[this.core.index][n]*=-1,this.applyStyles()},r.prototype.destroy=function(){this.core.$el.off(".lg.tm.rotate"),this.rotateValuesList={}},t.fn.lightGallery.modules.rotate=r}),define("skylark-lightgallery/modules/share",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",googlePlus:!0,googlePlusDropdownText:"GooglePlus",pinterest:!0,pinterestDropdownText:"Pinterest"},r=function(e){return this.core=t(e).data("lightGallery"),this.core.s=t.extend({},n,this.core.s),this.core.s.share&&this.init(),this};r.prototype.init=function(){var e=this,n='<button type="button" aria-label="Share" id="lg-share" class="lg-icon" aria-haspopup="true" aria-expanded="false"><ul class="lg-dropdown" style="position: absolute;">';n+=e.core.s.facebook?'<li><a id="lg-share-facebook" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.facebookDropdownText+"</span></a></li>":"",n+=e.core.s.twitter?'<li><a id="lg-share-twitter" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.twitterDropdownText+"</span></a></li>":"",n+=e.core.s.googlePlus?'<li><a id="lg-share-googleplus" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.googlePlusDropdownText+"</span></a></li>":"",n+=e.core.s.pinterest?'<li><a id="lg-share-pinterest" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.pinterestDropdownText+"</span></a></li>":"",n+="</ul></button>",this.core.$outer.find(".lg-toolbar").append(n),this.core.$outer.find(".lg").append('<div id="lg-dropdown-overlay"></div>'),t("#lg-share").on("click.lg",function(){e.core.$outer.toggleClass("lg-dropdown-active");var n=t("#lg-share").attr("aria-expanded");t("#lg-share").attr("aria-expanded","true"!==n)}),t("#lg-dropdown-overlay").on("click.lg",function(){e.core.$outer.removeClass("lg-dropdown-active"),t("#lg-share").attr("aria-expanded",!1)}),e.core.$el.on("onAfterSlide.lg.tm",function(n,r,i){setTimeout(function(){t("#lg-share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e.getSahreProps(i,"facebookShareUrl")||window.location.href)),t("#lg-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+e.getSahreProps(i,"tweetText")+"&url="+encodeURIComponent(e.getSahreProps(i,"twitterShareUrl")||window.location.href)),t("#lg-share-googleplus").attr("href","https://plus.google.com/share?url="+encodeURIComponent(e.getSahreProps(i,"googleplusShareUrl")||window.location.href)),t("#lg-share-pinterest").attr("href","http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(e.getSahreProps(i,"pinterestShareUrl")||window.location.href)+"&media="+encodeURIComponent(e.getSahreProps(i,"src"))+"&description="+e.getSahreProps(i,"pinterestText"))},100)})},r.prototype.getSahreProps=function(t,e){var n="";if(this.core.s.dynamic)n=this.core.s.dynamicEl[t][e];else{var r=this.core.$items.eq(t).attr("href"),i=this.core.$items.eq(t).data(e);n="src"===e&&r||i}return n},r.prototype.destroy=function(){},t.fn.lightGallery.modules.share=r}),define("skylark-lightgallery/modules/thumbnail",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},r=function(e){return this.core=t(e).data("lightGallery"),this.core.s=t.extend({},n,this.core.s),this.$el=t(e),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};r.prototype.init=function(){var t=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){t.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},r.prototype.build=function(){var e,n=this,r="",i="";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":i="640";break;case"thumbnail_medium":i="200x150";break;case"thumbnail_small":i="100x75"}function s(t,e,s){var o,a=n.core.isVideo(t,s)||{},l="";a.youtube||a.vimeo||a.dailymotion?a.youtube?o=n.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+a.youtube[1]+"/"+n.core.s.youtubeThumbSize+".jpg":e:a.vimeo?n.core.s.loadVimeoThumbnail?(o="//i.vimeocdn.com/video/error_"+i+".jpg",l=a.vimeo[1]):o=e:a.dailymotion&&(o=n.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+a.dailymotion[1]:e):o=e,r+='<div data-vimeo-id="'+l+'" class="lg-thumb-item" style="width:'+n.core.s.thumbWidth+"px; height: "+n.core.s.thumbHeight+"; margin-right: "+n.core.s.thumbMargin+'px"><img src="'+o+'" /></div>',l=""}if(n.core.$outer.addClass("lg-has-thumb"),n.core.$outer.find(".lg").append('<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>'),n.$thumbOuter=n.core.$outer.find(".lg-thumb-outer"),n.thumbOuterWidth=n.$thumbOuter.width(),n.core.s.animateThumb&&n.core.$outer.find(".lg-thumb").css({width:n.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&n.$thumbOuter.css("height",n.core.s.thumbContHeight+"px"),n.core.s.dynamic)for(var o=0;o<n.core.s.dynamicEl.length;o++)s(n.core.s.dynamicEl[o].src,n.core.s.dynamicEl[o].thumb,o);else n.core.$items.each(function(e){n.core.s.exThumbImage?s(t(this).attr("href")||t(this).attr("data-src"),t(this).attr(n.core.s.exThumbImage),e):s(t(this).attr("href")||t(this).attr("data-src"),t(this).find("img").attr("src"),e)});n.core.$outer.find(".lg-thumb").html(r),(e=n.core.$outer.find(".lg-thumb-item")).each(function(){var e=t(this),r=e.attr("data-vimeo-id");r&&t.getJSON("//www.vimeo.com/api/v2/video/"+r+".json?callback=?",{format:"json"},function(t){e.find("img").attr("src",t[0][n.core.s.vimeoThumbSize])})}),e.eq(n.core.index).addClass("active"),n.core.$el.on("onBeforeSlide.lg.tm",function(){e.removeClass("active"),e.eq(n.core.index).addClass("active")}),e.on("click.lg touchend.lg",function(){var e=t(this);setTimeout(function(){(n.thumbClickable&&!n.core.lgBusy||!n.core.doCss())&&(n.core.index=e.index(),n.core.slide(n.core.index,!1,!0,!1))},50)}),n.core.$el.on("onBeforeSlide.lg.tm",function(){n.animateThumb(n.core.index)}),t(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){n.animateThumb(n.core.index),n.thumbOuterWidth=n.$thumbOuter.width()},200)})},r.prototype.setTranslate=function(t){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+t+"px, 0px, 0px)"})},r.prototype.animateThumb=function(t){var e=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var n;switch(this.core.s.currentPagerPosition){case"left":n=0;break;case"middle":n=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":n=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*t-1-n,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(e.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||e.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||e.css("left",-this.left+"px"),this.setTranslate(this.left)}},r.prototype.enableThumbDrag=function(){var e=this,n=0,r=0,i=!1,s=!1,o=0;e.$thumbOuter.addClass("lg-grab"),e.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(t){e.thumbTotalWidth>e.thumbOuterWidth&&(t.preventDefault(),n=t.pageX,i=!0,e.core.$outer.scrollLeft+=1,e.core.$outer.scrollLeft-=1,e.thumbClickable=!1,e.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),t(window).on("mousemove.lg.thumb",function(t){i&&(o=e.left,s=!0,r=t.pageX,e.$thumbOuter.addClass("lg-dragging"),(o-=r-n)>e.thumbTotalWidth-e.thumbOuterWidth&&(o=e.thumbTotalWidth-e.thumbOuterWidth),o<0&&(o=0),e.setTranslate(o))}),t(window).on("mouseup.lg.thumb",function(){s?(s=!1,e.$thumbOuter.removeClass("lg-dragging"),e.left=o,Math.abs(r-n)<e.core.s.swipeThreshold&&(e.thumbClickable=!0)):e.thumbClickable=!0,i&&(i=!1,e.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},r.prototype.enableThumbSwipe=function(){var t=this,e=0,n=0,r=!1,i=0;t.core.$outer.find(".lg-thumb").on("touchstart.lg",function(n){t.thumbTotalWidth>t.thumbOuterWidth&&(n.preventDefault(),e=n.originalEvent.targetTouches[0].pageX,t.thumbClickable=!1)}),t.core.$outer.find(".lg-thumb").on("touchmove.lg",function(s){t.thumbTotalWidth>t.thumbOuterWidth&&(s.preventDefault(),n=s.originalEvent.targetTouches[0].pageX,r=!0,t.$thumbOuter.addClass("lg-dragging"),i=t.left,(i-=n-e)>t.thumbTotalWidth-t.thumbOuterWidth&&(i=t.thumbTotalWidth-t.thumbOuterWidth),i<0&&(i=0),t.setTranslate(i))}),t.core.$outer.find(".lg-thumb").on("touchend.lg",function(){t.thumbTotalWidth>t.thumbOuterWidth&&r?(r=!1,t.$thumbOuter.removeClass("lg-dragging"),Math.abs(n-e)<t.core.s.swipeThreshold&&(t.thumbClickable=!0),t.left=i):t.thumbClickable=!0})},r.prototype.toogle=function(){var t=this;t.core.s.toogleThumb&&(t.core.$outer.addClass("lg-can-toggle"),t.$thumbOuter.append('<button type="button" aria-label="Toggle thumbnails" class="lg-toogle-thumb lg-icon"></button>'),t.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){t.core.$outer.toggleClass("lg-thumb-open")}))},r.prototype.thumbkeyPress=function(){var e=this;t(window).on("keydown.lg.thumb",function(t){38===t.keyCode?(t.preventDefault(),e.core.$outer.addClass("lg-thumb-open")):40===t.keyCode&&(t.preventDefault(),e.core.$outer.removeClass("lg-thumb-open"))})},r.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(t(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},t.fn.lightGallery.modules.Thumbnail=r}),define("skylark-lightgallery/modules/video",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},r=function(e){return this.core=t(e).data("lightGallery"),this.$el=t(e),this.core.s=t.extend({},n,this.core.s),this.videoLoaded=!1,this.init(),this};r.prototype.init=function(){var e=this;e.core.$el.on("hasVideo.lg.tm",function(t,e,n,r){var i=this;if(i.core.$slide.eq(e).find(".lg-video").append(i.loadVideo(n,"lg-object",!0,e,r)),r)if(i.core.s.videojs)try{videojs(i.core.$slide.eq(e).find(".lg-html5").get(0),i.core.s.videojsOptions,function(){!i.videoLoaded&&i.core.s.autoplayFirstVideo&&this.play()})}catch(t){console.error("lightGallery:- Make sure you have included videojs")}else!i.videoLoaded&&i.core.s.autoplayFirstVideo&&i.core.$slide.eq(e).find(".lg-html5").get(0).play()}.bind(this)),e.core.$el.on("onAferAppendSlide.lg.tm",function(t,e){var n=this.core.$slide.eq(e).find(".lg-video-cont");n.hasClass("lg-has-iframe")||(n.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}.bind(this)),e.core.doCss()&&e.core.$items.length>1&&(e.core.s.enableSwipe||e.core.s.enableDrag)?e.core.$el.on("onSlideClick.lg.tm",function(){var t=e.core.$slide.eq(e.core.index);e.loadVideoOnclick(t)}):e.core.$slide.on("click.lg",function(){e.loadVideoOnclick(t(this))}),e.core.$el.on("onBeforeSlide.lg.tm",function(e,n,r){var i,s=this.core.$slide.eq(n),o=s.find(".lg-youtube").get(0),a=s.find(".lg-vimeo").get(0),l=s.find(".lg-dailymotion").get(0),u=s.find(".lg-vk").get(0),c=s.find(".lg-html5").get(0);if(o)o.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(a)try{new Vimeo.Player(a).pause().catch(function(t){console.error("Unable to pause the video:",t.name)})}catch(t){console.warn("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(l)l.contentWindow.postMessage("pause","*");else if(c)if(this.core.s.videojs)try{videojs(c).pause()}catch(t){console.error("lightGallery:- Make sure you have included videojs")}else c.pause();u&&t(u).attr("src",t(u).attr("src").replace("&autoplay","&noplay"));i=this.core.s.dynamic?this.core.s.dynamicEl[r].src:this.core.$items.eq(r).attr("href")||this.core.$items.eq(r).attr("data-src");var h=this.core.isVideo(i,r)||{};(h.youtube||h.vimeo||h.dailymotion||h.vk)&&this.core.$outer.addClass("lg-hide-download")}.bind(this)),e.core.$el.on("onAfterSlide.lg.tm",function(t,n){e.core.$slide.eq(n).removeClass("lg-video-playing")}),e.core.s.autoplayFirstVideo&&e.core.$el.on("onAferAppendSlide.lg.tm",function(t,n){if(!e.core.lGalleryOn){var r=e.core.$slide.eq(n);setTimeout(function(){e.loadVideoOnclick(r)},100)}})},r.prototype.loadVideo=function(e,n,r,i,s){var o,a="",l=1,u="",c=this.core.isVideo(e,i)||{};if(o=(o=this.core.s.dynamic?this.core.s.dynamicEl[this.core.index].title:this.core.$items.eq(this.core.index).attr("title")||this.core.$items.eq(this.core.index).find("img").first().attr("alt"))?'title="'+o+'"':"",r&&(l=this.videoLoaded?0:this.core.s.autoplayFirstVideo?1:0),c.youtube)u="?wmode=opaque&autoplay="+l+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(u=u+"&"+t.param(this.core.s.youtubePlayerParams)),a='<iframe allow="autoplay" class="lg-video-object lg-youtube '+n+'" '+o+' width="560" height="315" src="//www.youtube.com/embed/'+c.youtube[1]+u+'" frameborder="0" allowfullscreen></iframe>';else if(c.vimeo)u="?autoplay="+l,this.core.s.vimeoPlayerParams&&(u=u+"&"+t.param(this.core.s.vimeoPlayerParams)),a='<iframe allow="autoplay" class="lg-video-object lg-vimeo '+n+'" '+o+' width="560" height="315"  src="//player.vimeo.com/video/'+c.vimeo[1]+u+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(c.dailymotion)u="?wmode=opaque&autoplay="+l+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(u=u+"&"+t.param(this.core.s.dailymotionPlayerParams)),a='<iframe allow="autoplay" class="lg-video-object lg-dailymotion '+n+'" '+o+' width="560" height="315" src="//www.dailymotion.com/embed/video/'+c.dailymotion[1]+u+'" frameborder="0" allowfullscreen></iframe>';else if(c.html5){var h=s.substring(0,1);"."!==h&&"#"!==h||(s=t(s).html()),a=s}else c.vk&&(u="&autoplay="+l,this.core.s.vkPlayerParams&&(u=u+"&"+t.param(this.core.s.vkPlayerParams)),a='<iframe allow="autoplay" class="lg-video-object lg-vk '+n+'" '+o+' width="560" height="315" src="//vk.com/video_ext.php?'+c.vk[1]+u+'" frameborder="0" allowfullscreen></iframe>');return a},r.prototype.loadVideoOnclick=function(t){var e=this;if(t.find(".lg-object").hasClass("lg-has-poster")&&t.find(".lg-object").is(":visible"))if(t.hasClass("lg-has-video")){var n=t.find(".lg-youtube").get(0),r=t.find(".lg-vimeo").get(0),i=t.find(".lg-dailymotion").get(0),s=t.find(".lg-html5").get(0);if(n)n.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(r)try{new Vimeo.Player(r).play().catch(function(t){console.error("error playing the video:",t.name)})}catch(t){console.warn("lightGallery:- Make sure you have included https://github.com/vimeo/player.js")}else if(i)i.contentWindow.postMessage("play","*");else if(s)if(e.core.s.videojs)try{videojs(s).play()}catch(t){console.error("lightGallery:- Make sure you have included videojs")}else s.play();t.addClass("lg-video-playing")}else{var o,a;t.addClass("lg-video-playing lg-has-video");var l=function(n,r){if(t.find(".lg-video").append(e.loadVideo(n,"",!1,e.core.index,r)),r)if(e.core.s.videojs)try{videojs(e.core.$slide.eq(e.core.index).find(".lg-html5").get(0),e.core.s.videojsOptions,function(){this.play()})}catch(t){console.error("lightGallery:- Make sure you have included videojs")}else e.core.$slide.eq(e.core.index).find(".lg-html5").get(0).play()};e.core.s.dynamic?(o=e.core.s.dynamicEl[e.core.index].src,a=e.core.s.dynamicEl[e.core.index].html,l(o,a)):(o=e.core.$items.eq(e.core.index).attr("href")||e.core.$items.eq(e.core.index).attr("data-src"),a=e.core.$items.eq(e.core.index).attr("data-html"),l(o,a));var u=t.find(".lg-object");t.find(".lg-video").append(u),t.find(".lg-video-object").hasClass("lg-html5")||(t.removeClass("lg-complete"),t.find(".lg-video-object").on("load.lg error.lg",function(){t.addClass("lg-complete")}))}},r.prototype.destroy=function(){this.videoLoaded=!1},t.fn.lightGallery.modules.video=r}),define("skylark-lightgallery/modules/zoom",["skylark-jquery","../light-gallery"],function(t,e){"use strict";var n={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:function(){var t=!1,e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);e&&parseInt(e[2],10)<54&&(t=!0);return t}()},r=function(e){return this.core=t(e).data("lightGallery"),this.core.s=t.extend({},n,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=t(window).width()/2,this.pageY=t(window).height()/2+t(window).scrollTop()),this};r.prototype.init=function(){var e=this,n='<button type="button" aria-label="Zoom in" id="lg-zoom-in" class="lg-icon"></button><button type="button" aria-label="Zoom out" id="lg-zoom-out" class="lg-icon"></button>';e.core.s.actualSize&&(n+='<button type="button" aria-label="Actual size" id="lg-actual-size" class="lg-icon"></button>'),e.core.s.useLeftForZoom?e.core.$outer.addClass("lg-use-left-for-zoom"):e.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(n),e.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(n,r,i){var s=e.core.s.enableZoomAfter+i;t("body").hasClass("lg-from-hash")&&i?s=0:t("body").removeClass("lg-from-hash"),e.zoomabletimeout=setTimeout(function(){e.core.$slide.eq(r).addClass("lg-zoomable")},s+30)});var r=1,i=function(n){var r,i,s=e.core.$outer.find(".lg-current .lg-image"),o=(t(window).width()-s.prop("offsetWidth"))/2,a=(t(window).height()-s.prop("offsetHeight"))/2+t(window).scrollTop();r=e.pageX-o,i=e.pageY-a;var l=(n-1)*r,u=(n-1)*i;s.css("transform","scale3d("+n+", "+n+", 1)").attr("data-scale",n),e.core.s.useLeftForZoom?s.parent().css({left:-l+"px",top:-u+"px"}).attr("data-x",l).attr("data-y",u):s.parent().css("transform","translate3d(-"+l+"px, -"+u+"px, 0)").attr("data-x",l).attr("data-y",u)},s=function(){r>1?e.core.$outer.addClass("lg-zoomed"):e.resetZoom(),r<1&&(r=1),i(r)},o=function(n,i,o,a){var l,u=i.prop("offsetWidth");l=e.core.s.dynamic?e.core.s.dynamicEl[o].width||i[0].naturalWidth||u:e.core.$items.eq(o).attr("data-width")||i[0].naturalWidth||u,e.core.$outer.hasClass("lg-zoomed")?r=1:l>u&&(r=l/u||2),a?(e.pageX=t(window).width()/2,e.pageY=t(window).height()/2+t(window).scrollTop()):(e.pageX=n.pageX||n.originalEvent.targetTouches[0].pageX,e.pageY=n.pageY||n.originalEvent.targetTouches[0].pageY),s(),setTimeout(function(){e.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},a=!1;e.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(t,n){var r=e.core.$slide.eq(n).find(".lg-image");r.on("dblclick",function(t){o(t,r,n)}),r.on("touchstart",function(t){a?(clearTimeout(a),a=null,o(t,r,n)):a=setTimeout(function(){a=null},300),t.preventDefault()})}),t(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){e.pageX=t(window).width()/2,e.pageY=t(window).height()/2+t(window).scrollTop(),i(r)}),t("#lg-zoom-out").on("click.lg",function(){e.core.$outer.find(".lg-current .lg-image").length&&(r-=e.core.s.scale,s())}),t("#lg-zoom-in").on("click.lg",function(){e.core.$outer.find(".lg-current .lg-image").length&&(r+=e.core.s.scale,s())}),t("#lg-actual-size").on("click.lg",function(t){o(t,e.core.$slide.eq(e.core.index).find(".lg-image"),e.core.index,!0)}),e.core.$el.on("onBeforeSlide.lg.tm",function(){r=1,e.resetZoom()}),e.zoomDrag(),e.zoomSwipe()},r.prototype.getCurrentTransform=function(t){if(!t)return 0;var e=window.getComputedStyle(t,null),n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"none";return"none"!==n?n.split("(")[1].split(")")[0].split(","):0},r.prototype.getCurrentRotation=function(t){if(!t)return 0;var e=this.getCurrentTransform(t);return e?Math.round(Math.atan2(e[1],e[0])*(180/Math.PI)):0},r.prototype.getModifier=function(t,e,n){var r=t;t=Math.abs(t);var i=this.getCurrentTransform(n);if(!i)return 1;var s=1;if("X"===e){var o=Math.sign(parseFloat(i[0]));0===t||180===t?s=1:90===t&&(s=-90===r&&1===o||90===r&&-1===o?-1:1),s*=o}else{var a=Math.sign(parseFloat(i[3]));if(0===t||180===t)s=1;else if(90===t){var l=parseFloat(i[1]),u=parseFloat(i[2]);s=Math.sign(l*u*r*a)}s*=a}return s},r.prototype.getImageSize=function(t,e,n){return 90===e&&(n="x"===n?"y":"x"),t.prop({y:"offsetHeight",x:"offsetWidth"}[n])},r.prototype.getDragCords=function(t,e){return 90===e?{x:t.pageY,y:t.pageX}:{x:t.pageX,y:t.pageY}},r.prototype.getSwipeCords=function(t,e){var n=t.originalEvent.targetTouches[0].pageX,r=t.originalEvent.targetTouches[0].pageY;return 90===e?{x:r,y:n}:{x:n,y:r}},r.prototype.getPossibleDragCords=function(t,e){var n=(this.core.$outer.find(".lg").height()-this.getImageSize(t,e,"y"))/2,r=Math.abs(this.getImageSize(t,e,"y")*Math.abs(t.attr("data-scale"))-this.core.$outer.find(".lg").height()+n),i=(this.core.$outer.find(".lg").width()-this.getImageSize(t,e,"x"))/2,s=Math.abs(this.getImageSize(t,e,"x")*Math.abs(t.attr("data-scale"))-this.core.$outer.find(".lg").width()+i);return 90===e?{minY:i,maxY:s,minX:n,maxX:r}:{minY:n,maxY:r,minX:i,maxX:s}},r.prototype.getDragAllowedAxises=function(t,e){var n=this.getImageSize(t,e,"y")*t.attr("data-scale")>this.core.$outer.find(".lg").height(),r=this.getImageSize(t,e,"x")*t.attr("data-scale")>this.core.$outer.find(".lg").width();return 90===e?{allowX:n,allowY:r}:{allowX:r,allowY:n}},r.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=t(window).width()/2,this.pageY=t(window).height()/2+t(window).scrollTop()},r.prototype.zoomSwipe=function(){var t,e=this,n={},r={},i=!1,s=!1,o=!1,a=0;e.core.$slide.on("touchstart.lg",function(r){if(e.core.$outer.hasClass("lg-zoomed")){var i=e.core.$slide.eq(e.core.index).find(".lg-object");t=e.core.$slide.eq(e.core.index).find(".lg-img-rotate")[0],a=e.getCurrentRotation(t);var l=e.getDragAllowedAxises(i,Math.abs(a));o=l.allowY,((s=l.allowX)||o)&&(r.preventDefault(),n=e.getSwipeCords(r,Math.abs(a)))}}),e.core.$slide.on("touchmove.lg",function(l){if(e.core.$outer.hasClass("lg-zoomed")){var u,c,h=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");l.preventDefault(),i=!0,r=e.getSwipeCords(l,Math.abs(a)),e.core.$outer.addClass("lg-zoom-dragging"),c=o?-Math.abs(h.attr("data-y"))+(r.y-n.y)*e.getModifier(a,"Y",t):-Math.abs(h.attr("data-y")),u=s?-Math.abs(h.attr("data-x"))+(r.x-n.x)*e.getModifier(a,"X",t):-Math.abs(h.attr("data-x")),(Math.abs(r.x-n.x)>15||Math.abs(r.y-n.y)>15)&&(e.core.s.useLeftForZoom?h.css({left:u+"px",top:c+"px"}):h.css("transform","translate3d("+u+"px, "+c+"px, 0)"))}}),e.core.$slide.on("touchend.lg",function(){e.core.$outer.hasClass("lg-zoomed")&&i&&(i=!1,e.core.$outer.removeClass("lg-zoom-dragging"),e.touchendZoom(n,r,s,o,a))})},r.prototype.zoomDrag=function(){var e,n=this,r={},i={},s=!1,o=!1,a=!1,l=!1,u=0;n.core.$slide.on("mousedown.lg.zoom",function(i){e=n.core.$slide.eq(n.core.index).find(".lg-img-rotate")[0],u=n.getCurrentRotation(e);var o=n.core.$slide.eq(n.core.index).find(".lg-object"),c=n.getDragAllowedAxises(o,Math.abs(u));l=c.allowY,a=c.allowX,n.core.$outer.hasClass("lg-zoomed")&&t(i.target).hasClass("lg-object")&&(a||l)&&(i.preventDefault(),r=n.getDragCords(i,Math.abs(u)),s=!0,n.core.$outer.scrollLeft+=1,n.core.$outer.scrollLeft-=1,n.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),t(window).on("mousemove.lg.zoom",function(t){if(s){var c,h,d=n.core.$slide.eq(n.core.index).find(".lg-img-wrap");o=!0,i=n.getDragCords(t,Math.abs(u)),n.core.$outer.addClass("lg-zoom-dragging"),h=l?-Math.abs(d.attr("data-y"))+(i.y-r.y)*n.getModifier(u,"Y",e):-Math.abs(d.attr("data-y")),c=a?-Math.abs(d.attr("data-x"))+(i.x-r.x)*n.getModifier(u,"X",e):-Math.abs(d.attr("data-x")),n.core.s.useLeftForZoom?d.css({left:c+"px",top:h+"px"}):d.css("transform","translate3d("+c+"px, "+h+"px, 0)")}}),t(window).on("mouseup.lg.zoom",function(t){s&&(s=!1,n.core.$outer.removeClass("lg-zoom-dragging"),!o||r.x===i.x&&r.y===i.y||(i=n.getDragCords(t,Math.abs(u)),n.touchendZoom(r,i,a,l,u)),o=!1),n.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},r.prototype.touchendZoom=function(t,e,n,r,i){var s=this.core.$slide.eq(this.core.index).find(".lg-img-wrap"),o=this.core.$slide.eq(this.core.index).find(".lg-object"),a=this.core.$slide.eq(this.core.index).find(".lg-img-rotate")[0],l=-Math.abs(s.attr("data-x"))+(e.x-t.x)*this.getModifier(i,"X",a),u=-Math.abs(s.attr("data-y"))+(e.y-t.y)*this.getModifier(i,"Y",a),c=this.getPossibleDragCords(o,Math.abs(i));(Math.abs(e.x-t.x)>15||Math.abs(e.y-t.y)>15)&&(r&&(u<=-c.maxY?u=-c.maxY:u>=-c.minY&&(u=-c.minY)),n&&(l<=-c.maxX?l=-c.maxX:l>=-c.minX&&(l=-c.minX)),r?s.attr("data-y",Math.abs(u)):u=-Math.abs(s.attr("data-y")),n?s.attr("data-x",Math.abs(l)):l=-Math.abs(s.attr("data-x")),this.core.s.useLeftForZoom?s.css({left:l+"px",top:u+"px"}):s.css("transform","translate3d("+l+"px, "+u+"px, 0)"))},r.prototype.destroy=function(){this.core.$el.off(".lg.zoom"),t(window).off(".lg.zoom"),this.core.$slide.off(".lg.zoom"),this.core.$el.off(".lg.tm.zoom"),this.resetZoom(),clearTimeout(this.zoomabletimeout),this.zoomabletimeout=!1},t.fn.lightGallery.modules.zoom=r}),define("skylark-lightgallery/main",["./light-gallery","./modules/autoplay","./modules/fullscreen","./modules/hash","./modules/pager","./modules/rotate","./modules/share","./modules/thumbnail","./modules/video","./modules/zoom"],function(t){return t}),define("skylark-lightgallery",["skylark-lightgallery/main"],function(t){return t})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-lightgallery-all.js.map
